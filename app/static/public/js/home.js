function include(a){document.write('<script src="'+a+'"></script>')}function isIE(){var a=navigator.userAgent.toLowerCase();return a.indexOf("msie")!=-1&&parseInt(a.split("msie")[1])}!function(a,b){function c(a){var b=oa[a]={};return $.each(a.split(ba),function(a,c){b[c]=!0}),b}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(qa,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d||"false"!==d&&("null"===d?null:+d+""===d?+d:pa.test(d)?$.parseJSON(d):d)}catch(a){}$.data(a,c,d)}else d=b}return d}function e(a){var b;for(b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function i(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function j(a,b,c){if(b=b||0,$.isFunction(b))return $.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return $.grep(a,function(a,d){return a===b===c});if("string"==typeof b){var d=$.grep(a,function(a){return 1===a.nodeType});if(Ka.test(b))return $.filter(b,d,!c);b=$.filter(b,d)}return $.grep(a,function(a,d){return $.inArray(a,b)>=0===c})}function k(a){var b=Na.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function m(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e,f=$._data(a),g=$._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)$.event.add(b,c,h[c][d])}g.data&&(g.data=$.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),$.support.html5Clone&&a.innerHTML&&!$.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Xa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute($.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){Xa.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=rb.length;e--;)if(b=rb[e]+c,b in a)return b;return d}function r(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)}function s(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)c=a[f],c.style&&(e[f]=$._data(c,"olddisplay"),b?(!e[f]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&r(c)&&(e[f]=$._data(c,"olddisplay",w(c.nodeName)))):(d=cb(c,"display"),!e[f]&&"none"!==d&&$._data(c,"olddisplay",d)));for(f=0;f<g;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function t(a,b,c){var d=kb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function u(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;e<4;e+=2)"margin"===c&&(f+=$.css(a,c+qb[e],!0)),d?("content"===c&&(f-=parseFloat(cb(a,"padding"+qb[e]))||0),"margin"!==c&&(f-=parseFloat(cb(a,"border"+qb[e]+"Width"))||0)):(f+=parseFloat(cb(a,"padding"+qb[e]))||0,"padding"!==c&&(f+=parseFloat(cb(a,"border"+qb[e]+"Width"))||0));return f}function v(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=$.support.boxSizing&&"border-box"===$.css(a,"boxSizing");if(d<=0||null==d){if(d=cb(a,b),(d<0||null==d)&&(d=a.style[b]),lb.test(d))return d;e=f&&($.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+u(a,b,c||(f?"border":"content"),e)+"px"}function w(a){if(nb[a])return nb[a];var b=$("<"+a+">").appendTo(P.body),c=b.css("display");return b.remove(),"none"!==c&&""!==c||(db=P.body.appendChild(db||$.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),eb&&db.createElement||(eb=(db.contentWindow||db.contentDocument).document,eb.write("<!doctype html><html><body>"),eb.close()),b=eb.body.appendChild(eb.createElement(a)),c=cb(b,"display"),P.body.removeChild(db)),nb[a]=c,c}function x(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||ub.test(a)?d(a,e):x(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)x(a+"["+e+"]",b[e],c,d)}function y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(ba),h=0,i=g.length;if($.isFunction(c))for(;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function z(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===Kb;j<k&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=z(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=z(a,c,d,e,"*",g)),h}function A(a,c){var d,e,f=$.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&$.extend(!0,a,e)}function B(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function C(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}if(c!==!0)if(c&&a.throws)b=c(b);else try{b=c(b)}catch(a){return{state:"parsererror",error:c?a:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function D(){try{return new a.XMLHttpRequest}catch(a){}}function E(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}function F(){return setTimeout(function(){Ub=b},0),Ub=$.now()}function G(a,b){$.each(b,function(b,c){for(var d=($b[b]||[]).concat($b["*"]),e=0,f=d.length;e<f;e++)if(d[e].call(a,b,c))return})}function H(a,b,c){var d,e=0,f=Zb.length,g=$.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Ub||F(),c=Math.max(0,i.startTime+i.duration-b),d=c/i.duration||0,e=1-d,f=0,h=i.tweens.length;f<h;f++)i.tweens[f].run(e);return g.notifyWith(a,[i,e,c]),e<1&&h?c:(g.resolveWith(a,[i]),!1)},i=g.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ub||F(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=$.Tween(a,i.opts,b,c,i.opts.specialEasing[b]||i.opts.easing);return i.tweens.push(e),e},stop:function(b){for(var c=0,d=b?i.tweens.length:0;c<d;c++)i.tweens[c].run(1);return b?g.resolveWith(a,[i,b]):g.rejectWith(a,[i,b]),this}}),j=i.props;for(I(j,i.opts.specialEasing);e<f;e++)if(d=Zb[e].call(i,a,j,i.opts))return d;return G(i,j),$.isFunction(i.opts.start)&&i.opts.start.call(a,i),$.fx.timer($.extend(h,{anim:i,queue:i.opts.queue,elem:a})),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always)}function I(a,b){var c,d,e,f,g;for(c in a)if(d=$.camelCase(c),e=b[d],f=a[c],$.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=$.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&r(a);c.queue||(k=$._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,$.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===$.css(a,"display")&&"none"===$.css(a,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==w(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",$.support.shrinkWrapBlocks||m.done(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(f=b[d],Wb.exec(f)){if(delete b[d],i=i||"toggle"===f,f===(q?"hide":"show"))continue;p.push(d)}if(g=p.length){h=$._data(a,"fxshow")||$._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?$(a).show():m.done(function(){$(a).hide()}),m.done(function(){var b;$.removeData(a,"fxshow",!0);for(b in o)$.style(a,b,o[b])});for(d=0;d<g;d++)e=p[d],j=m.createTween(e,q?h[e]:0),o[e]=h[e]||$.style(a,e),e in h||(h[e]=j.start,q&&(j.end=j.start,j.start="width"===e||"height"===e?1:0))}}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=qb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function M(a){return $.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var N,O,P=a.document,Q=a.location,R=a.navigator,S=a.jQuery,T=a.$,U=Array.prototype.push,V=Array.prototype.slice,W=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Z=String.prototype.trim,$=function(a,b){return new $.fn.init(a,b,N)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,ba=/\s+/,ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,da=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ea=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fa=/^[\],:{}\s]*$/,ga=/(?:^|:|,)(?:\s*\[)+/g,ha=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ia=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ja=/^-ms-/,ka=/-([\da-z])/gi,la=function(a,b){return(b+"").toUpperCase()},ma=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",ma,!1),$.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",ma),$.ready())},na={};$.fn=$.prototype={constructor:$,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:da.exec(a),e&&(e[1]||!c)){if(e[1])return c=c instanceof $?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:P,a=$.parseHTML(e[1],g,!0),ea.test(e[1])&&$.isPlainObject(c)&&this.attr.call(a,c,!0),$.merge(this,a);if(f=P.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=P,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return $.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))},selector:"",jquery:"1.8.3+1",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=$.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return $.each(this,a,b)},ready:function(a){return $.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},$.fn.init.prototype=$.fn,$.extend=$.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"!=typeof h&&!$.isFunction(h)&&(h={}),j===i&&(h=this,--i);i<j;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&($.isPlainObject(e)||(f=$.isArray(e)))?(f?(f=!1,g=d&&$.isArray(d)?d:[]):g=d&&$.isPlainObject(d)?d:{},h[c]=$.extend(k,g,e)):e!==b&&(h[c]=e));return h},$.extend({noConflict:function(b){return a.$===$&&(a.$=T),b&&a.jQuery===$&&(a.jQuery=S),$},isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(a===!0?!--$.readyWait:!$.isReady){if(!P.body)return setTimeout($.ready,1);$.isReady=!0,a!==!0&&--$.readyWait>0||(O.resolveWith(P,[$]),$.fn.trigger&&$(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):na[X.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}var c;for(c in a);return c===b||Y.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||P,(d=ea.exec(a))?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c?null:[]),$.merge([],(d.cacheable?$.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=$.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):fa.test(b.replace(ha,"@").replace(ia,"]").replace(ga,""))?new Function("return "+b)():void $.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(a){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&$.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&aa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ja,"ms-").replace(ka,la)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||$.isFunction(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;f<g&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;f<g&&c.call(a[f],f,a[f++])!==!1;);return a},trim:Z&&!Z.call("\ufeff ")?function(a){return null==a?"":Z.call(a)}:function(a){return null==a?"":(a+"").replace(ca,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=$.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||$.isWindow(a)?U.call(d,a):$.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(W)return W.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof $||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||$.isArray(a));if(j)for(;h<i;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),$.isFunction(a)?(e=V.call(arguments,2),f=function(){return a.apply(c,e.concat(V.call(arguments)))},f.guid=a.guid=a.guid||$.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)$.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&$.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call($(a),c)}):(c.call(a,e),c=null)),c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),$.ready.promise=function(b){if(!O)if(O=$.Deferred(),"complete"===P.readyState)setTimeout($.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",ma,!1),a.addEventListener("load",$.ready,!1);else{P.attachEvent("onreadystatechange",ma),a.attachEvent("onload",$.ready);var c=!1;try{c=null==a.frameElement&&P.documentElement}catch(a){}c&&c.doScroll&&function a(){if(!$.isReady){try{c.doScroll("left")}catch(b){return setTimeout(a,50)}$.ready()}}()}return O.promise(b)},$.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){na["[object "+b+"]"]=b.toLowerCase()}),N=$(P);var oa={};$.Callbacks=function(a){a="string"==typeof a?oa[a]||c(a):$.extend({},a);var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&i<h;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function b(c){$.each(c,function(c,d){var e=$.type(d);"function"===e?(!a.unique||!m.has(d))&&j.push(d):d&&d.length&&"string"!==e&&b(d)})}(arguments),f?h=j.length:d&&(g=b,l(d))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;(c=$.inArray(b,j,c))>-1;)j.splice(c,1),f&&(c<=h&&h--,c<=i&&i--)}),this},has:function(a){return $.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],j&&(!e||k)&&(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]]($.isFunction(g)?function(){var a=g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return null!=a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=V.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?V.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),$.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=P.createElement("div");if(m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],!c||!d||!c.length)return{};e=P.createElement("select"),f=e.appendChild(P.createElement("option")),g=m.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(a){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=P.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=P.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k="function"==typeof m[i]),b[j+"Bubbles"]=k;return $(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=P.getElementsByTagName("body")[0];h&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,f=P.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),h.removeChild(c),c=d=e=f=null)}),h.removeChild(m),c=d=e=f=g=h=m=null,b}();var pa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,qa=/([A-Z])/g;$.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?$.cache[a[$.expando]]:a[$.expando],!!a&&!e(a)},data:function(a,c,d,e){if($.acceptData(a)){var f,g,h=$.expando,i="string"==typeof c,j=a.nodeType,k=j?$.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=$.deletedIds.pop()||$.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=$.noop)),"object"!=typeof c&&"function"!=typeof c||(e?k[l]=$.extend(k[l],c):k[l].data=$.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[$.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[$.camelCase(c)])):g=f,g}},removeData:function(a,b,c){if($.acceptData(a)){var d,f,g,h=a.nodeType,i=h?$.cache:a,j=h?a[$.expando]:$.expando;if(i[j]){if(b&&(d=c?i[j]:i[j].data)){$.isArray(b)||(b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;f<g;f++)delete d[b[f]];if(!(c?e:$.isEmptyObject)(d))return}(c||(delete i[j].data,e(i[j])))&&(h?$.cleanData([a],!0):$.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}},_data:function(a,b,c){return $.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&$.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),$.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=$.data(j),1===j.nodeType&&!$._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")||(h=$.camelCase(h.substring(5)),d(j,h,l[h]));$._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){$.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",$.access(this,function(c){return c===b?(l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=$.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l):(e[1]=c,void this.each(function(){var b=$(this);b.triggerHandler("setData"+f,e),$.data(this,a,c),b.triggerHandler("changeData"+f,e)}))},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.length,e=c.shift(),f=$._queueHooks(a,b),g=function(){$.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$.removeData(a,b+"queue",!0),$.removeData(a,c,!0)})})}}),$.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?$.queue(this[0],a):c===b?this:this.each(function(){var b=$.queue(this,a,c);$._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},delay:function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=$.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=$._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var ra,sa,ta,ua=/[\t\r\n]/g,va=/\r/g,wa=/^(?:button|input)$/i,xa=/^(?:button|input|object|select|textarea)$/i,ya=/^a(?:rea|)$/i,za=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Aa=$.support.getSetAttribute;$.fn.extend({attr:function(a,b){return $.access(this,$.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})},prop:function(a,b){return $.access(this,$.prop,a,b,arguments.length>1)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(a){}})},addClass:function(a){var b,c,d,e,f,g,h;if($.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(ba),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;g<h;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=$.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if($.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(ba),h=0,i=this.length;h<i;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(ua," "),f=0,g=c.length;f<g;f++)for(;d.indexOf(" "+c[f]+" ")>=0;)d=d.replace(" "+c[f]+" "," ");e.className=a?$.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return $.isFunction(a)?this.each(function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=$(this),h=b,i=a.split(ba);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else"undefined"!==c&&"boolean"!==c||(this.className&&$._data(this,"__className__",this.className),this.className=this.className||a===!1?"":$._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ua," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];return arguments.length?(e=$.isFunction(a),this.each(function(d){var f,g=$(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":$.isArray(f)&&(f=$.map(f,function(a){return null==a?"":a+""})),c=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))})):f?(c=$.valHooks[f.type]||$.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(va,""):null==d?"":d)):void 0}}),$.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&($.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!$.nodeName(c.parentNode,"optgroup"))){if(b=$(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=$.makeArray(b);return $(a).find("option").each(function(){this.selected=$.inArray($(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&$.isFunction($.fn[c])?$(a)[c](d):"undefined"==typeof a.getAttribute?$.prop(a,c,d):(h=1!==i||!$.isXMLDoc(a),h&&(c=c.toLowerCase(),g=$.attrHooks[c]||(za.test(c)?sa:ra)),d!==b?null===d?void $.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(ba);g<d.length;g++)e=d[g],e&&(c=$.propFix[e]||e,f=za.test(e),f||$.attr(a,e,""),a.removeAttribute(Aa?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(wa.test(a.nodeName)&&a.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return ra&&$.nodeName(a,"button")?ra.get(a,b):b in a?a.value:null},set:function(a,b,c){return ra&&$.nodeName(a,"button")?ra.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!$.isXMLDoc(a),g&&(c=$.propFix[c]||c,f=$.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):xa.test(a.nodeName)||ya.test(a.nodeName)&&a.href?0:b}}}}),sa={get:function(a,c){var d,e=$.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?$.removeAttr(a,c):(d=$.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Aa||(ta={name:!0,id:!0,coords:!0},ra=$.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(ta[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){
var d=a.getAttributeNode(c);return d||(d=P.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},$.each(["width","height"],function(a,b){$.attrHooks[b]=$.extend($.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),$.attrHooks.contenteditable={get:ra.get,set:function(a,b,c){""===b&&(b="false"),ra.set(a,b,c)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(a,c){$.attrHooks[c]=$.extend($.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),$.support.style||($.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(a,b){if($.isArray(b))return a.checked=$.inArray($(a).val(),b)>=0}})});var Ba=/^(?:textarea|input|select)$/i,Ca=/^([^\.]*|)(?:\.(.+)|)$/,Da=/(?:^|\s)hover(\.\S+|)\b/,Ea=/^key/,Fa=/^(?:mouse|contextmenu)|click/,Ga=/^(?:focusinfocus|focusoutblur)$/,Ha=function(a){return $.event.special.hover?a:a.replace(Da,"mouseenter$1 mouseleave$1")};$.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=$._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=$.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof $||a&&$.event.triggered===a.type?b:$.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=$.trim(Ha(c)).split(" "),j=0;j<c.length;j++)k=Ca.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=$.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=$.event.special[l]||{},n=$.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&$.expr.match.needsContext.test(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),$.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(m=q.events)){for(b=$.trim(Ha(b||"")).split(" "),f=0;f<b.length;f++)if(g=Ca.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=$.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)p=o[l],(e||i===p.origType)&&(!c||c.guid===p.guid)&&(!j||j.test(p.namespace))&&(!d||d===p.selector||"**"===d&&p.selector)&&(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));0===o.length&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,q.handle)===!1)&&$.removeEvent(a,h,q.handle),delete m[h])}else for(h in m)$.event.remove(a,h+b[f],c,d,!0);$.isEmptyObject(m)&&(delete q.handle,$.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(Ga.test(q+$.event.triggered))return;if(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),(!e||$.event.customEvent[q])&&!$.event.global[q])return;if(c="object"==typeof c?c[$.expando]?c:new $.Event(q,c):new $.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",!e){g=$.cache;for(i in g)g[i].events&&g[i].events[q]&&$.event.trigger(c,d,g[i].handle.elem,!0);return}if(c.result=b,c.target||(c.target=e),d=null!=d?$.makeArray(d):[],d.unshift(c),m=$.event.special[q]||{},m.trigger&&m.trigger.apply(e,d)===!1)return;if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!$.isWindow(e)){for(p=m.delegateType||q,j=Ga.test(p+q)?e:e.parentNode,k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||P)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=($._data(j,"events")||{})[c.type]&&$._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&$.acceptData(j)&&n.apply&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,!f&&!c.isDefaultPrevented()&&(!m._default||m._default.apply(e.ownerDocument,d)===!1)&&("click"!==q||!$.nodeName(e,"a"))&&$.acceptData(e)&&l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!$.isWindow(e)&&(k=e[l],k&&(e[l]=null),$.event.triggered=q,e[q](),$.event.triggered=b,k&&(e[l]=k)),c.result}},dispatch:function(c){c=$.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m=($._data(this,"events")||{})[c.type]||[],n=m.delegateCount,o=V.call(arguments),p=!c.exclusive&&!c.namespace,q=$.event.special[c.type]||{},r=[];if(o[0]=c,c.delegateTarget=this,!q.preDispatch||q.preDispatch.call(this,c)!==!1){if(n&&(!c.button||"click"!==c.type))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==c.type){for(h={},j=[],d=0;d<n;d++)k=m[d],l=k.selector,h[l]===b&&(h[l]=k.needsContext?$(l,this).index(f)>=0:$.find(l,this,null,[f]).length),h[l]&&j.push(k);j.length&&r.push({elem:f,matches:j})}for(m.length>n&&r.push({elem:this,matches:m.slice(n)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(i=r[d],c.currentTarget=i.elem,e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++)k=i.matches[e],(p||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))&&(c.data=k.data,c.handleObj=k,g=(($.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,o),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation())));return q.postDispatch&&q.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),!a.which&&g!==b&&(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[$.expando])return a;var b,c,d=a,e=$.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;for(a=$.Event(d),b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||P),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){$.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?$.event.trigger(e,null,b):$.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=P.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},$.Event=function(a,b){return this instanceof $.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(a,b)},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return f.selector,e&&(e===d||$.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){return!$.nodeName(this,"form")&&void $.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=$.nodeName(c,"input")||$.nodeName(c,"button")?c.form:b;d&&!$._data(d,"_submit_attached")&&($.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),$._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return!$.nodeName(this,"form")&&void $.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){return Ba.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1):void $.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ba.test(b.nodeName)&&!$._data(b,"_change_attached")&&($.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&$.event.simulate("change",this.parentNode,a,!0)}),$._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return $.event.remove(this,"._change"),!Ba.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){0===c++&&P.addEventListener(a,d,!0)},teardown:function(){0===--c&&P.removeEventListener(a,d,!0)}}}),$.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=f;else if(!e)return this;return 1===g&&(h=e,e=function(a){return $().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=$.guid++)),this.each(function(){$.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,g;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,$(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}return c!==!1&&"function"!=typeof c||(d=c,c=b),d===!1&&(d=f),this.each(function(){$.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return $(this.context).on(a,this.selector,b,c),this},die:function(a,b){return $(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return $.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||$.guid++,d=0,e=function(c){var e=($._data(this,"lastToggle"+a.guid)||0)%d;return $._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Ea.test(b)&&($.event.fixHooks[b]=$.event.keyHooks),Fa.test(b)&&($.event.fixHooks[b]=$.event.mouseHooks)}),function(a,b){function c(a,b,c,d){c=c||[],b=b||F;var e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];if(g=v(b),!g&&!d&&(e=ca.exec(a)))if(h=e[1]){if(9===i){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&w(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return K.apply(c,L.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&ma&&b.getElementsByClassName)return K.apply(c,L.call(b.getElementsByClassName(h),0)),c}return p(a.replace(Z,"$1"),b,c,d,g)}function d(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return N(function(b){return b=+b,N(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}function h(a,b){var d,e,f,g,h,i,j,k=Q[D][a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=t.preFilter;h;){d&&!(e=_.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=aa.exec(h))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=e[0].replace(Z," "));for(g in t.filter)(e=ha[g].exec(h))&&(!j[g]||(e=j[g](e)))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?h.length:h?c.error(a):Q(a,i).slice(0)}function i(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g){for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,i=H+" "+f+" ",j=i+r;b=b[d];)if(e||1===b.nodeType){if((h=b[D])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[D]=j,a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}}function j(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function k(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function l(a,b,c,d,e,f){return d&&!d[D]&&(d=l(d)),e&&!e[D]&&(e=l(e,f)),N(function(f,g,h,i){var j,l,m,n=[],p=[],q=g.length,r=f||o(b||"*",h.nodeType?[h]:h,[]),s=!a||!f&&b?r:k(r,n,a,h,i),t=c?e||(f?a:q||d)?[]:g:s;if(c&&c(s,t,h,i),d)for(j=k(t,p),d(j,[],h,i),l=j.length;l--;)(m=j[l])&&(t[p[l]]=!(s[p[l]]=m));if(f){if(e||a){if(e){for(j=[],l=t.length;l--;)(m=t[l])&&j.push(s[l]=m);e(null,t=[],j,i)}for(l=t.length;l--;)(m=t[l])&&(j=e?M.call(f,m):n[l])>-1&&(f[j]=!(g[j]=m))}}else t=k(t===g?t.splice(q,t.length):t),e?e(null,g,t,i):K.apply(g,t)})}function m(a){for(var b,c,d,e=a.length,f=t.relative[a[0].type],g=f||t.relative[" "],h=f?1:0,k=i(function(a){return a===b},g,!0),n=i(function(a){return M.call(b,a)>-1},g,!0),o=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?k(a,c,d):n(a,c,d))}];h<e;h++)if(c=t.relative[a[h].type])o=[i(j(o),c)];else{if(c=t.filter[a[h].type].apply(null,a[h].matches),c[D]){for(d=++h;d<e&&!t.relative[a[d].type];d++);return l(h>1&&j(o),h>1&&a.slice(0,h-1).join("").replace(Z,"$1"),c,h<d&&m(a.slice(h,d)),d<e&&m(a=a.slice(d)),d<e&&a.join(""))}o.push(c)}return j(o)}function n(a,b){var d=b.length>0,e=a.length>0,f=function(g,h,i,j,l){var m,n,o,p=[],q=0,s="0",u=g&&[],v=null!=l,w=A,x=g||e&&t.find.TAG("*",l&&h.parentNode||h),y=H+=null==w?1:Math.E;for(v&&(A=h!==F&&h,r=f.el);null!=(m=x[s]);s++){if(e&&m){for(n=0;o=a[n];n++)if(o(m,h,i)){j.push(m);break}v&&(H=y,r=++f.el)}d&&((m=!o&&m)&&q--,g&&u.push(m))}if(q+=s,d&&s!==q){for(n=0;o=b[n];n++)o(u,p,h,i);if(g){if(q>0)for(;s--;)!u[s]&&!p[s]&&(p[s]=J.call(j));p=k(p)}K.apply(j,p),v&&!g&&p.length>0&&q+b.length>1&&c.uniqueSort(j)}return v&&(H=y,A=w),u};return f.el=0,d?N(f):f}function o(a,b,d){for(var e=0,f=b.length;e<f;e++)c(a,b[e],d);return d}function p(a,b,c,d,e){var f,g,i,j,k,l=h(a);if(l.length,!d&&1===l.length){if(g=l[0]=l[0].slice(0),g.length>2&&"ID"===(i=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){if(b=t.find.ID(i.matches[0].replace(ga,""),b,e)[0],!b)return c;a=a.slice(g.shift().length)}for(f=ha.POS.test(a)?-1:g.length-1;f>=0&&(i=g[f],!t.relative[j=i.type]);f--)if((k=t.find[j])&&(d=k(i.matches[0].replace(ga,""),da.test(g[0].type)&&b.parentNode||b,e))){if(g.splice(f,1),a=d.length&&g.join(""),!a)return K.apply(c,L.call(d,0)),c;break}}return x(a,l)(d,b,e,c,da.test(a)),c}function q(){}var r,s,t,u,v,w,x,y,z,A,B=!0,C="undefined",D=("sizcache"+Math.random()).replace(".",""),E=String,F=a.document,G=F.documentElement,H=0,I=0,J=[].pop,K=[].push,L=[].slice,M=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},N=function(a,b){return a[D]=null==b||b,a},O=function(){var a={},b=[];return N(function(c,d){return b.push(c)>t.cacheLength&&delete a[b.shift()],a[c+" "]=d},a)},P=O(),Q=O(),R=O(),S="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=T.replace("w","w#"),V="([*^$|!~]?=)",W="\\["+S+"*("+T+")"+S+"*(?:"+V+S+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+S+"*\\]",X=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g"),_=new RegExp("^"+S+"*,"+S+"*"),aa=new RegExp("^"+S+"*([\\x20\\t\\r\\n\\f>+~])"+S+"*"),ba=new RegExp(X),ca=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,da=/[\x20\t\r\n\f]*[+~]/,ea=/h\d/i,fa=/input|select|textarea|button/i,ga=/\\(?!\\)/g,ha={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+X),POS:new RegExp(Y,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),needsContext:new RegExp("^"+S+"*[>+~]|"+Y,"i")},ia=function(a){var b=F.createElement("div");try{return a(b)}catch(a){return!1}finally{b=null}},ja=ia(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),ka=ia(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==C&&"#"===a.firstChild.getAttribute("href")}),la=ia(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),ma=ia(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!a.getElementsByClassName||!a.getElementsByClassName("e").length)&&(a.lastChild.className="e",2===a.getElementsByClassName("e").length)}),na=ia(function(a){a.id=D+0,a.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",G.insertBefore(a,G.firstChild);var b=F.getElementsByName&&F.getElementsByName(D).length===2+F.getElementsByName(D+0).length;return s=!F.getElementById(D),G.removeChild(a),b});try{L.call(G.childNodes,0)[0].nodeType}catch(a){L=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0},u=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=u(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=u(b);return c},v=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},w=c.contains=G.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:G.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},c.attr=function(a,b){var c,d=v(a);return d||(b=b.toLowerCase()),(c=t.attrHandle[b])?c(a):d||la?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},t=c.selectors={cacheLength:50,createPseudo:N,match:ha,attrHandle:ka?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,b,c){if(typeof b.getElementById!==C&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==C&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==C&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:ja?function(a,b){if(typeof b.getElementsByTagName!==C)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:na&&function(a,b){if(typeof b.getElementsByName!==C)return b.getElementsByName(name)},CLASS:ma&&function(a,b,c){if(typeof b.getElementsByClassName!==C&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ga,""),a[3]=(a[4]||a[5]||"").replace(ga,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;return ha.CHILD.test(a[0])?null:(a[3]?a[2]=a[3]:(b=a[4])&&(ba.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b),a.slice(0,3))}},filter:{ID:s?function(a){return a=a.replace(ga,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(ga,""),function(b){var c=typeof b.getAttributeNode!==C&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ga,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=P[D][a+" "];return b||(b=new RegExp("(^|"+S+")"+a+"("+S+"|$)"))&&P(a,function(a){return b.test(a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e,f){var g=c.attr(e,a);return null==g?"!="===b:!b||(g+="","="===b?g===d:"!="===b?g!==d:"^="===b?d&&0===g.indexOf(d):"*="===b?d&&g.indexOf(d)>-1:"$="===b?d&&g.substr(g.length-d.length)===d:"~="===b?(" "+g+" ").indexOf(d)>-1:"|="===b&&(g===d||g.substr(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e,f=a.parentNode;if(1===c&&0===d)return!0;if(f)for(e=0,b=f.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[D]?e(b):e.length>1?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?N(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=M.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:N(function(a){var b=[],c=[],d=x(a.replace(Z,"$1"));return d[D]?N(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:N(function(a){return function(b){return c(a,b).length>0}}),contains:N(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return ea.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return fa.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(){return[0]}),last:f(function(a,b){return[b-1]}),eq:f(function(a,b,c){return[c<0?c+b:c]}),even:f(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:f(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},y=G.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return g(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return g(e[k],f[k]);return k===c?g(a,f[k],-1):g(e[k],b,1)},[0,0].sort(y),B=!z,c.uniqueSort=function(a){var b,c=[],d=1,e=0;if(z=B,a.sort(y),z){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},x=c.compile=function(a,b){var c,d=[],e=[],f=R[D][a+" "];if(!f){for(b||(b=h(a)),c=b.length;c--;)f=m(b[c]),f[D]?d.push(f):e.push(f);f=R(a,n(e,d))}return f},F.querySelectorAll&&function(){var a,b=p,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active"],i=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;ia(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||f.push("\\["+S+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||f.push(":checked")}),ia(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&f.push("[*^$]="+S+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")}),f=new RegExp(f.join("|")),p=function(a,c,e,g,i){if(!g&&!i&&!f.test(a)){var j,k,l=!0,m=D,n=c,o=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){for(j=h(a),(l=c.getAttribute("id"))?m=l.replace(d,"\\$&"):c.setAttribute("id",m),m="[id='"+m+"'] ",k=j.length;k--;)j[k]=m+j[k].join("");n=da.test(a)&&c.parentNode||c,o=j.join(",")}if(o)try{return K.apply(e,L.call(n.querySelectorAll(o),0)),e}catch(a){}finally{l||c.removeAttribute("id")}}return b(a,c,e,g,i)},i&&(ia(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),g.push("!=",X)}catch(a){}}),g=new RegExp(g.join("|")),c.matchesSelector=function(b,d){if(d=d.replace(e,"='$1']"),!v(b)&&!g.test(d)&&!f.test(d))try{var h=i.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(a){}return c(d,null,null,[b]).length>0})}(),t.pseudos.nth=t.pseudos.eq,t.filters=q.prototype=t.pseudos,t.setFilters=new q,c.attr=$.attr,$.find=c,$.expr=c.selectors,$.expr[":"]=$.expr.pseudos,$.unique=c.uniqueSort,$.text=c.getText,$.isXMLDoc=c.isXML,$.contains=c.contains}(a);var Ia=/Until$/,Ja=/^(?:parents|prev(?:Until|All))/,Ka=/^.[^:#\[\.,]*$/,La=$.expr.match.needsContext,Ma={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return $(a).filter(function(){for(b=0,c=h.length;b<c;b++)if($.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;b<c;b++)if(d=g.length,$.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if($.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?La.test(a)?$(a,this.context).index(this[0])>=0:$.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=La.test(a)||"string"!=typeof a?$(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:$.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?$.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?$(a,b):$.makeArray(a&&a.nodeType?[a]:a),d=$.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:$.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.fn.andSelf=$.fn.addBack,$.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return Ia.test(a)||(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),e=this.length>1&&!Ma[a]?$.unique(e):e,this.length>1&&Ja.test(a)&&(e=e.reverse()),this.pushStack(e,a,V.call(arguments).join(","))}}),$.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?$.find.matchesSelector(b[0],a)?[b[0]]:[]:$.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!$(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){
for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Na="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Oa=/ jQuery\d+="(?:null|\d+)"/g,Pa=/^\s+/,Qa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ra=/<([\w:]+)/,Sa=/<tbody/i,Ta=/<|&#?\w+;/,Ua=/<(?:script|style|link)/i,Va=/<(?:script|object|embed|option|style)/i,Wa=new RegExp("<(?:"+Na+")[\\s/>]","i"),Xa=/^(?:checkbox|radio)$/,Ya=/checked\s*(?:[^=]|=\s*.checked.)/i,Za=/\/(java|ecma)script/i,$a=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,_a={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ab=k(P),bb=ab.appendChild(P.createElement("div"));_a.optgroup=_a.option,_a.tbody=_a.tfoot=_a.colgroup=_a.caption=_a.thead,_a.th=_a.td,$.support.htmlSerialize||(_a._default=[1,"X<div>","</div>"]),$.fn.extend({text:function(a){return $.access(this,function(a){return a===b?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return $.isFunction(a)?this.each(function(b){$(this).wrapInner(a.call(this,b))}):this.each(function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)a&&!$.filter(a,[c]).length||(!b&&1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),$.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&$.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return $.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Oa,""):b;if("string"==typeof a&&!Ua.test(a)&&($.support.htmlSerialize||!Wa.test(a))&&($.support.leadingWhitespace||!Pa.test(a))&&!_a[(Ra.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Qa,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(a){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack($($.isFunction(a)?a():a),"replaceWith",a):this:$.isFunction(a)?this.each(function(b){var c=$(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=$(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;$(this).remove(),b?$(b).before(a):$(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],m=this.length;if(!$.support.checkClone&&m>1&&"string"==typeof j&&Ya.test(j))return this.each(function(){$(this).domManip(a,c,d)});if($.isFunction(j))return this.each(function(e){var f=$(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=$.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&$.nodeName(f,"tr"),h=e.cacheable||m-1;i<m;i++)d.call(c&&$.nodeName(this[i],"table")?l(this[i],"tbody"):this[i],i===h?g:$.clone(g,!0,!0));g=f=null,k.length&&$.each(k,function(a,b){b.src?$.ajax?$.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):$.error("no ajax"):$.globalEval((b.text||b.textContent||b.innerHTML||"").replace($a,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),$.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||P,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,1===a.length&&"string"==typeof h&&h.length<512&&c===P&&"<"===h.charAt(0)&&!Va.test(h)&&($.support.checkClone||!Ya.test(h))&&($.support.html5Clone||!Wa.test(h))&&(f=!0,e=$.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),$.clean(a,c,e,d),f&&($.fragments[h]=g&&e)),{fragment:e,cacheable:f}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(c){var d,e=0,f=[],g=$(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),$(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),$.extend({clone:function(a,b,c){var d,e,f,g;if($.support.html5Clone||$.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bb.innerHTML=a.outerHTML,bb.removeChild(g=bb.firstChild)),!($.support.noCloneEvent&&$.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,l,m,n,o,q,r=b===P&&ab,s=[];for(b&&"undefined"!=typeof b.createDocumentFragment||(b=P),e=0;null!=(g=a[e]);e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Ta.test(g)){for(r=r||k(b),l=b.createElement("div"),r.appendChild(l),g=g.replace(Qa,"<$1></$2>"),h=(Ra.exec(g)||["",""])[1].toLowerCase(),i=_a[h]||_a._default,j=i[0],l.innerHTML=i[1]+g+i[2];j--;)l=l.lastChild;if(!$.support.tbody)for(m=Sa.test(g),n="table"!==h||m?"<table>"!==i[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=n.length-1;f>=0;--f)$.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);!$.support.leadingWhitespace&&Pa.test(g)&&l.insertBefore(b.createTextNode(Pa.exec(g)[0]),l.firstChild),g=l.childNodes,l.parentNode.removeChild(l)}else g=b.createTextNode(g);g.nodeType?s.push(g):$.merge(s,g)}if(l&&(g=l=r=null),!$.support.appendChecked)for(e=0;null!=(g=s[e]);e++)$.nodeName(g,"input")?p(g):"undefined"!=typeof g.getElementsByTagName&&$.grep(g.getElementsByTagName("input"),p);if(c)for(o=function(a){if(!a.type||Za.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)},e=0;null!=(g=s[e]);e++)$.nodeName(g,"script")&&o(g)||(c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(q=$.grep($.merge([],g.getElementsByTagName("script")),o),s.splice.apply(s,[e+1,0].concat(q)),e+=q.length));return s},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=$.support.deleteExpando,k=$.event.special;null!=(e=a[g]);g++)if((b||$.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?$.event.remove(e,f):$.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,$.deletedIds.push(d))}}}),function(){var a,b;$.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=$.uaMatch(R.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),$.browser=b,$.sub=function(){function a(b,c){return new a.fn.init(b,c)}$.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof $&&!(d instanceof a)&&(d=a(d)),$.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(P);return a}}();var cb,db,eb,fb=/alpha\([^)]*\)/i,gb=/opacity=([^)]*)/,hb=/^(top|right|bottom|left)$/,ib=/^(none|table(?!-c[ea]).+)/,jb=/^margin/,kb=new RegExp("^("+_+")(.*)$","i"),lb=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),mb=new RegExp("^([-+])=("+_+")","i"),nb={BODY:"block"},ob={position:"absolute",visibility:"hidden",display:"block"},pb={letterSpacing:0,fontWeight:400},qb=["Top","Right","Bottom","Left"],rb=["Webkit","O","Moz","ms"],sb=$.fn.toggle;$.fn.extend({css:function(a,c){return $.access(this,function(a,c,d){return d!==b?$.style(a,c,d):$.css(a,c)},a,c,arguments.length>1)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,b){var c="boolean"==typeof a;return $.isFunction(a)&&$.isFunction(b)?sb.apply(this,arguments):this.each(function(){(c?a:r(this))?$(this).show():$(this).hide()})}}),$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=cb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:$.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=$.camelCase(c),j=a.style;if(c=$.cssProps[i]||($.cssProps[i]=q(j,i)),h=$.cssHooks[c]||$.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=mb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat($.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"===g&&!$.cssNumber[i]&&(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(a){}}},css:function(a,c,d,e){var f,g,h,i=$.camelCase(c);return c=$.cssProps[i]||($.cssProps[i]=q(a.style,i)),h=$.cssHooks[c]||$.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=cb(a,c)),"normal"===f&&c in pb&&(f=pb[c]),d||e!==b?(g=parseFloat(f),d||$.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?cb=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h.getPropertyValue(c)||h[c],""===d&&!$.contains(b.ownerDocument,b)&&(d=$.style(b,c)),lb.test(d)&&jb.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:P.documentElement.currentStyle&&(cb=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),lb.test(e)&&!hb.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&ib.test(cb(a,"display"))?$.swap(a,ob,function(){return v(a,b,d)}):v(a,b,d)},set:function(a,c,d){return t(a,c,d?u(a,b,d,$.support.boxSizing&&"border-box"===$.css(a,"boxSizing")):0)}}}),$.support.opacity||($.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===$.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(a,b){return $.swap(a,{display:"inline-block"},function(){if(b)return cb(a,"marginRight")})}}),!$.support.pixelPosition&&$.fn.position&&$.each(["top","left"],function(a,b){$.cssHooks[b]={get:function(a,c){if(c){var d=cb(a,b);return lb.test(d)?$(a).position()[b]+"px":d}}}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!$.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||cb(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+qb[d]+b]=e[d]||e[d-2]||e[0];return f}},jb.test(a)||($.cssHooks[a+b].set=t)});var tb=/%20/g,ub=/\[\]$/,vb=/\r?\n/g,wb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xb=/^(?:select|textarea)/i;$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||xb.test(this.nodeName)||wb.test(this.type))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a,c){return{name:b.name,value:a.replace(vb,"\r\n")}}):{name:b.name,value:c.replace(vb,"\r\n")}}).get()}}),$.param=function(a,c){var d,e=[],f=function(a,b){b=$.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){f(this.name,this.value)});else for(d in a)x(d,a[d],c,f);return e.join("&").replace(tb,"+")};var yb,zb,Ab=/#.*$/,Bb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb=/\?/,Gb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hb=/([?&])_=[^&]*/,Ib=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Jb=$.fn.load,Kb={},Lb={},Mb=["*/"]+["*"];try{zb=Q.href}catch(a){zb=P.createElement("a"),zb.href="",zb=zb.href}yb=Ib.exec(zb.toLowerCase())||[],$.fn.load=function(a,c,d){if("string"!=typeof a&&Jb)return Jb.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),$.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),$.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?$("<div>").append(a.replace(Gb,"")).find(e):a)}),this},$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$.each(["get","post"],function(a,c){$[c]=function(a,d,e,f){return $.isFunction(d)&&(f=f||e,e=d,d=b),$.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),$.extend({getScript:function(a,c){return $.get(a,b,c,"script")},getJSON:function(a,b,c){return $.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?A(a,$.ajaxSettings):(b=a,a=$.ajaxSettings),A(a,b),a},ajaxSettings:{url:zb,isLocal:Cb.test(yb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Mb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Kb),ajaxTransport:y(Lb),ajax:function(a,c){function d(a,c,d,g){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0,d&&(t=B(m,w,d)),a>=200&&a<300||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&($.lastModified[e]=v),v=w.getResponseHeader("Etag"),v&&($.etag[e]=v)),304===a?(x="notmodified",j=!0):(j=C(m,t),x=j.state,l=j.data,s=j.error,j=!s)):(s=x,x&&!a||(x="error",a<0&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=$.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof $)?$(n):$.event,p=$.Deferred(),q=$.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Bb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||v,h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(u<2)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.always(b)}return this},m.url=((a||m.url)+"").replace(Ab,"").replace(Eb,yb[1]+"//"),m.dataTypes=$.trim(m.dataType||"*").toLowerCase().split(ba),null==m.crossDomain&&(j=Ib.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]===yb[1]&&j[2]===yb[2]&&(j[3]||("http:"===j[1]?80:443))==(yb[3]||("http:"===yb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=$.param(m.data,m.traditional)),z(Kb,m,c,w),2===u)return w;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Db.test(m.type),k&&0===$.active++&&$.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Fb.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=$.now(),y=m.url.replace(Hb,"$1_="+x);m.url=y+(y===m.url?(Fb.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,$.lastModified[e]&&w.setRequestHeader("If-Modified-Since",$.lastModified[e]),$.etag[e]&&w.setRequestHeader("If-None-Match",$.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Mb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(!m.beforeSend||m.beforeSend.call(n,w,m)!==!1&&2!==u){v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=z(Lb,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(a){if(!(u<2))throw a;d(-1,a)}}else d(-1,"No Transport");return w}return w.abort()},active:0,lastModified:{},etag:{}});var Nb=[],Ob=/\?/,Pb=/(=)\?(?=&|$)|\?\?/,Qb=$.now();$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Nb.pop()||$.expando+"_"+Qb++;return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&Pb.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pb.test(i);if("jsonp"===c.dataTypes[0]||l||m)return f=c.jsonpCallback=$.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Pb,"$1"+f):m?c.data=i.replace(Pb,"$1"+f):k&&(c.url+=(Ob.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||$.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Nb.push(f)),h&&$.isFunction(g)&&g(h[0]),h=g=b}),"script"}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Rb,Sb=!!a.ActiveXObject&&function(){for(var a in Rb)Rb[a](0,1)},Tb=0;$.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&D()||E()}:D,function(a){$.extend($.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(c){if(!c.crossDomain||$.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(a){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=$.noop,Sb&&delete Rb[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(a){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(a){e||f(-1,a)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++Tb,Sb&&(Rb||(Rb={},$(a).unload(Sb)),Rb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Ub,Vb,Wb=/^(?:toggle|show|hide)$/,Xb=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Yb=/queueHooks$/,Zb=[J],$b={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Xb.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||($.cssNumber[a]?"":"px"),"px"!==d&&h){h=$.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,$.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};$.Animation=$.extend(H,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],$b[c]=$b[c]||[],$b[c].unshift(b)},prefilter:function(a,b){b?Zb.unshift(a):Zb.push(a)}}),$.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=$.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&$.isFunction(d)&&$.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}}),$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(r).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d),g=function(){var b=H(this,$.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Yb.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(null==a||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&$.dequeue(this,a)})}}),$.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.timers=[],$.fx=K.prototype.init,$.fx.tick=function(){var a,c=$.timers,d=0;for(Ub=$.now();d<c.length;d++)a=c[d],!a()&&c[d]===a&&c.splice(d--,1);c.length||$.fx.stop(),Ub=b},$.fx.timer=function(a){a()&&$.timers.push(a)&&!Vb&&(Vb=setInterval($.fx.tick,$.fx.interval))},$.fx.interval=13,$.fx.stop=function(){clearInterval(Vb),Vb=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fx.step={},$.expr&&$.expr.filters&&($.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length});var _b=/^(?:body|html)$/i;$.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){$.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;return l?(d=l.body)===k?$.offset.bodyOffset(k):(c=l.documentElement,$.contains(c,k)?("undefined"!=typeof k.getBoundingClientRect&&(j=k.getBoundingClientRect()),e=M(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j):void 0},$.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat($.css(a,"marginTop"))||0,c+=parseFloat($.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=$.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=$(a),h=g.offset(),i=$.css(a,"top"),j=$.css(a,"left"),k=("absolute"===d||"fixed"===d)&&$.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),$.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},$.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=_b.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat($.css(a,"marginTop"))||0,c.left-=parseFloat($.css(a,"marginLeft"))||0,d.top+=parseFloat($.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat($.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!_b.test(a.nodeName)&&"static"===$.css(a,"position");)a=a.offsetParent;return a||P.body})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);$.fn[a]=function(e){return $.access(this,function(a,e,f){var g=M(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?$(g).scrollLeft():f,d?f:$(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(a,c){$.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){$.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return $.access(this,function(c,d,e){var f;return $.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?$.css(c,d,e,h):$.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,e,f,g){if(Object.defineProperty)try{return Object.defineProperty(b,e,{configurable:!0,enumerable:!0,get:function(){return d(g),f},set:function(a){d(g),f=a}}),c}catch(a){}a._definePropertyBroken=!0,b[e]=f}var f={};a.migrateWarnings=[],!a.migrateMute&&b.console&&b.console.log&&b.console.log("JQMIGRATE: Logging is active"),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(4>h.length&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') may use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var e=(a.nodeName||"").toLowerCase();return"button"===e?j.apply(this,arguments):("input"!==e&&"option"!==e&&d("jQuery.fn.attr('value', val) no longer sets properties"),a.value=b,c)}};var o,p,q=a.fn.init,r=a.parseJSON,s=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,c,e){var f;return b&&"string"==typeof b&&!a.isPlainObject(c)&&(f=s.exec(a.trim(b)))&&f[0]&&("<"!==b.charAt(0)&&d("$(html) HTML strings must start with '<' character"),f[3]&&d("$(html) HTML text after last tag is ignored"),"#"===f[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),c&&c.context&&(c=c.context),a.parseHTML)?q.call(this,a.parseHTML(f[2],c,!0),c,e):q.apply(this,arguments)},a.fn.init.prototype=a.fn,
a.parseJSON=function(a){return a||null===a?r.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){return e&&e instanceof a&&!(e instanceof b)&&(e=b(e)),a.fn.init.call(this,d,e,c)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.ajaxSetup({converters:{"text json":a.parseJSON}});var t=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?t.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var u=/\/(java|ecma)script/i,v=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},a.clean||(a.clean=function(b,e,f,g){e=e||document,e=!e.nodeType&&e[0]||e,e=e.ownerDocument||e,d("jQuery.clean() is deprecated");var h,i,j,k,l=[];if(a.merge(l,a.buildFragment(b,e).childNodes),f)for(j=function(a){return!a.type||u.test(a.type)?g?g.push(a.parentNode?a.parentNode.removeChild(a):a):f.appendChild(a):c},h=0;null!=(i=l[h]);h++)a.nodeName(i,"script")&&j(i)||(f.appendChild(i),i.getElementsByTagName!==c&&(k=a.grep(a.merge([],i.getElementsByTagName("script")),j),l.splice.apply(l,[h+1,0].concat(k)),h+=k.length));return l});var w=a.event.add,x=a.event.remove,y=a.event.trigger,z=a.fn.toggle,A=a.fn.live,B=a.fn.die,C="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=RegExp("\\b(?:"+C+")\\b"),E=/(?:^|\s)hover(\.\S+|)\b/,F=function(b){return"string"!=typeof b||a.event.special.hover?b:(E.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(E,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&D.test(b)&&d("AJAX events should be attached to document: "+b),w.call(this,a,F(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){x.call(this,a,F(b)||"",c,d,e)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return d("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return z.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;e.length>g;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),A?A.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),B?B.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||D.test(a)||d("Global events are undocumented and deprecated"),y.call(this,a,b,c||document,e)},a.each(C.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,null,b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})}(jQuery,window),function(){var a,b,c,d,e,f,g,h,i,j;b=window.device,a={},window.device=a,d=window.document.documentElement,j=window.navigator.userAgent.toLowerCase(),a.ios=function(){return a.iphone()||a.ipod()||a.ipad()},a.iphone=function(){return!a.windows()&&e("iphone")},a.ipod=function(){return e("ipod")},a.ipad=function(){return e("ipad")},a.android=function(){return!a.windows()&&e("android")},a.androidPhone=function(){return a.android()&&e("mobile")},a.androidTablet=function(){return a.android()&&!e("mobile")},a.blackberry=function(){return e("blackberry")||e("bb10")||e("rim")},a.blackberryPhone=function(){return a.blackberry()&&!e("tablet")},a.blackberryTablet=function(){return a.blackberry()&&e("tablet")},a.windows=function(){return e("windows")},a.windowsPhone=function(){return a.windows()&&e("phone")},a.windowsTablet=function(){return a.windows()&&e("touch")&&!a.windowsPhone()},a.fxos=function(){return(e("(mobile;")||e("(tablet;"))&&e("; rv:")},a.fxosPhone=function(){return a.fxos()&&e("mobile")},a.fxosTablet=function(){return a.fxos()&&e("tablet")},a.meego=function(){return e("meego")},a.cordova=function(){return window.cordova&&"file:"===location.protocol},a.nodeWebkit=function(){return"object"==typeof window.process},a.mobile=function(){return a.androidPhone()||a.iphone()||a.ipod()||a.windowsPhone()||a.blackberryPhone()||a.fxosPhone()||a.meego()},a.tablet=function(){return a.ipad()||a.androidTablet()||a.blackberryTablet()||a.windowsTablet()||a.fxosTablet()},a.desktop=function(){return!a.tablet()&&!a.mobile()},a.television=function(){var a;for(television=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"],a=0;a<television.length;){if(e(television[a]))return!0;a++}return!1},a.portrait=function(){return window.innerHeight/window.innerWidth>1},a.landscape=function(){return window.innerHeight/window.innerWidth<1},a.noConflict=function(){return window.device=b,this},e=function(a){return-1!==j.indexOf(a)},g=function(a){var b;return b=new RegExp(a,"i"),d.className.match(b)},c=function(a){var b=null;g(a)||(b=d.className.replace(/^\s+|\s+$/g,""),d.className=b+" "+a)},i=function(a){g(a)&&(d.className=d.className.replace(" "+a,""))},a.ios()?a.ipad()?c("ios ipad tablet"):a.iphone()?c("ios iphone mobile"):a.ipod()&&c("ios ipod mobile"):a.android()?c(a.androidTablet()?"android tablet":"android mobile"):a.blackberry()?c(a.blackberryTablet()?"blackberry tablet":"blackberry mobile"):a.windows()?c(a.windowsTablet()?"windows tablet":a.windowsPhone()?"windows mobile":"desktop"):a.fxos()?c(a.fxosTablet()?"fxos tablet":"fxos mobile"):a.meego()?c("meego mobile"):a.nodeWebkit()?c("node-webkit"):a.television()?c("television"):a.desktop()&&c("desktop"),a.cordova()&&c("cordova"),f=function(){a.landscape()?(i("portrait"),c("landscape")):(i("landscape"),c("portrait"))},h=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(h,f,!1):window.attachEvent?window.attachEvent(h,f):window[h]=f,f(),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window.device=a}.call(this),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(a){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;n<o;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin(2*(b*e-f)*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=.3*e*1.5),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-.5*h*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-f)*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),function(a){"use strict";var b=function(){var b={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",menuArrowClass:"sf-arrows"},c=function(){var b=/iPhone|iPad|iPod/i.test(navigator.userAgent);return b&&a(window).load(function(){a("body").children().on("click",a.noop)}),b}(),d=function(){var a=document.documentElement.style;return"behavior"in a&&"fill"in a&&/iemobile/i.test(navigator.userAgent)}(),e=function(a,c){var d=b.menuClass;c.cssArrows&&(d+=" "+b.menuArrowClass),a.toggleClass(d)},f=function(c,d){return c.find("li."+d.pathClass).slice(0,d.pathLevels).addClass(d.hoverClass+" "+b.bcClass).filter(function(){return a(this).children(d.popUpSelector).hide().show().length}).removeClass(d.pathClass)},g=function(a){a.children("a").toggleClass(b.anchorClass)},h=function(a){var b=a.css("ms-touch-action");b="pan-y"===b?"auto":"pan-y",a.css("ms-touch-action",b)},i=function(b,e){var f="li:has("+e.popUpSelector+")";a.fn.hoverIntent&&!e.disableHI?b.hoverIntent(k,l,f):b.on("mouseenter.superfish",f,k).on("mouseleave.superfish",f,l);var g="MSPointerDown.superfish";c||(g+=" touchend.superfish"),d&&(g+=" mousedown.superfish"),b.on("focusin.superfish","li",k).on("focusout.superfish","li",l).on(g,"a",e,j)},j=function(b){var c=a(this),d=c.siblings(b.data.popUpSelector);d.length>0&&d.is(":hidden")&&(c.one("click.superfish",!1),"MSPointerDown"===b.type?c.trigger("focus"):a.proxy(k,c.parent("li"))())},k=function(){var b=a(this),c=o(b);clearTimeout(c.sfTimer),b.siblings().superfish("hide").end().superfish("show")},l=function(){var b=a(this),d=o(b);c?a.proxy(m,b,d)():(clearTimeout(d.sfTimer),d.sfTimer=setTimeout(a.proxy(m,b,d),d.delay))},m=function(b){b.retainPath=a.inArray(this[0],b.$path)>-1,this.superfish("hide"),this.parents("."+b.hoverClass).length||(b.onIdle.call(n(this)),b.$path.length&&a.proxy(k,b.$path)())},n=function(a){return a.closest("."+b.menuClass)},o=function(a){return n(a).data("sf-options")};return{hide:function(b){if(this.length){var c=this,d=o(c);if(!d)return this;var e=d.retainPath===!0?d.$path:"",f=c.find("li."+d.hoverClass).add(this).not(e).removeClass(d.hoverClass).children(d.popUpSelector),g=d.speedOut;b&&(f.show(),g=0),d.retainPath=!1,d.onBeforeHide.call(f),f.stop(!0,!0).animate(d.animationOut,g,function(){var b=a(this);d.onHide.call(b)})}return this},show:function(){var a=o(this);if(!a)return this;var b=this.addClass(a.hoverClass),c=b.children(a.popUpSelector);return a.onBeforeShow.call(c),c.stop(!0,!0).animate(a.animation,a.speed,function(){a.onShow.call(c)}),this},destroy:function(){return this.each(function(){var c,d=a(this),f=d.data("sf-options");return!!f&&(c=d.find(f.popUpSelector).parent("li"),clearTimeout(f.sfTimer),e(d,f),g(c),h(d),d.off(".superfish").off(".hoverIntent"),c.children(f.popUpSelector).attr("style",function(a,b){return b.replace(/display[^;]+;?/g,"")}),f.$path.removeClass(f.hoverClass+" "+b.bcClass).addClass(f.pathClass),d.find("."+f.hoverClass).removeClass(f.hoverClass),f.onDestroy.call(d),void d.removeData("sf-options"))})},init:function(c){return this.each(function(){var d=a(this);if(d.data("sf-options"))return!1;var j=a.extend({},a.fn.superfish.defaults,c),k=d.find(j.popUpSelector).parent("li");j.$path=f(d,j),d.data("sf-options",j),e(d,j),g(k),h(d),i(d,j),k.not("."+b.bcClass).superfish("hide",!0),j.onInit.call(this)})}}}();a.fn.superfish=function(c,d){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?a.error("Method "+c+" does not exist on jQuery.fn.superfish"):b.init.apply(this,arguments)},a.fn.superfish.defaults={popUpSelector:"ul,.sf-mega",hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,disableHI:!1,onInit:a.noop,onBeforeShow:a.noop,onShow:a.noop,onBeforeHide:a.noop,onHide:a.noop,onIdle:a.noop,onDestroy:a.noop},a.fn.extend({hideSuperfishUl:b.hide,showSuperfishUl:b.show})}(jQuery),function(a){var b,c,d={cntClass:"rd-mobilemenu",menuClass:"rd-mobilemenu_ul",submenuClass:"rd-mobilemenu_submenu",panelClass:"rd-mobilepanel",toggleClass:"rd-mobilepanel_toggle",titleClass:"rd-mobilepanel_title"},e=function(b,c){this.options=c,this.$source=a(b)};e.prototype={init:function(){var a=this;a.createDOM(),a.createListeners()},createDOM:function(){var b=this;a("body").append(a("<div/>",{class:d.cntClass}).append(b.createNavDOM())).append(a("<div/>",{class:d.panelClass}).append(a("<button/>",{class:d.toggleClass}).append(a("<span/>"))).append(a("<h2/>",{class:d.titleClass,text:document.title})))},createNavDOM:function(){for(var b=this,c=a("<ul>",{class:d.menuClass}),e=b.$source.children(),f=0;f<e.length;f++){for(var g=e[f].children,h=null,i=0;i<g.length;i++)if(g[i].tagName)switch(h||(h=document.createElement("li"),e[f].className.indexOf("active")>-1&&(h.className="active")),g[i].tagName.toLowerCase()){case"a":var j=g[i].cloneNode(!0);h.appendChild(j);break;case"ul":var k=g[i].cloneNode(!0);k.className=d.submenuClass,a(k).css({display:"none"}),h.appendChild(k),a(h).find("> a").each(function(){$this=a(this),$this.addClass("rd-with-ul").append(a("<span/>",{class:"rd-submenu-toggle"})).find(".rd-submenu-toggle").on("click",function(b){if(b.preventDefault(),$this=a(this).parent(),$this.hasClass("rd-with-ul")&&!$this.hasClass("active")){a(".rd-with-ul").removeClass("active");var c=$this.addClass("active").parent().find("."+d.submenuClass);c.stop().slideDown(),a("."+d.submenuClass).not(c).stop().slideUp()}else{var c=$this.removeClass("active").parent().find("."+d.submenuClass);c.stop().slideUp()}})})}h&&c.append(h)}return c},createListeners:function(){var a=this;a.createToggleListener(),a.createResizeListener()},createToggleListener:function(){var b,c=this;b=c.isMobile()?"touchstart":"click",a("body").delegate("."+d.toggleClass,b,function(){var e=a("."+d.cntClass);a(this).toggleClass("active"),e.hasClass("active")?(a(this).removeClass("active"),e.removeClass("active"),a("body").undelegate("*","mousewheel",c.scroll),a("body").undelegate("*","touchmove",c.scroll),a("body").undelegate("*","touchend",c.touchend),a("body").undelegate("*","touchstart",c.close),a("body").undelegate("*:not(."+d.toggleClass+" span)","click",c.close)):(a(this).addClass("active"),e.addClass("active"),a("body").delegate("*","mousewheel",c.scroll),a("body").delegate("*","touchmove",c.scroll),a("body").delegate("*","touchend",c.touchend),a("body").delegate("*","touchstart",{type:b},c.close),a("body").delegate("*:not(."+d.toggleClass+" span)","click",{type:b},c.close))})},createResizeListener:function(){var b=this;a(window).on("resize",function(){var c=a("."+d.cntClass);"none"==c.css("display")&&(c.removeClass("active"),a("."+d.toggleClass).removeClass("active"),a("body").undelegate("*","mousewheel",b.scroll),a("body").undelegate("*","touchmove",b.scroll),a("body").undelegate("*","touchend",b.touchend),a("body").undelegate("*","touchstart",b.close),a("body").undelegate("*:not(."+d.toggleClass+" span)","click",b.close))})},scroll:function(e){e.preventDefault();var f=a("."+d.menuClass),g=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,h=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY;if(h>f.offset().top&&h<f.offset().top+f.outerHeight()&&g>f.offset().left&&g<f.offset().left+f.outerWidth()){var i=0;e.originalEvent.targetTouches?(b||(b=h),i=b-h,b=h,c=i>0):i=(e.originalEvent.wheelDelta||-e.originalEvent.detail)*-50,f.stop().scrollTop(f.scrollTop()+i)}return!1},touchend:function(e){var f=a("."+d.menuClass);f.stop().animate({scrollTop:f.scrollTop()+(c?100:-100)},3e3,"easeOutQuint"),b=void 0},close:function(b){if(b.originalEvent){var c=a("."+d.menuClass),e=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageX:b.pageX,f=b.originalEvent.targetTouches?b.originalEvent.targetTouches[0].pageY:b.pageY;f>c.offset().top&&f<c.offset().top+c.outerHeight()&&e>c.offset().left&&e<c.offset().left+c.outerWidth()||a("."+d.toggleClass).trigger(b.data.type)}},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},a.fn.rdparallax=function(a){var b=this;return b.length&&new e(b[0]).init(),b},window.RDMobilemenu_autoinit=function(b){var c=a(b);c.length&&new e(c[0]).init()}}(jQuery),$(document).ready(function(){RDMobilemenu_autoinit('[data-type="navbar"]')}),function(a){a.fn.camera=function(b,c){function d(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))return!0}function e(){var b=a(B).width();a("li",B).removeClass("camera_visThumb"),a("li",B).each(function(){var c=a(this).position(),d=a("ul",B).outerWidth(),e=a("ul",B).offset().left,f=a("> div",B).offset().left,g=f-e;g>0?a(".camera_prevThumbs",Y).removeClass("hideNav"):a(".camera_prevThumbs",Y).addClass("hideNav"),d-g>b?a(".camera_nextThumbs",Y).removeClass("hideNav"):a(".camera_nextThumbs",Y).addClass("hideNav");var h=c.left,i=c.left+a(this).width();i-g<=b&&h-g>=0&&a(this).addClass("camera_visThumb")})}function f(){function c(){if(p=m.width(),b.height.indexOf("%")!=-1){var c=Math.round(p/(100/parseFloat(b.height)));q=""!=b.minHeight&&c<parseFloat(b.minHeight)?parseFloat(b.minHeight):c,m.css({height:q})}else"auto"==b.height?q=m.height():(q=parseFloat(b.height),m.css({height:q}));a(".camerarelative",t).css({width:p,height:q}),a(".imgLoaded",t).each(function(){var c,d,e=a(this),f=e.attr("width"),g=e.attr("height"),h=(e.index(),e.attr("data-alignment")),i=e.attr("data-portrait");if("undefined"!=typeof h&&h!==!1&&""!==h||(h=b.alignment),"undefined"!=typeof i&&i!==!1&&""!==i||(i=b.portrait),0==i||"false"==i)if(f/g<p/q){var j=p/f,k=.5*Math.abs(q-g*j);switch(h){case"topLeft":c=0;break;case"topCenter":c=0;break;case"topRight":c=0;break;case"centerLeft":c="-"+k+"px";break;case"center":c="-"+k+"px";break;case"centerRight":c="-"+k+"px";break;case"bottomLeft":c="-"+2*k+"px";break;case"bottomCenter":c="-"+2*k+"px";break;case"bottomRight":c="-"+2*k+"px"}e.css({height:g*j,"margin-left":0,"margin-top":c,position:"absolute",visibility:"visible",width:p})}else{var j=q/g,k=.5*Math.abs(p-f*j);switch(h){case"topLeft":d=0;break;case"topCenter":d="-"+k+"px";break;case"topRight":d="-"+2*k+"px";break;case"centerLeft":d=0;break;case"center":d="-"+k+"px";break;case"centerRight":d="-"+2*k+"px";break;case"bottomLeft":d=0;break;case"bottomCenter":d="-"+k+"px";break;case"bottomRight":d="-"+2*k+"px"}e.css({height:q,"margin-left":d,"margin-top":0,position:"absolute",visibility:"visible",width:f*j})}else if(f/g<p/q){var j=q/g,k=.5*Math.abs(p-f*j);switch(h){case"topLeft":d=0;break;case"topCenter":d=k+"px";break;case"topRight":d=2*k+"px";break;case"centerLeft":d=0;break;case"center":d=k+"px";break;case"centerRight":d=2*k+"px";break;case"bottomLeft":d=0;break;case"bottomCenter":d=k+"px";break;case"bottomRight":d=2*k+"px"}e.css({height:q,"margin-left":d,"margin-top":0,position:"absolute",visibility:"visible",width:f*j})}else{var j=p/f,k=.5*Math.abs(q-g*j);switch(h){case"topLeft":c=0;break;case"topCenter":c=0;break;case"topRight":c=0;break;case"centerLeft":c=k+"px";break;case"center":c=k+"px";break;case"centerRight":c=k+"px";break;case"bottomLeft":c=2*k+"px";break;case"bottomCenter":c=2*k+"px";break;case"bottomRight":c=2*k+"px"}e.css({height:g*j,"margin-left":0,"margin-top":c,position:"absolute",visibility:"visible",width:p})}})}var d;1==O?(clearTimeout(d),d=setTimeout(c,200)):c(),O=!0}function g(){a("iframe",n).each(function(){a(".camera_caption",n).show();var c=a(this),d=c.attr("data-src");c.attr("src",d);var e=b.imagePath+"blank.gif",f=new Image;if(f.src=e,b.height.indexOf("%")!=-1){var g=Math.round(p/(100/parseFloat(b.height)));q=""!=b.minHeight&&g<parseFloat(b.minHeight)?parseFloat(b.minHeight):g}else q="auto"==b.height?m.height():parseFloat(b.height);c.after(a(f).attr({class:"imgFake",width:p,height:q}));var h=c.clone();c.remove(),a(f).bind("click",function(){"absolute"==a(this).css("position")?(a(this).remove(),d.indexOf("vimeo")!=-1||d.indexOf("youtube")!=-1?d.indexOf("?")!=-1?autoplay="&autoplay=1":autoplay="?autoplay=1":d.indexOf("dailymotion")!=-1&&(d.indexOf("?")!=-1?autoplay="&autoPlay=1":autoplay="?autoPlay=1"),h.attr("src",d+autoplay),V=!0):(a(this).css({position:"absolute",top:0,left:0,zIndex:10}).after(h),h.css({position:"absolute",top:0,left:0,zIndex:9}))})})}function h(a){for(var b,c,d=a.length;d;b=parseInt(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}function i(){if(a(B).length&&!a(A).length){var b,c=a(B).outerWidth(),d=(a("ul > li",B).outerWidth(),a("li.cameracurrent",B).length?a("li.cameracurrent",B).position():""),f=a("ul > li",B).length*a("ul > li",B).outerWidth(),g=a("ul",B).offset().left,h=a("> div",B).offset().left;b=g<0?"-"+(h-g):h-g,1==da&&(a("ul",B).width(a("ul > li",B).length*a("ul > li",B).outerWidth()),a(B).length&&!a(A).lenght&&m.css({marginBottom:a(B).outerHeight()}),e(),a("ul",B).width(a("ul > li",B).length*a("ul > li",B).outerWidth()),a(B).length&&!a(A).lenght&&m.css({marginBottom:a(B).outerHeight()})),da=!1;var i=a("li.cameracurrent",B).length?d.left:"",j=a("li.cameracurrent",B).length?d.left+a("li.cameracurrent",B).outerWidth():"";i<a("li.cameracurrent",B).outerWidth()&&(i=0),j-b>c?i+c<f?a("ul",B).animate({"margin-left":"-"+i+"px"},500,e):a("ul",B).animate({"margin-left":"-"+(a("ul",B).outerWidth()-c)+"px"},500,e):i-b<0?a("ul",B).animate({"margin-left":"-"+i+"px"},500,e):(a("ul",B).css({"margin-left":"auto","margin-right":"auto"}),setTimeout(e,100))}}function j(){_=0;var c=a(".camera_bar_cont",Y).width(),d=a(".camera_bar_cont",Y).height();if("pie"!=o)switch(X){case"leftToRight":a("#"+r).css({right:c});break;case"rightToLeft":a("#"+r).css({left:c});break;case"topToBottom":a("#"+r).css({bottom:d});break;case"bottomToTop":a("#"+r).css({top:d})}else ba.clearRect(0,0,b.pieDiameter,b.pieDiameter)}function k(c){s.addClass("camerasliding"),V=!1;var e=parseFloat(a("div.cameraSlide.cameracurrent",t).index());if(c>0)var l=c-1;else if(e==I-1)var l=0;else var l=e+1;var u=a(".cameraSlide:eq("+l+")",t),v=a(".cameraSlide:eq("+(l+1)+")",t).addClass("cameranext");if(e!=l+1&&v.hide(),a(".cameraContent",n).fadeOut(600),a(".camera_caption",n).show(),a(".camerarelative",u).append(a("> div ",s).eq(l).find("> div.camera_effected")),a(".camera_target_content .cameraContent:eq("+l+")",m).append(a("> div ",s).eq(l).find("> div")),a(".imgLoaded",u).length){if(C.length>l+1&&!a(".imgLoaded",v).length){var w=C[l+1],x=new Image;x.src=w+"?"+(new Date).getTime(),v.prepend(a(x).attr("class","imgLoaded").css("visibility","hidden")),x.onload=function(){ta=x.naturalWidth,ua=x.naturalHeight,a(x).attr("data-alignment",G[l+1]).attr("data-portrait",F[l+1]),a(x).attr("width",ta),a(x).attr("height",ua),f()}}b.onLoaded.call(this),a(".camera_loader",m).is(":visible")?a(".camera_loader",m).fadeOut(400):(a(".camera_loader",m).css({visibility:"hidden"}),a(".camera_loader",m).fadeOut(400,function(){a(".camera_loader",m).css({visibility:"visible"})}));var y,z,D,E,H,J=b.rows,K=b.cols,L=1,N=0,O=new Array("simpleFade","curtainTopLeft","curtainTopRight","curtainBottomLeft","curtainBottomRight","curtainSliceLeft","curtainSliceRight","blindCurtainTopLeft","blindCurtainTopRight","blindCurtainBottomLeft","blindCurtainBottomRight","blindCurtainSliceBottom","blindCurtainSliceTop","stampede","mosaic","mosaicReverse","mosaicRandom","mosaicSpiral","mosaicSpiralReverse","topLeftBottomRight","bottomRightTopLeft","bottomLeftTopRight","topRightBottomLeft","scrollLeft","scrollRight","scrollTop","scrollBottom","scrollHorz");marginLeft=0,marginTop=0,opacityOnGrid=0,1==b.opacityOnGrid?opacityOnGrid=0:opacityOnGrid=1;var P=a(" > div",s).eq(l).attr("data-fx");if(E=d()&&""!=b.mobileFx&&"default"!=b.mobileFx?b.mobileFx:"undefined"!=typeof P&&P!==!1&&"default"!==P?P:b.fx,"random"==E?(E=h(O),E=E[0]):(E=E,E.indexOf(",")>0&&(E=E.replace(/ /g,""),E=E.split(","),E=h(E),E=E[0])),dataEasing=a(" > div",s).eq(l).attr("data-easing"),mobileEasing=a(" > div",s).eq(l).attr("data-mobileEasing"),H=d()&&""!=b.mobileEasing&&"default"!=b.mobileEasing?"undefined"!=typeof mobileEasing&&mobileEasing!==!1&&"default"!==mobileEasing?mobileEasing:b.mobileEasing:"undefined"!=typeof dataEasing&&dataEasing!==!1&&"default"!==dataEasing?dataEasing:b.easing,y=a(" > div",s).eq(l).attr("data-slideOn"),"undefined"!=typeof y&&y!==!1)S=y;else if("random"==b.slideOn){var S=new Array("next","prev");S=h(S),S=S[0]}else S=b.slideOn;var T=a(" > div",s).eq(l).attr("data-time");z="undefined"!=typeof T&&T!==!1&&""!==T?parseFloat(T):b.time;var U=a(" > div",s).eq(l).attr("data-transPeriod");switch(D="undefined"!=typeof U&&U!==!1&&""!==U?parseFloat(U):b.transPeriod,a(s).hasClass("camerastarted")||(E="simpleFade",S="next",H="",D=400,a(s).addClass("camerastarted")),E){case"simpleFade":K=1,J=1;break;case"curtainTopLeft":K=0==b.slicedCols?b.cols:b.slicedCols,J=1;break;case"curtainTopRight":K=0==b.slicedCols?b.cols:b.slicedCols,J=1;break;case"curtainBottomLeft":K=0==b.slicedCols?b.cols:b.slicedCols,J=1;break;case"curtainBottomRight":K=0==b.slicedCols?b.cols:b.slicedCols,J=1;break;case"curtainSliceLeft":K=0==b.slicedCols?b.cols:b.slicedCols,J=1;break;case"curtainSliceRight":K=0==b.slicedCols?b.cols:b.slicedCols,J=1;break;case"blindCurtainTopLeft":J=0==b.slicedRows?b.rows:b.slicedRows,K=1;break;case"blindCurtainTopRight":J=0==b.slicedRows?b.rows:b.slicedRows,K=1;break;case"blindCurtainBottomLeft":J=0==b.slicedRows?b.rows:b.slicedRows,K=1;break;case"blindCurtainBottomRight":J=0==b.slicedRows?b.rows:b.slicedRows,K=1;break;case"blindCurtainSliceTop":J=0==b.slicedRows?b.rows:b.slicedRows,K=1;break;case"blindCurtainSliceBottom":J=0==b.slicedRows?b.rows:b.slicedRows,K=1;break;case"stampede":N="-"+D;break;case"mosaic":N=b.gridDifference;break;case"mosaicReverse":N=b.gridDifference;break;case"mosaicRandom":break;case"mosaicSpiral":N=b.gridDifference,L=1.7;break;case"mosaicSpiralReverse":N=b.gridDifference,L=1.7;break;case"topLeftBottomRight":N=b.gridDifference,L=6;break;case"bottomRightTopLeft":N=b.gridDifference,L=6;break;case"bottomLeftTopRight":N=b.gridDifference,L=6;break;case"topRightBottomLeft":N=b.gridDifference,L=6;break;case"scrollLeft":K=1,J=1;break;case"scrollRight":K=1,J=1;break;case"scrollTop":K=1,J=1;break;case"scrollBottom":K=1,J=1;break;case"scrollHorz":K=1,J=1}for(var Z,$,ca=0,da=J*K,ea=p-Math.floor(p/K)*K,fa=q-Math.floor(q/J)*J,ga=0,ha=0,ia=new Array,ja=new Array,ka=new Array;ca<da;){ia.push(ca),ja.push(ca),M.append('<div class="cameraappended" style="display:none; overflow:hidden; position:absolute; z-index:1000" />');var la=a(".cameraappended:eq("+ca+")",t);"scrollLeft"==E||"scrollRight"==E||"scrollTop"==E||"scrollBottom"==E||"scrollHorz"==E?W.eq(l).clone().show().appendTo(la):"next"==S?W.eq(l).clone().show().appendTo(la):W.eq(e).clone().show().appendTo(la),Z=ca%K<ea?1:0,ca%K==0&&(ga=0),$=Math.floor(ca/K)<fa?1:0,la.css({height:Math.floor(q/J+$+1),left:ga,top:ha,width:Math.floor(p/K+Z+1)}),a("> .cameraSlide",la).css({height:q,"margin-left":"-"+ga+"px","margin-top":"-"+ha+"px",width:p}),ga=ga+la.width()-1,ca%K==K-1&&(ha=ha+la.height()-1),ca++}switch(E){case"curtainTopLeft":break;case"curtainBottomLeft":break;case"curtainSliceLeft":break;case"curtainTopRight":ia=ia.reverse();break;case"curtainBottomRight":ia=ia.reverse();break;case"curtainSliceRight":ia=ia.reverse();break;case"blindCurtainTopLeft":break;case"blindCurtainBottomLeft":ia=ia.reverse();break;case"blindCurtainSliceTop":break;case"blindCurtainTopRight":break;case"blindCurtainBottomRight":ia=ia.reverse();break;case"blindCurtainSliceBottom":ia=ia.reverse();break;case"stampede":ia=h(ia);break;case"mosaic":break;case"mosaicReverse":ia=ia.reverse();break;case"mosaicRandom":ia=h(ia);break;case"mosaicSpiral":var ma,na,oa,pa=J/2,qa=0;for(oa=0;oa<pa;oa++){for(na=oa,ma=oa;ma<K-oa-1;ma++)ka[qa++]=na*K+ma;for(ma=K-oa-1,na=oa;na<J-oa-1;na++)ka[qa++]=na*K+ma;for(na=J-oa-1,ma=K-oa-1;ma>oa;ma--)ka[qa++]=na*K+ma;
for(ma=oa,na=J-oa-1;na>oa;na--)ka[qa++]=na*K+ma}ia=ka;break;case"mosaicSpiralReverse":var ma,na,oa,pa=J/2,qa=da-1;for(oa=0;oa<pa;oa++){for(na=oa,ma=oa;ma<K-oa-1;ma++)ka[qa--]=na*K+ma;for(ma=K-oa-1,na=oa;na<J-oa-1;na++)ka[qa--]=na*K+ma;for(na=J-oa-1,ma=K-oa-1;ma>oa;ma--)ka[qa--]=na*K+ma;for(ma=oa,na=J-oa-1;na>oa;na--)ka[qa--]=na*K+ma}ia=ka;break;case"topLeftBottomRight":for(var na=0;na<J;na++)for(var ma=0;ma<K;ma++)ka.push(ma+na);ja=ka;break;case"bottomRightTopLeft":for(var na=0;na<J;na++)for(var ma=0;ma<K;ma++)ka.push(ma+na);ja=ka.reverse();break;case"bottomLeftTopRight":for(var na=J;na>0;na--)for(var ma=0;ma<K;ma++)ka.push(ma+na);ja=ka;break;case"topRightBottomLeft":for(var na=0;na<J;na++)for(var ma=K;ma>0;ma--)ka.push(ma+na);ja=ka}a.each(ia,function(c,d){function f(){if(a(this).addClass("cameraeased"),a(".cameraeased",t).length>=0&&a(B).css({visibility:"visible"}),a(".cameraeased",t).length==da){i(),a(".moveFromLeft, .moveFromRight, .moveFromTop, .moveFromBottom, .fadeIn, .fadeFromLeft, .fadeFromRight, .fadeFromTop, .fadeFromBottom",n).each(function(){a(this).css("visibility","hidden")}),W.eq(l).show().css("z-index","999").removeClass("cameranext").addClass("cameracurrent"),W.eq(e).css("z-index","1").removeClass("cameracurrent"),a(".cameraContent",n).eq(l).addClass("cameracurrent"),e>=0&&a(".cameraContent",n).eq(e).removeClass("cameracurrent"),b.onEndTransition.call(this),"hide"!=a("> div",s).eq(l).attr("data-video")&&a(".cameraContent.cameracurrent .imgFake",n).length&&a(".cameraContent.cameracurrent .imgFake",n).click();var c=W.eq(l).find(".fadeIn").length,d=a(".cameraContent",n).eq(l).find(".moveFromLeft, .moveFromRight, .moveFromTop, .moveFromBottom, .fadeIn, .fadeFromLeft, .fadeFromRight, .fadeFromTop, .fadeFromBottom").length;0!=c&&a(".cameraSlide.cameracurrent .fadeIn",n).each(function(){if(""!=a(this).attr("data-easing"))var b=a(this).attr("data-easing");else var b=H;var d=a(this);if("undefined"==typeof d.attr("data-outerWidth")||d.attr("data-outerWidth")===!1||""===d.attr("data-outerWidth")){var e=d.outerWidth();d.attr("data-outerWidth",e)}else var e=d.attr("data-outerWidth");if("undefined"==typeof d.attr("data-outerHeight")||d.attr("data-outerHeight")===!1||""===d.attr("data-outerHeight")){var f=d.outerHeight();d.attr("data-outerHeight",f)}else var f=d.attr("data-outerHeight");var g=d.position(),h=(g.left,g.top,d.attr("class")),i=d.index();d.parents(".camerarelative").outerHeight(),d.parents(".camerarelative").outerWidth(),h.indexOf("fadeIn")!=-1?d.animate({opacity:0},0).css("visibility","visible").delay(z/c*(.1*(i-1))).animate({opacity:1},z/c*.15,b):d.css("visibility","visible")}),a(".cameraContent.cameracurrent",n).show(),0!=d&&a(".cameraContent.cameracurrent .moveFromLeft, .cameraContent.cameracurrent .moveFromRight, .cameraContent.cameracurrent .moveFromTop, .cameraContent.cameracurrent .moveFromBottom, .cameraContent.cameracurrent .fadeIn, .cameraContent.cameracurrent .fadeFromLeft, .cameraContent.cameracurrent .fadeFromRight, .cameraContent.cameracurrent .fadeFromTop, .cameraContent.cameracurrent .fadeFromBottom",n).each(function(){if(""!=a(this).attr("data-easing"))var b=a(this).attr("data-easing");else var b=H;var c=a(this),e=c.position(),f=(e.left,e.top,c.attr("class")),g=c.index(),h=c.outerHeight();f.indexOf("moveFromLeft")!=-1?(c.css({left:"-"+p+"px",right:"auto"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({left:e.left},z/d*.15,b)):f.indexOf("moveFromRight")!=-1?(c.css({left:p+"px",right:"auto"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({left:e.left},z/d*.15,b)):f.indexOf("moveFromTop")!=-1?(c.css({top:"-"+q+"px",bottom:"auto"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({top:e.top},z/d*.15,b,function(){c.css({top:"auto",bottom:0})})):f.indexOf("moveFromBottom")!=-1?(c.css({top:q+"px",bottom:"auto"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({top:e.top},z/d*.15,b)):f.indexOf("fadeFromLeft")!=-1?(c.animate({opacity:0},0).css({left:"-"+p+"px",right:"auto"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({left:e.left,opacity:1},z/d*.15,b)):f.indexOf("fadeFromRight")!=-1?(c.animate({opacity:0},0).css({left:p+"px",right:"auto"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({left:e.left,opacity:1},z/d*.15,b)):f.indexOf("fadeFromTop")!=-1?(c.animate({opacity:0},0).css({top:"-"+q+"px",bottom:"auto"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({top:e.top,opacity:1},z/d*.15,b,function(){c.css({top:"auto",bottom:0})})):f.indexOf("fadeFromBottom")!=-1?(c.animate({opacity:0},0).css({bottom:"-"+h+"px"}),c.css("visibility","visible").delay(z/d*(.1*(g-1))).animate({bottom:"0",opacity:1},z/d*.15,b)):f.indexOf("fadeIn")!=-1?c.animate({opacity:0},0).css("visibility","visible").delay(z/d*(.1*(g-1))).animate({opacity:1},z/d*.15,b):c.css("visibility","visible")}),a(".cameraappended",t).remove(),s.removeClass("camerasliding"),W.eq(e).hide();var f,h=a(".camera_bar_cont",Y).width(),m=a(".camera_bar_cont",Y).height();f="pie"!=o?.05:.005,a("#"+r).animate({opacity:b.loaderOpacity},200),Q=setInterval(function(){if(s.hasClass("stopped")&&clearInterval(Q),"pie"!=o)switch(_<=1.002&&!s.hasClass("stopped")&&!s.hasClass("paused")&&!s.hasClass("hovered")?_+=f:_<=1&&(s.hasClass("stopped")||s.hasClass("paused")||s.hasClass("stopped")||s.hasClass("hovered"))?_=_:s.hasClass("stopped")||s.hasClass("paused")||s.hasClass("hovered")||(clearInterval(Q),g(),a("#"+r).animate({opacity:0},200,function(){clearTimeout(R),R=setTimeout(j,u),k(),b.onStartLoading.call(this)})),X){case"leftToRight":a("#"+r).animate({right:h-h*_},z*f,"linear");break;case"rightToLeft":a("#"+r).animate({left:h-h*_},z*f,"linear");break;case"topToBottom":a("#"+r).animate({bottom:m-m*_},z*f,"linear");break;case"bottomToTop":a("#"+r).animate({bottom:m-m*_},z*f,"linear")}else aa=_,ba.clearRect(0,0,b.pieDiameter,b.pieDiameter),ba.globalCompositeOperation="destination-over",ba.beginPath(),ba.arc(b.pieDiameter/2,b.pieDiameter/2,b.pieDiameter/2-b.loaderStroke,0,2*Math.PI,!1),ba.lineWidth=b.loaderStroke,ba.strokeStyle=b.loaderBgColor,ba.stroke(),ba.closePath(),ba.globalCompositeOperation="source-over",ba.beginPath(),ba.arc(b.pieDiameter/2,b.pieDiameter/2,b.pieDiameter/2-b.loaderStroke,0,2*Math.PI*aa,!1),ba.lineWidth=b.loaderStroke-2*b.loaderPadding,ba.strokeStyle=b.loaderColor,ba.stroke(),ba.closePath(),_<=1.002&&!s.hasClass("stopped")&&!s.hasClass("paused")&&!s.hasClass("hovered")?_+=f:_<=1&&(s.hasClass("stopped")||s.hasClass("paused")||s.hasClass("hovered"))?_=_:s.hasClass("stopped")||s.hasClass("paused")||s.hasClass("hovered")||(clearInterval(Q),g(),a("#"+r+", .camera_canvas_wrap",Y).animate({opacity:0},200,function(){clearTimeout(R),R=setTimeout(j,u),k(),b.onStartLoading.call(this)}))},z*f)}}switch(Z=d%K<ea?1:0,d%K==0&&(ga=0),$=Math.floor(d/K)<fa?1:0,E){case"simpleFade":height=q,width=p,opacityOnGrid=0;break;case"curtainTopLeft":height=0,width=Math.floor(p/K+Z+1),marginTop="-"+Math.floor(q/J+$+1)+"px";break;case"curtainTopRight":height=0,width=Math.floor(p/K+Z+1),marginTop="-"+Math.floor(q/J+$+1)+"px";break;case"curtainBottomLeft":height=0,width=Math.floor(p/K+Z+1),marginTop=Math.floor(q/J+$+1)+"px";break;case"curtainBottomRight":height=0,width=Math.floor(p/K+Z+1),marginTop=Math.floor(q/J+$+1)+"px";break;case"curtainSliceLeft":height=0,width=Math.floor(p/K+Z+1),d%2==0?marginTop=Math.floor(q/J+$+1)+"px":marginTop="-"+Math.floor(q/J+$+1)+"px";break;case"curtainSliceRight":height=0,width=Math.floor(p/K+Z+1),d%2==0?marginTop=Math.floor(q/J+$+1)+"px":marginTop="-"+Math.floor(q/J+$+1)+"px";break;case"blindCurtainTopLeft":height=Math.floor(q/J+$+1),width=0,marginLeft="-"+Math.floor(p/K+Z+1)+"px";break;case"blindCurtainTopRight":height=Math.floor(q/J+$+1),width=0,marginLeft=Math.floor(p/K+Z+1)+"px";break;case"blindCurtainBottomLeft":height=Math.floor(q/J+$+1),width=0,marginLeft="-"+Math.floor(p/K+Z+1)+"px";break;case"blindCurtainBottomRight":height=Math.floor(q/J+$+1),width=0,marginLeft=Math.floor(p/K+Z+1)+"px";break;case"blindCurtainSliceBottom":height=Math.floor(q/J+$+1),width=0,d%2==0?marginLeft="-"+Math.floor(p/K+Z+1)+"px":marginLeft=Math.floor(p/K+Z+1)+"px";break;case"blindCurtainSliceTop":height=Math.floor(q/J+$+1),width=0,d%2==0?marginLeft="-"+Math.floor(p/K+Z+1)+"px":marginLeft=Math.floor(p/K+Z+1)+"px";break;case"stampede":height=0,width=0,marginLeft=.2*p*(c%K-(K-Math.floor(K/2)))+"px",marginTop=.2*q*(Math.floor(c/K)+1-(J-Math.floor(J/2)))+"px";break;case"mosaic":height=0,width=0;break;case"mosaicReverse":height=0,width=0,marginLeft=Math.floor(p/K+Z+1)+"px",marginTop=Math.floor(q/J+$+1)+"px";break;case"mosaicRandom":height=0,width=0,marginLeft=.5*Math.floor(p/K+Z+1)+"px",marginTop=.5*Math.floor(q/J+$+1)+"px";break;case"mosaicSpiral":height=0,width=0,marginLeft=.5*Math.floor(p/K+Z+1)+"px",marginTop=.5*Math.floor(q/J+$+1)+"px";break;case"mosaicSpiralReverse":height=0,width=0,marginLeft=.5*Math.floor(p/K+Z+1)+"px",marginTop=.5*Math.floor(q/J+$+1)+"px";break;case"topLeftBottomRight":height=0,width=0;break;case"bottomRightTopLeft":height=0,width=0,marginLeft=Math.floor(p/K+Z+1)+"px",marginTop=Math.floor(q/J+$+1)+"px";break;case"bottomLeftTopRight":height=0,width=0,marginLeft=0,marginTop=Math.floor(q/J+$+1)+"px";break;case"topRightBottomLeft":height=0,width=0,marginLeft=Math.floor(p/K+Z+1)+"px",marginTop=0;break;case"scrollRight":height=q,width=p,marginLeft=-p;break;case"scrollLeft":height=q,width=p,marginLeft=p;break;case"scrollTop":height=q,width=p,marginTop=q;break;case"scrollBottom":height=q,width=p,marginTop=-q;break;case"scrollHorz":height=q,width=p,0==e&&l==I-1?marginLeft=-p:e<l||e==I-1&&0==l?marginLeft=p:marginLeft=-p}var h=a(".cameraappended:eq("+d+")",t);"undefined"!=typeof Q&&(clearInterval(Q),clearTimeout(R),R=setTimeout(j,D+N)),a(A).length&&(a(".camera_pag li",m).removeClass("cameracurrent"),a(".camera_pag li",m).eq(l).addClass("cameracurrent")),a(B).length&&(a("li",B).removeClass("cameracurrent"),a("li",B).eq(l).addClass("cameracurrent"),a("li",B).not(".cameracurrent").find("img").animate({opacity:.5},0),a("li.cameracurrent img",B).animate({opacity:1},0),a("li",B).hover(function(){a("img",this).stop(!0,!1).animate({opacity:1},150)},function(){a(this).hasClass("cameracurrent")||a("img",this).stop(!0,!1).animate({opacity:.5},150)}));var u=parseFloat(D)+parseFloat(N);"scrollLeft"==E||"scrollRight"==E||"scrollTop"==E||"scrollBottom"==E||"scrollHorz"==E?(b.onStartTransition.call(this),u=0,h.delay((D+N)/da*ja[c]*L*.5).css({display:"block",height:height,"margin-left":marginLeft,"margin-top":marginTop,width:width}).animate({height:Math.floor(q/J+$+1),"margin-top":0,"margin-left":0,width:Math.floor(p/K+Z+1)},D-N,H,f),W.eq(e).delay((D+N)/da*ja[c]*L*.5).animate({"margin-left":marginLeft*-1,"margin-top":marginTop*-1},D-N,H,function(){a(this).css({"margin-top":0,"margin-left":0})})):(b.onStartTransition.call(this),u=parseFloat(D)+parseFloat(N),"next"==S?h.delay((D+N)/da*ja[c]*L*.5).css({display:"block",height:height,"margin-left":marginLeft,"margin-top":marginTop,width:width,opacity:opacityOnGrid}).animate({height:Math.floor(q/J+$+1),"margin-top":0,"margin-left":0,opacity:1,width:Math.floor(p/K+Z+1)},D-N,H,f):(W.eq(l).show().css("z-index","999").addClass("cameracurrent"),W.eq(e).css("z-index","1").removeClass("cameracurrent"),a(".cameraContent",n).eq(l).addClass("cameracurrent"),a(".cameraContent",n).eq(e).removeClass("cameracurrent"),h.delay((D+N)/da*ja[c]*L*.5).css({display:"block",height:Math.floor(q/J+$+1),"margin-top":0,"margin-left":0,opacity:1,width:Math.floor(p/K+Z+1)}).animate({height:height,"margin-left":marginLeft,"margin-top":marginTop,width:width,opacity:opacityOnGrid},D-N,H,f)))})}else{var ra=C[l],sa=new Image;sa.src=ra+"?"+(new Date).getTime(),u.css("visibility","hidden"),u.prepend(a(sa).attr("class","imgLoaded").css("visibility","hidden"));var ta,ua;a(sa).get(0).complete&&"0"!=ta&&"0"!=ua&&"undefined"!=typeof ta&&ta!==!1&&"undefined"!=typeof ua&&ua!==!1||(a(".camera_loader",m).delay(500).fadeIn(400),sa.onload=function(){ta=sa.naturalWidth,ua=sa.naturalHeight,a(sa).attr("data-alignment",G[l]).attr("data-portrait",F[l]),a(sa).attr("width",ta),a(sa).attr("height",ua),t.find(".cameraSlide_"+l).hide().css("visibility","visible"),f(),k(l+1)})}}var l={alignment:"center",autoAdvance:!0,mobileAutoAdvance:!0,barDirection:"leftToRight",barPosition:"bottom",cols:6,easing:"easeInOutExpo",mobileEasing:"",fx:"random",mobileFx:"",gridDifference:250,height:"50%",imagePath:"images/",hover:!0,loader:"pie",loaderColor:"#eeeeee",loaderBgColor:"#222222",loaderOpacity:.8,loaderPadding:2,loaderStroke:7,minHeight:"200px",navigation:!0,navigationHover:!0,mobileNavHover:!0,opacityOnGrid:!1,overlayer:!0,pagination:!0,playPause:!0,pauseOnClick:!0,pieDiameter:38,piePosition:"rightTop",portrait:!1,rows:4,slicedCols:12,slicedRows:8,slideOn:"random",thumbnails:!1,time:7e3,transPeriod:1500,onEndTransition:function(){},onLoaded:function(){},onStartLoading:function(){},onStartTransition:function(){}},b=a.extend({},l,b),m=a(this).addClass("camera_wrap");m.wrapInner('<div class="camera_src" />').wrapInner('<div class="camera_fakehover" />');var n=a(".camera_fakehover",m);n.append('<div class="camera_target"></div>'),1==b.overlayer&&n.append('<div class="camera_overlayer"></div>'),n.append('<div class="camera_target_content"></div>');var o;o="pie"==b.loader&&a.browser.msie&&a.browser.version<9?"bar":b.loader,"pie"==o?n.append('<div class="camera_pie"></div>'):"bar"==o?n.append('<div class="camera_bar"></div>'):n.append('<div class="camera_bar" style="display:none"></div>'),1==b.playPause&&n.append('<div class="camera_commands"></div>'),1==b.navigation&&(n.append('<div class="camera_nav"></div>'),a(".camera_nav").append('<div class="camera_prev"></div>').append('<div class="camera_next"></div>').append('<div class="camera_index"></div>')),1==b.thumbnails&&m.append('<div class="camera_thumbs_cont" />'),1==b.thumbnails&&1!=b.pagination&&a(".camera_thumbs_cont",m).wrap("<div />").wrap('<div class="camera_thumbs" />').wrap("<div />").wrap('<div class="camera_command_wrap" />'),1==b.pagination&&m.append('<div class="camera_pag"></div>'),m.append('<div class="camera_loader"></div>'),a(".camera_caption",m).each(function(){a(this).wrapInner("<div />")});var p,q,r="pie_"+m.index(),s=a(".camera_src",m),t=a(".camera_target",m),u=a(".camera_target_content",m),v=a(".camera_pie",m),w=a(".camera_bar",m),x=a(".camera_prev",m),y=a(".camera_next",m),z=a(".camera_commands",m),A=a(".camera_pag",m),B=a(".camera_thumbs_cont",m),C=new Array;a("> div",s).each(function(){C.push(a(this).attr("data-src"))});var D=new Array;a("> div",s).each(function(){a(this).attr("data-link")?D.push(a(this).attr("data-link")):D.push("")});var E=new Array;a("> div",s).each(function(){a(this).attr("data-target")?E.push(a(this).attr("data-target")):E.push("")});var F=new Array;a("> div",s).each(function(){a(this).attr("data-portrait")?F.push(a(this).attr("data-portrait")):F.push("")});var G=new Array;a("> div",s).each(function(){a(this).attr("data-alignment")?G.push(a(this).attr("data-alignment")):G.push("")});var H=new Array;a("> div",s).each(function(){a(this).attr("data-thumb")?H.push(a(this).attr("data-thumb")):H.push("")});var I=C.length;a(u).append('<div class="cameraContents" />');var J;for(J=0;J<I;J++)if(a(".cameraContents",u).append('<div class="cameraContent" />'),""!=D[J]){var K=a("> div ",s).eq(J).attr("data-box");K="undefined"!=typeof K&&K!==!1&&""!=K?'data-box="'+a("> div ",s).eq(J).attr("data-box")+'"':"",a(".camera_target_content .cameraContent:eq("+J+")",m).append('<a class="camera_link" href="'+D[J]+'" '+K+' target="'+E[J]+'"></a>')}a(".camera_caption",m).each(function(){var b=a(this).parent().index(),c=m.find(".cameraContent").eq(b);a(this).appendTo(c)}),t.append('<div class="cameraCont" />');var L,M=a(".cameraCont",m);for(L=0;L<I;L++){M.append('<div class="cameraSlide cameraSlide_'+L+'" />');var N=a("> div:eq("+L+")",s);t.find(".cameraSlide_"+L).clone(N)}a(window).bind("load resize pageshow",function(){i(),e()}),M.append('<div class="cameraSlide cameraSlide_'+L+'" />');var O;m.show();var P,p=t.width(),q=t.height();a(window).bind("resize pageshow",function(){1==O&&f(),a("ul",B).animate({"margin-top":0},0,i),s.hasClass("paused")||(s.addClass("paused"),a(".camera_stop",Y).length?(a(".camera_stop",Y).hide(),a(".camera_play",Y).show(),"none"!=o&&a("#"+r).hide()):"none"!=o&&a("#"+r).hide(),clearTimeout(P),P=setTimeout(function(){s.removeClass("paused"),a(".camera_play",Y).length?(a(".camera_play",Y).hide(),a(".camera_stop",Y).show(),"none"!=o&&a("#"+r).fadeIn()):"none"!=o&&a("#"+r).fadeIn()},1500))});var Q,R,S,T,z,A,U,V;if(S=d()&&""!=b.mobileAutoAdvance?b.mobileAutoAdvance:b.autoAdvance,0==S&&s.addClass("paused"),T=d()&&""!=b.mobileNavHover?b.mobileNavHover:b.navigationHover,0!=s.length){var W=a(".cameraSlide",t);W.wrapInner('<div class="camerarelative" />');var X=b.barDirection,Y=m;a("iframe",n).each(function(){var b=a(this),c=b.attr("src");b.attr("data-src",c);var d=b.parent().index(".camera_src > div");a(".camera_target_content .cameraContent:eq("+d+")",m).append(b)}),g(),1==b.hover&&(d()||n.hover(function(){s.addClass("hovered")},function(){s.removeClass("hovered")})),a(".camera_stop",Y).live("click",function(){S=!1,s.addClass("paused"),a(".camera_stop",Y).length?(a(".camera_stop",Y).hide(),a(".camera_play",Y).show(),"none"!=o&&a("#"+r).hide()):"none"!=o&&a("#"+r).hide()}),a(".camera_play",Y).live("click",function(){S=!0,s.removeClass("paused"),a(".camera_play",Y).length?(a(".camera_play",Y).hide(),a(".camera_stop",Y).show(),"none"!=o&&a("#"+r).show()):"none"!=o&&a("#"+r).show()}),1==b.pauseOnClick&&a(".camera_target_content",n).mouseup(function(){S=!1,s.addClass("paused"),a(".camera_stop",Y).hide(),a(".camera_play",Y).show(),a("#"+r).hide()}),a(".cameraContent, .imgFake",n).hover(function(){U=!0},function(){U=!1}),a(".cameraContent, .imgFake",n).bind("click",function(){1==V&&1==U&&(S=!1,a(".camera_caption",n).hide(),s.addClass("paused"),a(".camera_stop",Y).hide(),a(".camera_play",Y).show(),a("#"+r).hide())})}if("pie"!=o){w.append('<span class="camera_bar_cont" />'),a(".camera_bar_cont",w).animate({opacity:b.loaderOpacity},0).css({position:"absolute",left:0,right:0,top:0,bottom:0,"background-color":b.loaderBgColor}).append('<span id="'+r+'" />'),a("#"+r).animate({opacity:0},0);var Z=a("#"+r);switch(Z.css({position:"absolute","background-color":b.loaderColor}),b.barPosition){case"left":w.css({right:"auto",width:b.loaderStroke});break;case"right":w.css({left:"auto",width:b.loaderStroke});break;case"top":w.css({bottom:"auto",height:b.loaderStroke});break;case"bottom":w.css({top:"auto",height:b.loaderStroke})}switch(X){case"leftToRight":Z.css({left:0,right:0,top:b.loaderPadding,bottom:b.loaderPadding});break;case"rightToLeft":Z.css({left:0,right:0,top:b.loaderPadding,bottom:b.loaderPadding});break;case"topToBottom":Z.css({left:b.loaderPadding,right:b.loaderPadding,top:0,bottom:0});break;case"bottomToTop":Z.css({left:b.loaderPadding,right:b.loaderPadding,top:0,bottom:0})}}else{v.append('<canvas id="'+r+'"></canvas>');var Z=document.getElementById(r);Z.setAttribute("width",b.pieDiameter),Z.setAttribute("height",b.pieDiameter);var $;switch(b.piePosition){case"leftTop":$="left:0; top:0;";break;case"rightTop":$="right:0; top:0;";break;case"leftBottom":$="left:0; bottom:0;";break;case"rightBottom":$="right:0; bottom:0;"}Z.setAttribute("style","position:absolute; z-index:1002; "+$);var _,aa;if(Z&&Z.getContext){var ba=Z.getContext("2d");ba.rotate(1.5*Math.PI),ba.translate(-b.pieDiameter,0)}}if("none"!=o&&0!=S||(a("#"+r).hide(),a(".camera_canvas_wrap",Y).hide()),a(A).length){a(A).append('<ul class="camera_pag_ul" />');var ca;for(ca=0;ca<I;ca++)a(".camera_pag_ul",m).append('<li class="pag_nav_'+ca+'" style="position:relative; z-index:1002"><span><span>'+ca+"</span></span></li>");a(".camera_pag_ul li",m).hover(function(){if(a(this).addClass("camera_hover"),a(".camera_thumb",this).length){var b=a(".camera_thumb",this).outerWidth(),c=a(".camera_thumb",this).outerHeight(),d=a(this).outerWidth();a(".camera_thumb",this).show().css({top:"-"+c+"px",left:"-"+(b-d)/2+"px"}).animate({opacity:1,"margin-top":"-3px"},200),a(".thumb_arrow",this).show().animate({opacity:1,"margin-top":"-3px"},200)}},function(){a(this).removeClass("camera_hover"),a(".camera_thumb",this).animate({"margin-top":"-20px",opacity:0},200,function(){a(this).css({marginTop:"5px"}).hide()}),a(".thumb_arrow",this).animate({"margin-top":"-20px",opacity:0},200,function(){a(this).css({marginTop:"5px"}).hide()})})}a(B).length?a(A).length?(a.each(H,function(b,c){if(""!=a("> div",s).eq(b).attr("data-thumb")){var d=a("> div",s).eq(b).attr("data-thumb"),e=new Image;e.src=d,a("li.pag_nav_"+b,A).append(a(e).attr("class","camera_thumb").css({position:"absolute"}).animate({opacity:0},0)),a("li.pag_nav_"+b+" > img",A).after('<div class="thumb_arrow" />'),a("li.pag_nav_"+b+" > .thumb_arrow",A).animate({opacity:0},0)}}),m.css({marginBottom:a(A).outerHeight()})):(a(B).append("<div />"),a(B).before('<div class="camera_prevThumbs hideNav"><div></div></div>').before('<div class="camera_nextThumbs hideNav"><div></div></div>'),a("> div",B).append("<ul />"),a.each(H,function(b,c){if(""!=a("> div",s).eq(b).attr("data-thumb")){var d=a("> div",s).eq(b).attr("data-thumb"),e=new Image;e.src=d,a("ul",B).append('<li class="pix_thumb pix_thumb_'+b+'" />'),a("li.pix_thumb_"+b,B).append(a(e).attr("class","camera_thumb"))}})):!a(B).length&&a(A).length&&m.css({marginBottom:a(A).outerHeight()});var da=!0;a(z).length&&(a(z).append('<div class="camera_play"></div>').append('<div class="camera_stop"></div>'),1==S?(a(".camera_play",Y).hide(),a(".camera_stop",Y).show()):(a(".camera_stop",Y).hide(),a(".camera_play",Y).show())),j(),a(".moveFromLeft, .moveFromRight, .moveFromTop, .moveFromBottom, .fadeIn, .fadeFromLeft, .fadeFromRight, .fadeFromTop, .fadeFromBottom",n).each(function(){a(this).css("visibility","hidden")}),b.onStartLoading.call(this),k(),a(x).length&&a(x).click(function(){if(!s.hasClass("camerasliding")){var c=parseFloat(a(".cameraSlide.cameracurrent",t).index());clearInterval(Q),g(),a("#"+r+", .camera_canvas_wrap",m).animate({opacity:0},0),j(),k(0!=c?c:I),b.onStartLoading.call(this)}}),a(y).length&&a(y).click(function(){if(!s.hasClass("camerasliding")){var c=parseFloat(a(".cameraSlide.cameracurrent",t).index());clearInterval(Q),g(),a("#"+r+", .camera_canvas_wrap",Y).animate({opacity:0},0),j(),k(c==I-1?1:c+2),b.onStartLoading.call(this)}}),d()&&(n.bind("swipeleft",function(c){if(!s.hasClass("camerasliding")){var d=parseFloat(a(".cameraSlide.cameracurrent",t).index());clearInterval(Q),g(),a("#"+r+", .camera_canvas_wrap",Y).animate({opacity:0},0),j(),k(d==I-1?1:d+2),b.onStartLoading.call(this)}}),n.bind("swiperight",function(c){if(!s.hasClass("camerasliding")){var d=parseFloat(a(".cameraSlide.cameracurrent",t).index());clearInterval(Q),g(),a("#"+r+", .camera_canvas_wrap",Y).animate({opacity:0},0),j(),k(0!=d?d:I),b.onStartLoading.call(this)}})),a(A).length&&a(".camera_pag li",m).click(function(){if(!s.hasClass("camerasliding")){var c=parseFloat(a(this).index()),d=parseFloat(a(".cameraSlide.cameracurrent",t).index());c!=d&&(clearInterval(Q),g(),a("#"+r+", .camera_canvas_wrap",Y).animate({opacity:0},0),j(),k(c+1),b.onStartLoading.call(this))}}),a(B).length&&(a(".pix_thumb img",B).click(function(){if(!s.hasClass("camerasliding")){var c=parseFloat(a(this).parents("li").index()),d=parseFloat(a(".cameracurrent",t).index());c!=d&&(clearInterval(Q),g(),a("#"+r+", .camera_canvas_wrap",Y).animate({opacity:0},0),a(".pix_thumb",B).removeClass("cameracurrent"),a(this).parents("li").addClass("cameracurrent"),j(),k(c+1),i(),b.onStartLoading.call(this))}}),a(".camera_thumbs_cont .camera_prevThumbs",Y).hover(function(){a(this).stop(!0,!1).animate({opacity:1},250)},function(){a(this).stop(!0,!1).animate({opacity:.7},250)}),a(".camera_prevThumbs",Y).click(function(){var b=0,c=(a(B).outerWidth(),a("ul",B).offset().left),d=a("> div",B).offset().left,f=d-c;a(".camera_visThumb",B).each(function(){var c=a(this).outerWidth();b+=c}),f-b>0?a("ul",B).animate({"margin-left":"-"+(f-b)+"px"},500,e):a("ul",B).animate({"margin-left":0},500,e)}),a(".camera_thumbs_cont .camera_nextThumbs",Y).hover(function(){a(this).stop(!0,!1).animate({opacity:1},250)},function(){a(this).stop(!0,!1).animate({opacity:.7},250)}),a(".camera_nextThumbs",Y).click(function(){var b=0,c=a(B).outerWidth(),d=a("ul",B).outerWidth(),f=a("ul",B).offset().left,g=a("> div",B).offset().left,h=g-f;a(".camera_visThumb",B).each(function(){var c=a(this).outerWidth();b+=c}),h+b+b<d?a("ul",B).animate({"margin-left":"-"+(h+b)+"px"},500,e):a("ul",B).animate({"margin-left":"-"+(d-c)+"px"},500,e)}))}}(jQuery),function(a){a.fn.cameraStop=function(){var b=a(this),c=a(".camera_src",b);"pie_"+b.index(),c.addClass("stopped"),a(".camera_showcommands").length&&a(".camera_thumbs_wrap",b)}}(jQuery),function(a){a.fn.cameraPause=function(){var b=a(this),c=a(".camera_src",b);c.addClass("paused")}}(jQuery),function(a){a.fn.cameraResume=function(){var b=a(this),c=a(".camera_src",b);"undefined"!=typeof autoAdv&&autoAdv===!0||c.removeClass("paused")}}(jQuery),function(a){var b=function(b,c){this.options=c,this.settings={imageClass:"parallax_image",patternClass:"parallax_pattern",contentClass:"parallax_cnt",wrapClass:"parallax"},this.$wrap=a(b),this.$image=a.noop()};b.prototype={init:function(){var a=this;a.isInit=!0,a.createDOM(),a.blur(),a.createListeners()},createDOM:function(){var b=this;b.$wrap.addClass(b.settings.wrapClass).wrapInner(a("<div/>",{class:b.settings.contentClass})).prepend(a("<div/>",{class:b.options.pattern?b.settings.patternClass:b.settings.imageClass}).css({"background-image":"url("+b.options.url+")","background-color":b.options.color})),b.$image=b.options.pattern?b.$wrap.find("."+b.settings.patternClass):b.$wrap.find("."+b.settings.imageClass)},createListeners:function(){this.createResizeListener(),this.createScrollListener()},createScrollListener:function(){var b=this;b.isMobile()&&!b.options.mobile||(a(window).bind("touchstart",function(){b.isTouched=!0}),a(window).bind("touchend",function(){b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){b.isTouched=!1},1200)}),a(window).bind("scroll",function(){b.move()}),b.move())},createResizeListener:function(){var b=this;b.isMobile()&&!b.options.mobile||(b.isMobile()||a(window).bind("resize",function(){b.resize()}),a(window).bind("orientationchange",function(){setTimeout(function(){b.resize()},300)}),b.resize())},move:function(){var b=this;if(b.isVisible()&&(!b.isMobile()||b.options.mobile)){var c=a(window).scrollTop(),d=b.$wrap.offset().top,e=a(window).height(),f=b.$wrap.outerHeight(),g=b.$image.height(),h=b.options.speed;h<0&&(h=0),h>1&&(h=1);var i=(c-(d-e))/(d+f-(d-e))*h;if("normal"==b.options.direction)var j=i*(f-g);else var j=(1-i)*(f-g);b.isIE()&&b.ieVersion()<=10?b.$image.css("top",""+j+"px"):b.isMobile()&&b.options.mobile?(b.isTouched||b.isInit)&&(b.$image.stop().animate({pos:j},{step:function(b){a(this).css("transform","translate3d(0, "+b+"px, 0)")},duration:b.options.duration},b.options.easing),b.isInit=!1):b.$image.css("transform","translate3d(0, "+j+"px, 0)"),b.isFirefox()&&window.devicePixelRatio<1&&(b.$image.css("background-color","#010101"),setTimeout(function(){b.$image.css("background-color",b.options.color)},10))}},resize:function(){var b=this,c=Math.max(a(window).height(),500);c<b.$wrap.outerHeight()&&(c=b.$wrap.outerHeight()+a(window).height()*b.options.speed),b.$image.height(c),setTimeout(function(){b.move(),b.blur()},300)},blur:function(){var b=this;!b.options.blur||b.isIE()||b.options.pattern||a("<img/>",{src:b.options.url}).load(function(){var a=b.$image.height()/this.height,c=b.$image.width()/this.width,d=Math.floor(Math.max(a,c));d>2?b.$image.css({filter:"blur("+d+"px)","-webkit-filter":"blur("+d+"px)"}):b.$image.css({filter:"blur(0px)","-webkit-filter":"blur(0px)"})})},isVisible:function(){var b=this,c=a(window).scrollTop(),d=a(window).height(),e=b.$wrap.offset().top,f=b.$wrap.outerHeight();return e+f>=c&&e<=c+d},isIE:function(){return navigator.appVersion.indexOf("MSIE")!=-1},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},ieVersion:function(){return parseFloat(navigator.appVersion.split("MSIE")[1])},isFirefox:function(){return"undefined"!=typeof InstallTrigger}},a.fn.rdparallax=function(c){var d=this.each(function(){var d=a.extend({},a.fn.rdparallax.defaults,c);d.url?new b(this,d).init():console.error("RD Parallax: data-url is not defined")});return d},a.fn.rdparallax.defaults={speed:.4,direction:"normal",blur:!1,mobile:!1,url:!1,pattern:!1,duration:200,easing:"linear",color:"inherit"},window.RDParallax_autoinit=function(c){a(c).each(function(){var c=a.extend({},a.fn.rdparallax.defaults,{url:a(this).data("url"),speed:a(this).data("speed"),direction:a(this).data("direction"),blur:a(this).data("blur"),mobile:a(this).data("mobile"),pattern:a(this).data("pattern"),color:a(this).data("color")});c.url?new b(this,c).init():console.error("RD Parallax: data-url is not defined")})}}(jQuery),$(document).ready(function(){RDParallax_autoinit(".parallax")}),function(){var a=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function b(c){function d(){!a&&this._init&&this._init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]?function(a,b){return function(){var c=this._super;this._super=function(b){return e[a].apply(this,b||[])};var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=b,d}}(),function($){function camelCase(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var a=camelCase(this.name);$[a]=this,$.fn[a]=function(b){var c=Array.prototype.slice.call(arguments,1);return $[a]._isNotChained(b,c)?$[a][b].apply($[a],[this[0]].concat(c)):this.each(function(){if("string"==typeof b){if("_"===b[0]||!$[a][b])throw"Unknown method: "+b;$[a][b].apply($[a],[this].concat(c))}else $[a]._attach(this,b)})}},setDefaults:function(a){$.extend(this.defaultOptions,a||{})},_isNotChained:function(a,b){return"option"===a&&(0===b.length||1===b.length&&"string"==typeof b[0])||$.inArray(a,this._getters)>-1},_attach:function(a,b){if(a=$(a),!a.hasClass(this._getMarker())){a.addClass(this._getMarker()),b=$.extend({},this.defaultOptions,this._getMetadata(a),b||{});var c=$.extend({name:this.name,elem:a,options:b},this._instSettings(a,b));a.data(this.name,c),this._postAttach(a,c),this.option(a,b)}},_instSettings:function(a,b){return{}},_postAttach:function(a,b){},_getMetadata:function(d){try{var f=d.data(this.name.toLowerCase())||"";f=f.replace(/'/g,'"'),f=f.replace(/([a-zA-Z0-9]+):/g,function(a,b,c){var d=f.substring(0,c).match(/"/g);return d&&d.length%2!==0?b+":":'"'+b+'":'}),f=$.parseJSON("{"+f+"}");for(var g in f){var h=f[g];"string"==typeof h&&h.match(/^new Date\((.*)\)$/)&&(f[g]=eval(h))}return f}catch(a){return{}}},_getInst:function(a){return $(a).data(this.name)||{}},option:function(a,b,c){a=$(a);var d=a.data(this.name);if(!b||"string"==typeof b&&null==c){var e=(d||{}).options;return e&&b?e[b]:e}if(a.hasClass(this._getMarker())){var e=b||{};"string"==typeof b&&(e={},e[b]=c),this._optionsChanged(a,d,e),$.extend(d.options,e)}},_optionsChanged:function(a,b,c){},destroy:function(a){a=$(a),a.hasClass(this._getMarker())&&(this._preDestroy(a,this._getInst(a)),a.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(a,b){}}),$.JQPlugin={createPlugin:function(a,b){"object"==typeof a&&(b=a,a="JQPlugin"),a=camelCase(a);var c=camelCase(b.name);JQClass.classes[c]=JQClass.classes[a].extend(b),
new JQClass.classes[c]}}}(jQuery),function(a){var b="countdown",c=0,d=1,e=2,f=3,g=4,h=5,i=6;a.JQPlugin.createPlugin({name:b,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1}},_getters:["getTimes"],_rtlClass:b+"-rtl",_sectionClass:b+"-section",_amountClass:b+"-amount",_periodClass:b+"-period",_rowClass:b+"-row",_holdingClass:b+"-holding",_showClass:b+"-show",_descrClass:b+"-descr",_timerElems:[],_init:function(){function b(a){var h=a<1e12?e?performance.now()+performance.timing.navigationStart:d():a||d();h-g>=1e3&&(c._updateElems(),g=h),f(b)}var c=this;this._super(),this._serverSyncs=[];var d="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},e=window.performance&&"function"==typeof window.performance.now,f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,g=0;!f||a.noRequestAnimationFrame?(a.noRequestAnimationFrame=null,setInterval(function(){c._updateElems()},980)):(g=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||d(),f(b))},UTCDate:function(a,b,c,d,e,f,g,h){"object"==typeof b&&b.constructor==Date&&(h=b.getMilliseconds(),g=b.getSeconds(),f=b.getMinutes(),e=b.getHours(),d=b.getDate(),c=b.getMonth(),b=b.getFullYear());var i=new Date;return i.setUTCFullYear(b),i.setUTCDate(1),i.setUTCMonth(c||0),i.setUTCDate(d||1),i.setUTCHours(e||0),i.setUTCMinutes((f||0)-(Math.abs(a)<30?60*a:a)),i.setUTCSeconds(g||0),i.setUTCMilliseconds(h||0),i},periodsToSeconds:function(a){return 31557600*a[0]+2629800*a[1]+604800*a[2]+86400*a[3]+3600*a[4]+60*a[5]+a[6]},resync:function(){var b=this;a("."+this._getMarker()).each(function(){var c=a.data(this,b.name);if(c.options.serverSync){for(var d=null,e=0;e<b._serverSyncs.length;e++)if(b._serverSyncs[e][0]==c.options.serverSync){d=b._serverSyncs[e];break}if(null==d[2]){var f=a.isFunction(c.options.serverSync)?c.options.serverSync.apply(this,[]):null;d[2]=(f?(new Date).getTime()-f.getTime():0)-d[1]}c._since&&c._since.setMilliseconds(c._since.getMilliseconds()+d[2]),c._until.setMilliseconds(c._until.getMilliseconds()+d[2])}});for(var c=0;c<b._serverSyncs.length;c++)null!=b._serverSyncs[c][2]&&(b._serverSyncs[c][1]+=b._serverSyncs[c][2],delete b._serverSyncs[c][2])},_instSettings:function(a,b){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(a){this._hasElem(a)||this._timerElems.push(a)},_hasElem:function(b){return a.inArray(b,this._timerElems)>-1},_removeElem:function(b){this._timerElems=a.map(this._timerElems,function(a){return a==b?null:a})},_updateElems:function(){for(var a=this._timerElems.length-1;a>=0;a--)this._updateCountdown(this._timerElems[a])},_optionsChanged:function(b,c,d){d.layout&&(d.layout=d.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(c.options,d);var e=c.options.timezone!=d.timezone;a.extend(c.options,d),this._adjustSettings(b,c,null!=d.until||null!=d.since||e);var f=new Date;(c._since&&c._since<f||c._until&&c._until>f)&&this._addElem(b[0]),this._updateCountdown(b,c)},_updateCountdown:function(b,c){if(b=b.jquery?b:a(b),c=c||this._getInst(b)){if(b.html(this._generateHTML(c)).toggleClass(this._rtlClass,c.options.isRTL),a.isFunction(c.options.onTick)){var d="lap"!=c._hold?c._periods:this._calculatePeriods(c,c._show,c.options.significant,new Date);1!=c.options.tickInterval&&this.periodsToSeconds(d)%c.options.tickInterval!=0||c.options.onTick.apply(b[0],[d])}var e="pause"!=c._hold&&(c._since?c._now.getTime()<c._since.getTime():c._now.getTime()>=c._until.getTime());if(e&&!c._expiring){if(c._expiring=!0,this._hasElem(b[0])||c.options.alwaysExpire){if(this._removeElem(b[0]),a.isFunction(c.options.onExpiry)&&c.options.onExpiry.apply(b[0],[]),c.options.expiryText){var f=c.options.layout;c.options.layout=c.options.expiryText,this._updateCountdown(b[0],c),c.options.layout=f}c.options.expiryUrl&&(window.location=c.options.expiryUrl)}c._expiring=!1}else"pause"==c._hold&&this._removeElem(b[0])}},_resetExtraLabels:function(a,b){for(var c in b)c.match(/[Ll]abels[02-9]|compactLabels1/)&&(a[c]=b[c]);for(var c in a)c.match(/[Ll]abels[02-9]|compactLabels1/)&&"undefined"==typeof b[c]&&(a[c]=null)},_adjustSettings:function(b,c,d){for(var e=null,f=0;f<this._serverSyncs.length;f++)if(this._serverSyncs[f][0]==c.options.serverSync){e=this._serverSyncs[f][1];break}if(null!=e)var g=c.options.serverSync?e:0,h=new Date;else{var i=a.isFunction(c.options.serverSync)?c.options.serverSync.apply(b[0],[]):null,h=new Date,g=i?h.getTime()-i.getTime():0;this._serverSyncs.push([c.options.serverSync,g])}var j=c.options.timezone;j=null==j?-h.getTimezoneOffset():j,(d||!d&&null==c._until&&null==c._since)&&(c._since=c.options.since,null!=c._since&&(c._since=this.UTCDate(j,this._determineTime(c._since,null)),c._since&&g&&c._since.setMilliseconds(c._since.getMilliseconds()+g)),c._until=this.UTCDate(j,this._determineTime(c.options.until,h)),g&&c._until.setMilliseconds(c._until.getMilliseconds()+g)),c._show=this._determineShow(c)},_preDestroy:function(a,b){this._removeElem(a[0]),a.empty()},pause:function(a){this._hold(a,"pause")},lap:function(a){this._hold(a,"lap")},resume:function(a){this._hold(a,null)},toggle:function(b){var c=a.data(b,this.name)||{};this[c._hold?"resume":"pause"](b)},toggleLap:function(b){var c=a.data(b,this.name)||{};this[c._hold?"resume":"lap"](b)},_hold:function(b,c){var d=a.data(b,this.name);if(d){if("pause"==d._hold&&!c){d._periods=d._savePeriods;var e=d._since?"-":"+";d[d._since?"_since":"_until"]=this._determineTime(e+d._periods[0]+"y"+e+d._periods[1]+"o"+e+d._periods[2]+"w"+e+d._periods[3]+"d"+e+d._periods[4]+"h"+e+d._periods[5]+"m"+e+d._periods[6]+"s"),this._addElem(b)}d._hold=c,d._savePeriods="pause"==c?d._periods:null,a.data(b,this.name,d),this._updateCountdown(b,d)}},getTimes:function(b){var c=a.data(b,this.name);return c?"pause"==c._hold?c._savePeriods:c._hold?this._calculatePeriods(c,c._show,c.options.significant,new Date):c._periods:null},_determineTime:function(a,b){var c=this,d=function(a){var b=new Date;return b.setTime(b.getTime()+1e3*a),b},e=function(a){a=a.toLowerCase();for(var b=new Date,d=b.getFullYear(),e=b.getMonth(),f=b.getDate(),g=b.getHours(),h=b.getMinutes(),i=b.getSeconds(),j=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,k=j.exec(a);k;){switch(k[2]||"s"){case"s":i+=parseInt(k[1],10);break;case"m":h+=parseInt(k[1],10);break;case"h":g+=parseInt(k[1],10);break;case"d":f+=parseInt(k[1],10);break;case"w":f+=7*parseInt(k[1],10);break;case"o":e+=parseInt(k[1],10),f=Math.min(f,c._getDaysInMonth(d,e));break;case"y":d+=parseInt(k[1],10),f=Math.min(f,c._getDaysInMonth(d,e))}k=j.exec(a)}return new Date(d,e,f,g,h,i,0)},f=null==a?b:"string"==typeof a?e(a):"number"==typeof a?d(a):a;return f&&f.setMilliseconds(0),f},_getDaysInMonth:function(a,b){return 32-new Date(a,b,32).getDate()},_normalLabels:function(a){return a},_generateHTML:function(b){var j=this;b._periods=b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date);for(var k=!1,l=0,m=b.options.significant,n=a.extend({},b._show),o=c;o<=i;o++)k|="?"==b._show[o]&&b._periods[o]>0,n[o]="?"!=b._show[o]||k?b._show[o]:null,l+=n[o]?1:0,m-=b._periods[o]>0?1:0;for(var p=[!1,!1,!1,!1,!1,!1,!1],o=i;o>=c;o--)b._show[o]&&(b._periods[o]?p[o]=!0:(p[o]=m>0,m--));var q=b.options.compact?b.options.compactLabels:b.options.labels,r=b.options.whichLabels||this._normalLabels,s=function(a){var c=b.options["compactLabels"+r(b._periods[a])];return n[a]?j._translateDigits(b,b._periods[a])+(c?c[a]:q[a])+" ":""},t=b.options.padZeroes?2:1,u=function(a){var c=b.options["labels"+r(b._periods[a])];return!b.options.significant&&n[a]||b.options.significant&&p[a]?'<span class="'+j._sectionClass+'"><span class="'+j._amountClass+'">'+j._minDigits(b,b._periods[a],t)+'</span><span class="'+j._periodClass+'">'+(c?c[a]:q[a])+"</span></span>":""};return b.options.layout?this._buildLayout(b,n,b.options.layout,b.options.compact,b.options.significant,p):(b.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(b._hold?" "+this._holdingClass:"")+'">'+s(c)+s(d)+s(e)+s(f)+(n[g]?this._minDigits(b,b._periods[g],2):"")+(n[h]?(n[g]?b.options.timeSeparator:"")+this._minDigits(b,b._periods[h],2):"")+(n[i]?(n[g]||n[h]?b.options.timeSeparator:"")+this._minDigits(b,b._periods[i],2):""):'<span class="'+this._rowClass+" "+this._showClass+(b.options.significant||l)+(b._hold?" "+this._holdingClass:"")+'">'+u(c)+u(d)+u(e)+u(f)+u(g)+u(h)+u(i))+"</span>"+(b.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+b.options.description+"</span>":"")},_buildLayout:function(b,j,k,l,m,n){for(var o=b.options[l?"compactLabels":"labels"],p=b.options.whichLabels||this._normalLabels,q=function(a){return(b.options[(l?"compactLabels":"labels")+p(b._periods[a])]||o)[a]},r=function(a,c){return b.options.digits[Math.floor(a/c)%10]},s={desc:b.options.description,sep:b.options.timeSeparator,yl:q(c),yn:this._minDigits(b,b._periods[c],1),ynn:this._minDigits(b,b._periods[c],2),ynnn:this._minDigits(b,b._periods[c],3),y1:r(b._periods[c],1),y10:r(b._periods[c],10),y100:r(b._periods[c],100),y1000:r(b._periods[c],1e3),ol:q(d),on:this._minDigits(b,b._periods[d],1),onn:this._minDigits(b,b._periods[d],2),onnn:this._minDigits(b,b._periods[d],3),o1:r(b._periods[d],1),o10:r(b._periods[d],10),o100:r(b._periods[d],100),o1000:r(b._periods[d],1e3),wl:q(e),wn:this._minDigits(b,b._periods[e],1),wnn:this._minDigits(b,b._periods[e],2),wnnn:this._minDigits(b,b._periods[e],3),w1:r(b._periods[e],1),w10:r(b._periods[e],10),w100:r(b._periods[e],100),w1000:r(b._periods[e],1e3),dl:q(f),dn:this._minDigits(b,b._periods[f],1),dnn:this._minDigits(b,b._periods[f],2),dnnn:this._minDigits(b,b._periods[f],3),d1:r(b._periods[f],1),d10:r(b._periods[f],10),d100:r(b._periods[f],100),d1000:r(b._periods[f],1e3),hl:q(g),hn:this._minDigits(b,b._periods[g],1),hnn:this._minDigits(b,b._periods[g],2),hnnn:this._minDigits(b,b._periods[g],3),h1:r(b._periods[g],1),h10:r(b._periods[g],10),h100:r(b._periods[g],100),h1000:r(b._periods[g],1e3),ml:q(h),mn:this._minDigits(b,b._periods[h],1),mnn:this._minDigits(b,b._periods[h],2),mnnn:this._minDigits(b,b._periods[h],3),m1:r(b._periods[h],1),m10:r(b._periods[h],10),m100:r(b._periods[h],100),m1000:r(b._periods[h],1e3),sl:q(i),sn:this._minDigits(b,b._periods[i],1),snn:this._minDigits(b,b._periods[i],2),snnn:this._minDigits(b,b._periods[i],3),s1:r(b._periods[i],1),s10:r(b._periods[i],10),s100:r(b._periods[i],100),s1000:r(b._periods[i],1e3)},t=k,u=c;u<=i;u++){var v="yowdhms".charAt(u),w=new RegExp("\\{"+v+"<\\}([\\s\\S]*)\\{"+v+">\\}","g");t=t.replace(w,!m&&j[u]||m&&n[u]?"$1":"")}return a.each(s,function(a,b){var c=new RegExp("\\{"+a+"\\}","g");t=t.replace(c,b)}),t},_minDigits:function(a,b,c){return b=""+b,b.length>=c?this._translateDigits(a,b):(b="0000000000"+b,this._translateDigits(a,b.substr(b.length-c)))},_translateDigits:function(a,b){return(""+b).replace(/[0-9]/g,function(b){return a.options.digits[b]})},_determineShow:function(a){var b=a.options.format,j=[];return j[c]=b.match("y")?"?":b.match("Y")?"!":null,j[d]=b.match("o")?"?":b.match("O")?"!":null,j[e]=b.match("w")?"?":b.match("W")?"!":null,j[f]=b.match("d")?"?":b.match("D")?"!":null,j[g]=b.match("h")?"?":b.match("H")?"!":null,j[h]=b.match("m")?"?":b.match("M")?"!":null,j[i]=b.match("s")?"?":b.match("S")?"!":null,j},_calculatePeriods:function(a,b,j,k){a._now=k,a._now.setMilliseconds(0);var l=new Date(a._now.getTime());a._since?k.getTime()<a._since.getTime()?a._now=k=l:k=a._since:(l.setTime(a._until.getTime()),k.getTime()>a._until.getTime()&&(a._now=k=l));var m=[0,0,0,0,0,0,0];if(b[c]||b[d]){var n=this._getDaysInMonth(k.getFullYear(),k.getMonth()),o=this._getDaysInMonth(l.getFullYear(),l.getMonth()),p=l.getDate()==k.getDate()||l.getDate()>=Math.min(n,o)&&k.getDate()>=Math.min(n,o),q=function(a){return 60*(60*a.getHours()+a.getMinutes())+a.getSeconds()},r=Math.max(0,12*(l.getFullYear()-k.getFullYear())+l.getMonth()-k.getMonth()+(l.getDate()<k.getDate()&&!p||p&&q(l)<q(k)?-1:0));m[c]=b[c]?Math.floor(r/12):0,m[d]=b[d]?r-12*m[c]:0,k=new Date(k.getTime());var s=k.getDate()==n,t=this._getDaysInMonth(k.getFullYear()+m[c],k.getMonth()+m[d]);k.getDate()>t&&k.setDate(t),k.setFullYear(k.getFullYear()+m[c]),k.setMonth(k.getMonth()+m[d]),s&&k.setDate(t)}var u=Math.floor((l.getTime()-k.getTime())/1e3),v=function(a,c){m[a]=b[a]?Math.floor(u/c):0,u-=m[a]*c};if(v(e,604800),v(f,86400),v(g,3600),v(h,60),v(i,1),u>0&&!a._since)for(var w=[1,12,4.3482,7,24,60,60],x=i,y=1,z=i;z>=c;z--)b[z]&&(m[x]>=y&&(m[x]=0,u=1),u>0&&(m[z]++,u=0,x=z,y=1)),y*=w[z];if(j)for(var z=c;z<=i;z++)j&&m[z]?j--:j||(m[z]=0);return m}})}(jQuery),function(a){isIE()&&isIE()<11&&(include("/static/public/js/pointer-events.js"),a("html").addClass("lt-ie11"),a(document).ready(function(){PointerEventsPolyfill.initialize({})}))}(jQuery),function(a){var b=a("html");b.hasClass("desktop")&&(include("/static/public/js/tmstickup.js"),a(document).ready(function(){a("#stuck_container").TMStickUp({})}))}(jQuery),function(a){var b=a("html");b.hasClass("desktop")&&(include("/static/public/js/jquery.ui.totop.js"),a(document).ready(function(){a().UItoTop({easingType:"easeOutQuart",containerClass:"toTop fa-arrow-up"})}))}(jQuery),function(a){var b=a("[data-equal-group]");b.length>0&&include("/static/public/js/jquery.equalheights.js")}(jQuery),function(a){var b=a("html");(navigator.userAgent.toLowerCase().indexOf("msie")==-1||isIE()&&isIE()>9)&&b.hasClass("desktop")&&(include("/static/public/js/wow.js"),a(document).ready(function(){(new WOW).init()}))}(jQuery),$(function(){var a=document.querySelector&&document.querySelector('meta[name="viewport"]'),b=navigator.userAgent,c=function(){a.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6, initial-scale=1.0"},d=function(){a&&/iPhone|iPad/.test(b)&&!/Opera Mini/.test(b)&&(a.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",document.addEventListener("gesturestart",c,!1))};if(d(),void 0!=window.orientation){var e=/ipod|ipad|iphone/gi,f=b.match(e);f||$(".sf-menus li").each(function(){$(">ul",this)[0]&&$(">a",this).toggle(function(){return!1},function(){window.location.href=$(this).attr("href")})})}});var ua=navigator.userAgent.toLocaleLowerCase(),regV=/ipod|ipad|iphone/gi,result=ua.match(regV),userScale="";result||(userScale=",user-scalable=0"),document.write('<meta name="viewport" content="width=device-width,initial-scale=1.0'+userScale+'">'),function(a){var b=a("#camera");b.length>0&&(isIE()&&isIE()>9||include("/static/public/js/jquery.mobile.customized.min.js"))}(jQuery),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.mapboxgl=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){var b=a.layoutVertexArrayType;this.layoutVertexArray=new b;var c=a.elementArrayType;c&&(this.elementArray=new c);var d=a.elementArrayType2;d&&(this.elementArray2=new d),this.paintVertexArrays=e.mapObject(a.paintVertexArrayTypes,function(a){return new a})}var e=a("../util/util");b.exports=d,d.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,d.prototype.hasCapacityFor=function(a){return this.layoutVertexArray.length+a<=d.MAX_VERTEX_ARRAY_LENGTH},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.trim=function(){this.layoutVertexArray.trim(),this.elementArray&&this.elementArray.trim(),this.elementArray2&&this.elementArray2.trim();for(var a in this.paintVertexArrays)this.paintVertexArrays[a].trim()},d.prototype.serialize=function(){return{layoutVertexArray:this.layoutVertexArray.serialize(),elementArray:this.elementArray&&this.elementArray.serialize(),elementArray2:this.elementArray2&&this.elementArray2.serialize(),paintVertexArrays:e.mapObject(this.paintVertexArrays,function(a){return a.serialize()})}},d.prototype.getTransferables=function(a){a.push(this.layoutVertexArray.arrayBuffer),this.elementArray&&a.push(this.elementArray.arrayBuffer),this.elementArray2&&a.push(this.elementArray2.arrayBuffer);for(var b in this.paintVertexArrays)a.push(this.paintVertexArrays[b].arrayBuffer)}},{"../util/util":122}],2:[function(a,b,c){"use strict";function d(a){if(this.zoom=a.zoom,this.overscaling=a.overscaling,this.layer=a.layer,this.childLayers=a.childLayers,this.type=this.layer.type,this.features=[],this.id=this.layer.id,this.index=a.index,this.sourceLayer=this.layer.sourceLayer,this.sourceLayerIndex=a.sourceLayerIndex,this.minZoom=this.layer.minzoom,this.maxZoom=this.layer.maxzoom,this.paintAttributes=e(this),a.arrays){var b=this.programInterfaces;this.bufferGroups=j.mapObject(a.arrays,function(c,d){var e=b[d],f=a.paintVertexArrayTypes[d];return c.map(function(a){return new i(a,{layoutVertexArrayType:e.layoutVertexArrayType.serialize(),elementArrayType:e.elementArrayType&&e.elementArrayType.serialize(),elementArrayType2:e.elementArrayType2&&e.elementArrayType2.serialize(),paintVertexArrayTypes:f})})})}}function e(a){var b={};for(var c in a.programInterfaces){for(var d=b[c]={},e=0;e<a.childLayers.length;e++){var h=a.childLayers[e];d[h.id]={attributes:[],uniforms:[],defines:[],vertexPragmas:{define:{},initialize:{}},fragmentPragmas:{define:{},initialize:{}}}}var i=a.programInterfaces[c];if(i.paintAttributes)for(var k="{precision}",l="{type}",m=0;m<i.paintAttributes.length;m++){var n=i.paintAttributes[m];n.multiplier=n.multiplier||1;for(var o=0;o<a.childLayers.length;o++){var p,q=a.childLayers[o],r=d[q.id],s=n.name,t=n.name.slice(2);if(r.fragmentPragmas.initialize[t]="",q.isPaintValueFeatureConstant(n.paintProperty))r.uniforms.push(n),r.fragmentPragmas.define[t]=r.vertexPragmas.define[t]=["uniform",k,l,s].join(" ")+";",r.fragmentPragmas.initialize[t]=r.vertexPragmas.initialize[t]=[k,l,t,"=",s].join(" ")+";\n";else if(q.isPaintValueZoomConstant(n.paintProperty)){r.attributes.push(j.extend({},n,{name:s})),p=["varying",k,l,t].join(" ")+";\n";var u=[r.fragmentPragmas.define[t],"attribute",k,l,s].join(" ")+";\n";r.fragmentPragmas.define[t]=p,r.vertexPragmas.define[t]=p+u,r.vertexPragmas.initialize[t]=[t,"=",s,"/",n.multiplier.toFixed(1)].join(" ")+";\n"}else{for(var v="u_"+s.slice(2)+"_t",w=q.getPaintValueStopZoomLevels(n.paintProperty),x=0;x<w.length&&w[x]<a.zoom;)x++;for(var y=Math.max(0,Math.min(w.length-4,x-2)),z=[],A=0;A<4;A++)z.push(w[Math.min(y+A,w.length-1)]);p=["varying",k,l,t].join(" ")+";\n",r.vertexPragmas.define[t]=p+["uniform","lowp","float",v].join(" ")+";\n",r.fragmentPragmas.define[t]=p,r.uniforms.push(j.extend({},n,{name:v,getValue:g(n,y),components:1}));var B=n.components;if(1===B)r.attributes.push(j.extend({},n,{getValue:f(n,z),isFunction:!0,components:4*B})),r.vertexPragmas.define[t]+=["attribute",k,"vec4",s].join(" ")+";\n",r.vertexPragmas.initialize[t]=[t,"=","evaluate_zoom_function_1("+s+", "+v+")","/",n.multiplier.toFixed(1)].join(" ")+";\n";else{for(var C=[],D=0;D<4;D++)C.push(s+D),r.attributes.push(j.extend({},n,{getValue:f(n,[z[D]]),isFunction:!0,name:s+D})),r.vertexPragmas.define[t]+=["attribute",k,l,s+D].join(" ")+";\n";r.vertexPragmas.initialize[t]=[t," = ","evaluate_zoom_function_4("+C.join(", ")+", "+v+")","/",n.multiplier.toFixed(1)].join(" ")+";\n"}}}}}return b}function f(a,b){return function(c,d,e){if(1===b.length)return a.getValue(c,j.extend({},d,{zoom:b[0]}),e);for(var f=[],g=0;g<b.length;g++){var h=b[g];f.push(a.getValue(c,j.extend({},d,{zoom:h}),e)[0])}return f}}function g(a,b){return function(c,d){var e=c.getPaintInterpolationT(a.paintProperty,d.zoom);return[Math.max(0,Math.min(4,e-b))]}}var h=a("./array_group"),i=a("./buffer_group"),j=a("../util/util"),k=a("../util/struct_array");b.exports=d,d.create=function(b){var c={fill:a("./bucket/fill_bucket"),fillextrusion:a("./bucket/fill_extrusion_bucket"),line:a("./bucket/line_bucket"),circle:a("./bucket/circle_bucket"),symbol:a("./bucket/symbol_bucket")},d=b.layer.type;return"fill"!==d||b.layer.isPaintValueFeatureConstant("fill-extrude-height")&&b.layer.isPaintValueZoomConstant("fill-extrude-height")&&0===b.layer.getPaintValue("fill-extrude-height")||(d="fillextrusion"),new c[d](b)},d.EXTENT=8192,d.prototype.populateArrays=function(){this.createArrays(),this.recalculateStyleLayers();for(var a=0;a<this.features.length;a++)this.addFeature(this.features[a]);this.trimArrays()},d.prototype.prepareArrayGroup=function(a,b){var c=this.arrayGroups[a],d=c.length&&c[c.length-1];return d&&d.hasCapacityFor(b)||(d=new h({layoutVertexArrayType:this.programInterfaces[a].layoutVertexArrayType,elementArrayType:this.programInterfaces[a].elementArrayType,elementArrayType2:this.programInterfaces[a].elementArrayType2,paintVertexArrayTypes:this.paintVertexArrayTypes[a]}),d.index=c.length,c.push(d)),d},d.prototype.createArrays=function(){this.arrayGroups={},this.paintVertexArrayTypes={};for(var a in this.programInterfaces){this.arrayGroups[a]=[];var b=this.paintVertexArrayTypes[a]={},c=this.paintAttributes[a];for(var e in c)b[e]=new d.VertexArrayType(c[e].attributes)}},d.prototype.destroy=function(){for(var a in this.bufferGroups)for(var b=this.bufferGroups[a],c=0;c<b.length;c++)b[c].destroy()},d.prototype.trimArrays=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)b[c].trim()},d.prototype.isEmpty=function(){for(var a in this.arrayGroups)for(var b=this.arrayGroups[a],c=0;c<b.length;c++)if(!b[c].isEmpty())return!1;return!0},d.prototype.getTransferables=function(a){for(var b in this.arrayGroups)for(var c=this.arrayGroups[b],d=0;d<c.length;d++)c[d].getTransferables(a)},d.prototype.setUniforms=function(a,b,c,d,e){for(var f=this.paintAttributes[b][d.id].uniforms,g=0;g<f.length;g++){var h=f[g],i=c[h.name];a["uniform"+h.components+"fv"](i,h.getValue(d,e))}},d.prototype.serialize=function(){return{layerId:this.layer.id,zoom:this.zoom,arrays:j.mapObject(this.arrayGroups,function(a){return a.map(function(a){return a.serialize()})}),paintVertexArrayTypes:j.mapObject(this.paintVertexArrayTypes,function(a){return j.mapObject(a,function(a){return a.serialize()})}),childLayerIds:this.childLayers.map(function(a){return a.id})}};var l={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};d.prototype.recalculateStyleLayers=function(){for(var a=0;a<this.childLayers.length;a++)this.childLayers[a].recalculate(this.zoom,l)},d.prototype.populatePaintArrays=function(a,b,c,d,e){for(var f=0;f<this.childLayers.length;f++)for(var g=this.childLayers[f],h=this.arrayGroups[a],i=d.index;i<h.length;i++){var j=h[i],k=j.layoutVertexArray.length,l=j.paintVertexArrays[g.id];l.resize(k);for(var m=this.paintAttributes[a][g.id].attributes,n=0;n<m.length;n++)for(var o=m[n],p=o.getValue(g,b,c),q=o.multiplier||1,r=o.components||1,s=i===d.index?e:0,t=s;t<k;t++)for(var u=l.get(t),v=0;v<r;v++){var w=r>1?o.name+v:o.name;u[w]=p[v]*q}}},d.VertexArrayType=function(a){return new k({members:a,alignment:4})},d.ElementArrayType=function(a){return new k({members:[{type:"Uint16",name:"vertices",components:a||3}]})}},{"../util/struct_array":120,"../util/util":122,"./array_group":1,"./bucket/circle_bucket":3,"./bucket/fill_bucket":4,"./bucket/fill_extrusion_bucket":5,"./bucket/line_bucket":6,"./bucket/symbol_bucket":7,"./buffer_group":9}],3:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addCircleVertex=function(a,b,c,d,e){return a.emplaceBack(2*b+(d+1)/2,2*c+(e+1)/2)},d.prototype.programInterfaces={circle:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new e.ElementArrayType,paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("circle-color",b,c)},multiplier:255,paintProperty:"circle-color"},{name:"a_radius",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-radius",b,c)]},multiplier:10,paintProperty:"circle-radius"},{name:"a_blur",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-blur",b,c)]},multiplier:10,paintProperty:"circle-blur"},{name:"a_opacity",components:1,type:"Uint16",isLayerConstant:!1,getValue:function(a,b,c){return[a.getPaintValue("circle-opacity",b,c)]},multiplier:255,paintProperty:"circle-opacity"}]}},d.prototype.addFeature=function(a){for(var b={zoom:this.zoom},c=g(a),d=this.prepareArrayGroup("circle",0),e=d.layoutVertexArray.length,f=0;f<c.length;f++)for(var i=0;i<c[f].length;i++){var j=c[f][i].x,k=c[f][i].y;if(!(j<0||j>=h||k<0||k>=h)){var l=this.prepareArrayGroup("circle",4),m=l.layoutVertexArray,n=this.addCircleVertex(m,j,k,-1,-1);this.addCircleVertex(m,j,k,1,-1),this.addCircleVertex(m,j,k,1,1),this.addCircleVertex(m,j,k,-1,1),l.elementArray.emplaceBack(n,n+1,n+2),l.elementArray.emplaceBack(n,n+3,n+2)}}this.populatePaintArrays("circle",b,a.properties,d,e)}},{"../../util/util":122,"../bucket":2,"../load_geometry":11}],4:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}function e(a){return a instanceof k?[a.x,a.y]:a.map(e)}var f=a("../bucket"),g=a("../../util/util"),h=a("../load_geometry"),i=a("earcut"),j=a("../../util/classify_rings"),k=a("point-geometry"),l=500;b.exports=d,d.prototype=g.inherit(f,{}),d.prototype.programInterfaces={fill:{layoutVertexArrayType:new f.VertexArrayType([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:new f.ElementArrayType(1),elementArrayType2:new f.ElementArrayType(2),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-color",b,c)},multiplier:255,paintProperty:"fill-color"},{name:"a_outline_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("fill-outline-color",b,c)},multiplier:255,paintProperty:"fill-outline-color"},{name:"a_opacity",components:1,type:"Uint8",getValue:function(a,b,c){return[a.getPaintValue("fill-opacity",b,c)]},multiplier:255,paintProperty:"fill-opacity"}]}},d.prototype.addVertex=function(a,b,c){return a.emplaceBack(b,c)},d.prototype.addFeature=function(a){var b=h(a),c=e(j(b,l));this.factor=Math.pow(2,13);for(var d=this.prepareArrayGroup("fill",0),f=d.layoutVertexArray.length,g=0;g<c.length;g++)this.addPolygon(c[g]);this.populatePaintArrays("fill",{zoom:this.zoom},a.properties,d,f)},d.prototype.addPolygon=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].length;for(var d=this.prepareArrayGroup("fill",b),e=[],f=[],g=d.layoutVertexArray.length,h=[],j=0;j<a.length;j++){var k=a[j];j>0&&f.push(e.length/2);for(var l=0;l<k.length;l++){var m=k[l],n=this.addVertex(d.layoutVertexArray,m[0],m[1],0,0,1,1,0);h.push(n),l>=1&&d.elementArray2.emplaceBack(n-1,n),e.push(m[0]),e.push(m[1])}}for(var o=i(e,f),p=0;p<o.length;p++)d.elementArray.emplaceBack(o[p]+g)}},{"../../util/classify_rings":108,"../../util/util":122,"../bucket":2,"../load_geometry":11,earcut:137,"point-geometry":192}],5:[function(a,b,c){"use strict";function d(){h.apply(this,arguments)}function e(a){return a instanceof m?[a.x,a.y]:a.map(e)}function f(a,b){return a.some(function(a,c){return g(b[c])&&b[c]===a})}function g(a){return a<0||a>h.EXTENT}var h=a("../bucket"),i=a("../../util/util"),j=a("../load_geometry"),k=a("earcut"),l=a("../../util/classify_rings"),m=a("point-geometry"),n=500;b.exports=d,d.prototype=i.inherit(h,{}),d.prototype.programInterfaces={fillextrusion:{layoutVertexArrayType:new h.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}]),elementArrayType:new h.ElementArrayType(3),paintAttributes:[{name:"a_minH",components:1,type:"Uint16",getValue:function(a,b,c){return[a.getPaintValue("fill-extrude-base",b,c)]},multiplier:1,paintProperty:"fill-extrude-base"},{name:"a_maxH",components:1,type:"Uint16",getValue:function(a,b,c){return[a.getPaintValue("fill-extrude-height",b,c)]},multiplier:1,paintProperty:"fill-extrude-height"},{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){var d=a.getPaintValue("fill-color",b,c);return d[3]=1,d},multiplier:255,paintProperty:"fill-color"}]}},d.prototype.addVertex=function(a,b,c,d,e,f,g,h){return a.emplaceBack(b,c,2*Math.floor(d*this.factor)+g,e*this.factor*2,f*this.factor*2,Math.round(h))},d.prototype.addFeature=function(a){var b=j(a),c=e(l(b,n));this.factor=Math.pow(2,13);for(var d=this.prepareArrayGroup("fillextrusion",0),f=d.layoutVertexArray.length,g=0;g<c.length;g++)this.addPolygon(c[g]);this.populatePaintArrays("fillextrusion",{zoom:this.zoom},a.properties,d,f)},d.prototype.addPolygon=function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].length;b*=5;for(var d=this.prepareArrayGroup("fillextrusion",b),e=[],g=[],h=[],i=0;i<a.length;i++){var j=a[i];i>0&&g.push(e.length/2);for(var l=0,n=0;n<j.length;n++){var o=j[n],p=this.addVertex(d.layoutVertexArray,o[0],o[1],0,0,1,1,0);if(h.push(p),n>=1){var q=j[n-1];if(!f(o,q)){var r=m.convert(o)._sub(m.convert(q))._perp()._unit(),s=this.addVertex(d.layoutVertexArray,o[0],o[1],r.x,r.y,0,0,l);this.addVertex(d.layoutVertexArray,o[0],o[1],r.x,r.y,0,1,l),l+=m.convert(q).dist(m.convert(o)),this.addVertex(d.layoutVertexArray,q[0],q[1],r.x,r.y,0,0,l),this.addVertex(d.layoutVertexArray,q[0],q[1],r.x,r.y,0,1,l),d.elementArray.emplaceBack(s,s+1,s+2),d.elementArray.emplaceBack(s+1,s+2,s+3)}}e.push(o[0]),e.push(o[1])}}for(var t=k(e,g),u=0;u<t.length-2;u+=3)d.elementArray.emplaceBack(h[t[u]],h[t[u+1]],h[t[u+2]])}},{"../../util/classify_rings":108,"../../util/util":122,"../bucket":2,"../load_geometry":11,earcut:137,"point-geometry":192}],6:[function(a,b,c){"use strict";function d(){e.apply(this,arguments)}var e=a("../bucket"),f=a("../../util/util"),g=a("../load_geometry"),h=e.EXTENT,i=63,j=Math.cos(37.5*(Math.PI/180)),k=15,l=15,m=.5,n=Math.pow(2,l-1)/m;b.exports=d,d.prototype=f.inherit(e,{}),d.prototype.addLineVertex=function(a,b,c,d,e,f,g){return a.emplaceBack(b.x<<1|d,b.y<<1|e,Math.round(i*c.x)+128,Math.round(i*c.y)+128,(0===f?0:f<0?-1:1)+1|(g*m&63)<<2,g*m>>6)},d.prototype.programInterfaces={line:{layoutVertexArrayType:new e.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),paintAttributes:[{name:"a_color",components:4,type:"Uint8",getValue:function(a,b,c){return a.getPaintValue("line-color",b,c)},multiplier:255,paintProperty:"line-color"}],elementArrayType:new e.ElementArrayType}},d.prototype.addFeature=function(a){for(var b=g(a,l),c=0;c<b.length;c++)this.addLine(b[c],a.properties,this.layer.layout["line-join"],this.layer.layout["line-cap"],this.layer.layout["line-miter-limit"],this.layer.layout["line-round-limit"])},d.prototype.addLine=function(a,b,c,d,e,f){for(var g=a.length;g>2&&a[g-1].equals(a[g-2]);)g--;if(!(a.length<2)){"bevel"===c&&(e=1.05);var i=k*(h/(512*this.overscaling)),l=a[0],m=a[g-1],n=l.equals(m),o=this.prepareArrayGroup("line",10*g),p=o.layoutVertexArray.length;if(2!==g||!n){this.distance=0;var q,r,s,t,u,v,w,x=d,y=n?"butt":d,z=!0;this.e1=this.e2=this.e3=-1,
n&&(q=a[g-2],u=l.sub(q)._unit()._perp());for(var A=0;A<g;A++)if(s=n&&A===g-1?a[1]:a[A+1],!s||!a[A].equals(s)){u&&(t=u),q&&(r=q),q=a[A],u=s?s.sub(q)._unit()._perp():t,t=t||u;var B=t.add(u)._unit(),C=B.x*u.x+B.y*u.y,D=1/C,E=C<j&&r&&s;if(E&&A>0){var F=q.dist(r);if(F>2*i){var G=q.sub(q.sub(r)._mult(i/F)._round());this.distance+=G.dist(r),this.addCurrentVertex(G,this.distance,t.mult(1),0,0,!1),r=G}}var H=r&&s,I=H?c:s?x:y;if(H&&"round"===I&&(D<f?I="miter":D<=2&&(I="fakeround")),"miter"===I&&D>e&&(I="bevel"),"bevel"===I&&(D>2&&(I="flipbevel"),D<e&&(I="miter")),r&&(this.distance+=q.dist(r)),"miter"===I)B._mult(D),this.addCurrentVertex(q,this.distance,B,0,0,!1);else if("flipbevel"===I){if(D>100)B=u.clone();else{var J=t.x*u.y-t.y*u.x>0?-1:1,K=D*t.add(u).mag()/t.sub(u).mag();B._perp()._mult(K*J)}this.addCurrentVertex(q,this.distance,B,0,0,!1),this.addCurrentVertex(q,this.distance,B.mult(-1),0,0,!1)}else if("bevel"===I||"fakeround"===I){var L=t.x*u.y-t.y*u.x>0,M=-Math.sqrt(D*D-1);if(L?(w=0,v=M):(v=0,w=M),z||this.addCurrentVertex(q,this.distance,t,v,w,!1),"fakeround"===I){for(var N,O=Math.floor(8*(.5-(C-.5))),P=0;P<O;P++)N=u.mult((P+1)/(O+1))._add(t)._unit(),this.addPieSliceVertex(q,this.distance,N,L);this.addPieSliceVertex(q,this.distance,B,L);for(var Q=O-1;Q>=0;Q--)N=t.mult((Q+1)/(O+1))._add(u)._unit(),this.addPieSliceVertex(q,this.distance,N,L)}s&&this.addCurrentVertex(q,this.distance,u,-v,-w,!1)}else"butt"===I?(z||this.addCurrentVertex(q,this.distance,t,0,0,!1),s&&this.addCurrentVertex(q,this.distance,u,0,0,!1)):"square"===I?(z||(this.addCurrentVertex(q,this.distance,t,1,1,!1),this.e1=this.e2=-1),s&&this.addCurrentVertex(q,this.distance,u,-1,-1,!1)):"round"===I&&(z||(this.addCurrentVertex(q,this.distance,t,0,0,!1),this.addCurrentVertex(q,this.distance,t,1,1,!0),this.e1=this.e2=-1),s&&(this.addCurrentVertex(q,this.distance,u,-1,-1,!0),this.addCurrentVertex(q,this.distance,u,0,0,!1)));if(E&&A<g-1){var R=q.dist(s);if(R>2*i){var S=q.add(s.sub(q)._mult(i/R)._round());this.distance+=S.dist(q),this.addCurrentVertex(S,this.distance,u.mult(1),0,0,!1),q=S}}z=!1}this.populatePaintArrays("line",{zoom:this.zoom},b,o,p)}}},d.prototype.addCurrentVertex=function(a,b,c,d,e,f){var g,h=f?1:0,i=this.arrayGroups.line[this.arrayGroups.line.length-1],j=i.layoutVertexArray,k=i.elementArray;g=c.clone(),d&&g._sub(c.perp()._mult(d)),this.e3=this.addLineVertex(j,a,g,h,0,d,b),this.e1>=0&&this.e2>=0&&k.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,g=c.mult(-1),e&&g._sub(c.perp()._mult(e)),this.e3=this.addLineVertex(j,a,g,h,1,-e,b),this.e1>=0&&this.e2>=0&&k.emplaceBack(this.e1,this.e2,this.e3),this.e1=this.e2,this.e2=this.e3,b>n/2&&(this.distance=0,this.addCurrentVertex(a,this.distance,c,d,e,f))},d.prototype.addPieSliceVertex=function(a,b,c,d){var e=d?1:0;c=c.mult(d?-1:1);var f=this.arrayGroups.line[this.arrayGroups.line.length-1],g=f.layoutVertexArray,h=f.elementArray;this.e3=this.addLineVertex(g,a,c,0,e,0,b),this.e1>=0&&this.e2>=0&&h.emplaceBack(this.e1,this.e2,this.e3),d?this.e2=this.e3:this.e1=this.e3}},{"../../util/util":122,"../bucket":2,"../load_geometry":11}],7:[function(a,b,c){"use strict";function d(a){g.apply(this,arguments),this.showCollisionBoxes=a.showCollisionBoxes,this.overscaling=a.overscaling,this.collisionBoxArray=a.collisionBoxArray,this.symbolQuadsArray=a.symbolQuadsArray,this.symbolInstancesArray=a.symbolInstancesArray,this.sdfIcons=a.sdfIcons,this.iconsNeedLinear=a.iconsNeedLinear,this.adjustedTextSize=a.adjustedTextSize,this.adjustedIconSize=a.adjustedIconSize,this.fontstack=a.fontstack}function e(a,b,c,d,e,f,g,h,i,j,k){return a.emplaceBack(b,c,Math.round(64*d),Math.round(64*e),f/4,g/4,10*(j||0),k,10*(h||0),10*Math.min(i||25,25))}var f=a("point-geometry"),g=a("../bucket"),h=a("../../symbol/anchor"),i=a("../../symbol/get_anchors"),j=a("../../util/token"),k=a("../../symbol/quads"),l=a("../../symbol/shaping"),m=a("../../symbol/resolve_text"),n=a("../../symbol/mergelines"),o=a("../../symbol/clip_line"),p=a("../../util/util"),q=a("../load_geometry"),r=a("../../symbol/collision_feature"),s=a("../../util/find_pole_of_inaccessibility"),t=a("../../util/classify_rings"),u=l.shapeText,v=l.shapeIcon,w=k.getGlyphQuads,x=k.getIconQuads,y=g.EXTENT;b.exports=d,d.MAX_QUADS=65535,d.prototype=p.inherit(g,{}),d.prototype.serialize=function(){var a=g.prototype.serialize.apply(this);return a.sdfIcons=this.sdfIcons,a.iconsNeedLinear=this.iconsNeedLinear,a.adjustedTextSize=this.adjustedTextSize,a.adjustedIconSize=this.adjustedIconSize,a.fontstack=this.fontstack,a};var z=new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),A=new g.ElementArrayType;d.prototype.addCollisionBoxVertex=function(a,b,c,d,e){return a.emplaceBack(b.x,b.y,Math.round(c.x),Math.round(c.y),10*d,10*e)},d.prototype.programInterfaces={glyph:{layoutVertexArrayType:z,elementArrayType:A},icon:{layoutVertexArrayType:z,elementArrayType:A},collisionBox:{layoutVertexArrayType:new g.VertexArrayType([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}])}},d.prototype.populateArrays=function(a,b,c){var d={lastIntegerZoom:1/0,lastIntegerZoomTime:0,lastZoom:0};this.adjustedTextMaxSize=this.layer.getLayoutValue("text-size",{zoom:18,zoomHistory:d}),this.adjustedTextSize=this.layer.getLayoutValue("text-size",{zoom:this.zoom+1,zoomHistory:d}),this.adjustedIconMaxSize=this.layer.getLayoutValue("icon-size",{zoom:18,zoomHistory:d}),this.adjustedIconSize=this.layer.getLayoutValue("icon-size",{zoom:this.zoom+1,zoomHistory:d});var e=512*this.overscaling;this.tilePixelRatio=y/e,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var f=this.layer.layout,g=this.features,h=this.textFeatures,i=.5,k=.5;switch(f["text-anchor"]){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(f["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":k=1;break;case"top":case"top-right":case"top-left":k=0}for(var l="right"===f["text-justify"]?1:"left"===f["text-justify"]?0:.5,m=24,o=f["text-line-height"]*m,r="line"!==f["symbol-placement"]?f["text-max-width"]*m:0,s=f["text-letter-spacing"]*m,t=[f["text-offset"][0]*m,f["text-offset"][1]*m],w=this.fontstack=f["text-font"].join(","),x=[],z=0;z<g.length;z++)x.push(q(g[z]));if("line"===f["symbol-placement"]){var A=n(g,h,x);x=A.geometries,g=A.features,h=A.textFeatures}for(var B,C,D=0;D<g.length;D++)if(x[D]){if(B=h[D]?u(h[D],b[w],r,o,i,k,l,s,t):null,f["icon-image"]){var E=j(g[D].properties,f["icon-image"]),F=c[E];C=v(F,f),F&&(void 0===this.sdfIcons?this.sdfIcons=F.sdf:this.sdfIcons!==F.sdf&&p.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==F.pixelRatio?this.iconsNeedLinear=!0:0===f["icon-rotate"]&&this.layer.isLayoutValueFeatureConstant("icon-rotate")||(this.iconsNeedLinear=!0))}else C=null;(B||C)&&this.addFeature(x[D],B,C,g[D])}this.symbolInstancesEndIndex=this.symbolInstancesArray.length,this.placeFeatures(a,this.showCollisionBoxes),this.trimArrays()},d.prototype.addFeature=function(a,b,c,d){var e=this.layer.layout,f=24,g=this.adjustedTextSize/f,h=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,j=this.tilePixelRatio*g,k=this.tilePixelRatio*h/f,l=this.tilePixelRatio*this.adjustedIconSize,m=this.tilePixelRatio*e["symbol-spacing"],n=e["symbol-avoid-edges"],p=e["text-padding"]*this.tilePixelRatio,q=e["icon-padding"]*this.tilePixelRatio,r=e["text-max-angle"]/180*Math.PI,s="map"===e["text-rotation-alignment"]&&"line"===e["symbol-placement"],u="map"===e["icon-rotation-alignment"]&&"line"===e["symbol-placement"],v=e["text-allow-overlap"]||e["icon-allow-overlap"]||e["text-ignore-placement"]||e["icon-ignore-placement"],w=e["symbol-placement"],x="line"===w,z=m/2,A=null;A=x?o(a,0,0,y,y):t(a,0);for(var B=0;B<A.length;B++){var C=null,D=A[B],E=null;x?(E=D,C=i(E,m,r,b,c,f,k,this.overscaling,y)):(E=D[0],C=this.findPolygonAnchors(D));for(var F=0,G=C.length;F<G;F++){var H=C[F];if(!(b&&x&&this.anchorIsTooClose(b.text,z,H))){var I=!(H.x<0||H.x>y||H.y<0||H.y>y);if(!n||I){var J=I||v;this.addSymbolInstance(H,E,b,c,this.layer,J,this.symbolInstancesArray.length,this.collisionBoxArray,d.index,this.sourceLayerIndex,this.index,j,p,s,l,q,u,{zoom:this.zoom},d.properties)}}}}},d.prototype.findPolygonAnchors=function(a){var b=a[0];if(0===b.length)return[];if(b.length<3||!p.isClosedPolygon(b))return[new h(b[0].x,b[0].y,0)];var c=null,d=s(a,16);return c=[new h(d.x,d.y,0)]},d.prototype.anchorIsTooClose=function(a,b,c){var d=this.compareText;if(a in d){for(var e=d[a],f=e.length-1;f>=0;f--)if(c.dist(e[f])<b)return!0}else d[a]=[];return d[a].push(c),!1},d.prototype.placeFeatures=function(a,b){this.recalculateStyleLayers(),this.createArrays();var c=this.layer.layout,d=a.maxScale,e="map"===c["text-rotation-alignment"]&&"line"===c["symbol-placement"],f="map"===c["icon-rotation-alignment"]&&"line"===c["symbol-placement"],g=c["text-allow-overlap"]||c["icon-allow-overlap"]||c["text-ignore-placement"]||c["icon-ignore-placement"];if(g){var h=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),i=a.angle,j=Math.sin(i),k=Math.cos(i);this.sortedSymbolInstances=h.sort(function(a,b){var c=j*a.anchorPointX+k*a.anchorPointY|0,d=j*b.anchorPointX+k*b.anchorPointY|0;return c-d||b.index-a.index})}for(var l=this.symbolInstancesStartIndex;l<this.symbolInstancesEndIndex;l++){var m=this.sortedSymbolInstances?this.sortedSymbolInstances[l-this.symbolInstancesStartIndex]:this.symbolInstancesArray.get(l),n={boxStartIndex:m.textBoxStartIndex,boxEndIndex:m.textBoxEndIndex},o={boxStartIndex:m.iconBoxStartIndex,boxEndIndex:m.iconBoxEndIndex},p=!(m.textBoxStartIndex===m.textBoxEndIndex),q=!(m.iconBoxStartIndex===m.iconBoxEndIndex),r=c["text-optional"]||!p,s=c["icon-optional"]||!q,t=p?a.placeCollisionFeature(n,c["text-allow-overlap"],c["symbol-avoid-edges"]):a.minScale,u=q?a.placeCollisionFeature(o,c["icon-allow-overlap"],c["symbol-avoid-edges"]):a.minScale;r||s?!s&&t?t=Math.max(u,t):!r&&u&&(u=Math.max(u,t)):u=t=Math.max(u,t),p&&(a.insertCollisionFeature(n,t,c["text-ignore-placement"]),t<=d&&this.addSymbols("glyph",m.glyphQuadStartIndex,m.glyphQuadEndIndex,t,c["text-keep-upright"],e,a.angle)),q&&(a.insertCollisionFeature(o,u,c["icon-ignore-placement"]),u<=d&&this.addSymbols("icon",m.iconQuadStartIndex,m.iconQuadEndIndex,u,c["icon-keep-upright"],f,a.angle))}b&&this.addToDebugBuffers(a)},d.prototype.addSymbols=function(a,b,c,d,f,g,h){for(var i=this.prepareArrayGroup(a,4*(c-b)),j=i.elementArray,k=i.layoutVertexArray,l=this.zoom,m=Math.max(Math.log(d)/Math.LN2+l,0),n=b;n<c;n++){var o=this.symbolQuadsArray.get(n).SymbolQuad,p=(o.anchorAngle+h+Math.PI)%(2*Math.PI);if(!(f&&g&&(p<=Math.PI/2||p>3*Math.PI/2))){var q=o.tl,r=o.tr,s=o.bl,t=o.br,u=o.tex,v=o.anchorPoint,w=Math.max(l+Math.log(o.minScale)/Math.LN2,m),x=Math.min(l+Math.log(o.maxScale)/Math.LN2,25);if(!(x<=w)){w===m&&(w=0);var y=Math.round(o.glyphAngle/(2*Math.PI)*256),z=e(k,v.x,v.y,q.x,q.y,u.x,u.y,w,x,m,y);e(k,v.x,v.y,r.x,r.y,u.x+u.w,u.y,w,x,m,y),e(k,v.x,v.y,s.x,s.y,u.x,u.y+u.h,w,x,m,y),e(k,v.x,v.y,t.x,t.y,u.x+u.w,u.y+u.h,w,x,m,y),j.emplaceBack(z,z+1,z+2),j.emplaceBack(z+1,z+2,z+3)}}}},d.prototype.updateIcons=function(a){this.recalculateStyleLayers();var b=this.layer.layout["icon-image"];if(b)for(var c=0;c<this.features.length;c++){var d=j(this.features[c].properties,b);d&&(a[d]=!0)}},d.prototype.updateFont=function(a){this.recalculateStyleLayers();var b=this.layer.layout["text-font"],c=a[b]=a[b]||{};this.textFeatures=m(this.features,this.layer.layout,c)},d.prototype.addToDebugBuffers=function(a){for(var b=this.prepareArrayGroup("collisionBox",0),c=b.layoutVertexArray,d=-a.angle,e=a.yStretch,g=this.symbolInstancesStartIndex;g<this.symbolInstancesEndIndex;g++){var h=this.symbolInstancesArray.get(g);h.textCollisionFeature={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},h.iconCollisionFeature={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex};for(var i=0;i<2;i++){var j=h[0===i?"textCollisionFeature":"iconCollisionFeature"];if(j)for(var k=j.boxStartIndex;k<j.boxEndIndex;k++){var l=this.collisionBoxArray.get(k),m=l.anchorPoint,n=new f(l.x1,l.y1*e)._rotate(d),o=new f(l.x2,l.y1*e)._rotate(d),p=new f(l.x1,l.y2*e)._rotate(d),q=new f(l.x2,l.y2*e)._rotate(d),r=Math.max(0,Math.min(25,this.zoom+Math.log(l.maxScale)/Math.LN2)),s=Math.max(0,Math.min(25,this.zoom+Math.log(l.placementScale)/Math.LN2));this.addCollisionBoxVertex(c,m,n,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,o,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,q,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,p,r,s),this.addCollisionBoxVertex(c,m,n,r,s)}}}},d.prototype.addSymbolInstance=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,q,s,t,u,v){var y,z,A,B,C,D,E,F;if(c&&(E=g?w(a,c,m,b,f,o):[],C=new r(i,b,a,j,k,l,c,m,n,o,!1)),y=this.symbolQuadsArray.length,E&&E.length)for(var G=0;G<E.length;G++)this.addSymbolQuad(E[G]);z=this.symbolQuadsArray.length;var H=C?C.boxStartIndex:this.collisionBoxArray.length,I=C?C.boxEndIndex:this.collisionBoxArray.length;e&&(F=g?x(a,e,q,b,f,t,c,u,v):[],D=new r(i,b,a,j,k,l,e,q,s,t,!0)),A=this.symbolQuadsArray.length,F&&1===F.length&&this.addSymbolQuad(F[0]),B=this.symbolQuadsArray.length;var J=D?D.boxStartIndex:this.collisionBoxArray.length,K=D?D.boxEndIndex:this.collisionBoxArray.length;return B>d.MAX_QUADS&&p.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),z>d.MAX_QUADS&&p.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),this.symbolInstancesArray.emplaceBack(H,I,J,K,y,z,A,B,a.x,a.y,h)},d.prototype.addSymbolQuad=function(a){return this.symbolQuadsArray.emplaceBack(a.anchorPoint.x,a.anchorPoint.y,a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y,a.tex.h,a.tex.w,a.tex.x,a.tex.y,a.anchorAngle,a.glyphAngle,a.maxScale,a.minScale)}},{"../../symbol/anchor":69,"../../symbol/clip_line":71,"../../symbol/collision_feature":73,"../../symbol/get_anchors":75,"../../symbol/mergelines":78,"../../symbol/quads":79,"../../symbol/resolve_text":80,"../../symbol/shaping":81,"../../util/classify_rings":108,"../../util/find_pole_of_inaccessibility":114,"../../util/token":121,"../../util/util":122,"../bucket":2,"../load_geometry":11,"point-geometry":192}],8:[function(a,b,c){"use strict";function d(a,b,c){this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.attributes=b.members,this.itemSize=b.bytesPerElement,this.type=c,this.arrayType=b}b.exports=d,d.prototype.bind=function(a){var b=a[this.type];this.buffer?a.bindBuffer(b,this.buffer):(this.gl=a,this.buffer=a.createBuffer(),a.bindBuffer(b,this.buffer),a.bufferData(b,this.arrayBuffer,a.STATIC_DRAW),this.arrayBuffer=null)};var e={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"};d.prototype.setVertexAttribPointers=function(a,b){for(var c=0;c<this.attributes.length;c++){var d=this.attributes[c],f=b[d.name];void 0!==f&&a.vertexAttribPointer(f,d.components,a[e[d.type]],!1,this.arrayType.bytesPerElement,d.offset)}},d.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)},d.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"}},{}],9:[function(a,b,c){"use strict";function d(a,b){this.layoutVertexBuffer=new f(a.layoutVertexArray,b.layoutVertexArrayType,f.BufferType.VERTEX),a.elementArray&&(this.elementBuffer=new f(a.elementArray,b.elementArrayType,f.BufferType.ELEMENT));var c,d=this.vaos={};a.elementArray2&&(this.elementBuffer2=new f(a.elementArray2,b.elementArrayType2,f.BufferType.ELEMENT),c=this.secondVaos={}),this.paintVertexBuffers=e.mapObject(a.paintVertexArrays,function(e,h){return d[h]=new g,a.elementArray2&&(c[h]=new g),new f(e,b.paintVertexArrayTypes[h],f.BufferType.VERTEX)})}var e=a("../util/util"),f=a("./buffer"),g=a("../render/vertex_array_object");b.exports=d,d.prototype.destroy=function(){this.layoutVertexBuffer.destroy(),this.elementBuffer&&this.elementBuffer.destroy(),this.elementBuffer2&&this.elementBuffer2.destroy();for(var a in this.paintVertexBuffers)this.paintVertexBuffers[a].destroy();for(var b in this.vaos)this.vaos[b].destroy();for(var c in this.secondVaos)this.secondVaos[c].destroy()}},{"../render/vertex_array_object":34,"../util/util":122,"./buffer":8}],10:[function(a,b,c){"use strict";function d(a,b,c){if(a.grid){var d=a,e=b;a=d.coord,b=d.overscaling,this.grid=new o(d.grid),this.featureIndexArray=new y(d.featureIndexArray),this.rawTileData=e,this.bucketLayerIDs=d.bucketLayerIDs}else this.grid=new o(l,16,0),this.featureIndexArray=new y;this.coord=a,this.overscaling=b,this.x=a.x,this.y=a.y,this.z=a.z-Math.log(b)/Math.LN2,this.setCollisionTile(c)}function e(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function f(a,b){return b-a}function g(a){return a["line-gap-width"]>0?a["line-gap-width"]+2*a["line-width"]:a["line-width"]}function h(a,b,c,d,e){if(!b[0]&&!b[1])return a;b=j.convert(b),"viewport"===c&&b._rotate(-d);for(var f=[],g=0;g<a.length;g++){for(var h=a[g],i=[],k=0;k<h.length;k++)i.push(h[k].sub(b._mult(e)));f.push(i)}return f}function i(a,b){for(var c=[],d=new j(0,0),e=0;e<a.length;e++){for(var f=a[e],g=[],h=0;h<f.length;h++){var i=f[h-1],k=f[h],l=f[h+1],m=0===h?d:k.sub(i)._unit()._perp(),n=h===f.length-1?d:l.sub(k)._unit()._perp(),o=m._add(n)._unit(),p=o.x*n.x+o.y*n.y;o._mult(1/p),g.push(o._mult(b)._add(k))}c.push(g)}return c}var j=a("point-geometry"),k=a("./load_geometry"),l=a("./bucket").EXTENT,m=a("feature-filter"),n=a("../util/struct_array"),o=a("grid-index"),p=a("../util/dictionary_coder"),q=a("vector-tile"),r=a("pbf"),s=a("../util/vectortile_to_geojson"),t=a("../util/util").arraysIntersect,u=a("../util/intersection_tests"),v=u.multiPolygonIntersectsBufferedMultiPoint,w=u.multiPolygonIntersectsMultiPolygon,x=u.multiPolygonIntersectsBufferedMultiLine,y=new n({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]});b.exports=d,d.prototype.insert=function(a,b,c,d){var e=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(b,c,d);for(var f=k(a),g=0;g<f.length;g++){for(var h=f[g],i=[1/0,1/0,-(1/0),-(1/0)],j=0;j<h.length;j++){var l=h[j];i[0]=Math.min(i[0],l.x),i[1]=Math.min(i[1],l.y),i[2]=Math.max(i[2],l.x),i[3]=Math.max(i[3],l.y)}this.grid.insert(e,i[0],i[1],i[2],i[3])}},d.prototype.setCollisionTile=function(a){this.collisionTile=a},d.prototype.serialize=function(){var a={coord:this.coord,overscaling:this.overscaling,grid:this.grid.toArrayBuffer(),featureIndexArray:this.featureIndexArray.serialize(),bucketLayerIDs:this.bucketLayerIDs};return{data:a,transferables:[a.grid,a.featureIndexArray.arrayBuffer]}},d.prototype.query=function(a,b){this.vtLayers||(this.vtLayers=new q.VectorTile(new r(this.rawTileData)).layers,this.sourceLayerCoder=new p(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var c={},d=a.params||{},h=l/a.tileSize/a.scale,i=m(d.filter),k=0;for(var n in b){var o=b[n],s=o.paint,t=0;"line"===o.type?t=g(s)/2+Math.abs(s["line-offset"])+e(s["line-translate"]):"fill"===o.type?t=e(s["fill-translate"]):"circle"===o.type&&(t=s["circle-radius"]+e(s["circle-translate"])),k=Math.max(k,t*h)}for(var u=a.queryGeometry.map(function(a){return a.map(function(a){return new j(a.x,a.y)})}),v=1/0,w=1/0,x=-(1/0),y=-(1/0),z=0;z<u.length;z++)for(var A=u[z],B=0;B<A.length;B++){var C=A[B];v=Math.min(v,C.x),w=Math.min(w,C.y),x=Math.max(x,C.x),y=Math.max(y,C.y)}var D=this.grid.query(v-k,w-k,x+k,y+k);D.sort(f),this.filterMatching(c,D,this.featureIndexArray,u,i,d.layers,b,a.bearing,h);var E=this.collisionTile.queryRenderedSymbols(v,w,x,y,a.scale);return E.sort(),this.filterMatching(c,E,this.collisionTile.collisionBoxArray,u,i,d.layers,b,a.bearing,h),c},d.prototype.filterMatching=function(a,b,c,d,e,f,j,l,m){for(var n,o=0;o<b.length;o++){var p=b[o];if(p!==n){n=p;var q=c.get(p),r=this.bucketLayerIDs[q.bucketIndex];if(!f||t(f,r)){var u=this.sourceLayerCoder.decode(q.sourceLayerIndex),y=this.vtLayers[u],z=y.feature(q.featureIndex);if(e(z))for(var A=null,B=0;B<r.length;B++){var C=r[B];if(!(f&&f.indexOf(C)<0)){var D=j[C];if(D){var E;if("symbol"!==D.type){A||(A=k(z));var F=D.paint;if("line"===D.type){E=h(d,F["line-translate"],F["line-translate-anchor"],l,m);var G=g(F)/2*m;if(F["line-offset"]&&(A=i(A,F["line-offset"]*m)),!x(E,A,G))continue}else if("fill"===D.type){if(E=h(d,F["fill-translate"],F["fill-translate-anchor"],l,m),!w(E,A))continue}else if("circle"===D.type){E=h(d,F["circle-translate"],F["circle-translate-anchor"],l,m);var H=F["circle-radius"]*m;if(!v(E,A,H))continue}}var I=new s(z,this.z,this.x,this.y);I.layer=D.serialize({includeRefProperties:!0});var J=a[C];void 0===J&&(J=a[C]=[]),J.push(I)}}}}}}}},{"../util/dictionary_coder":110,"../util/intersection_tests":117,"../util/struct_array":120,"../util/util":122,"../util/vectortile_to_geojson":123,"./bucket":2,"./load_geometry":11,"feature-filter":138,"grid-index":160,pbf:190,"point-geometry":192,"vector-tile":202}],11:[function(a,b,c){"use strict";function d(a){return{min:-1*Math.pow(2,a-1),max:Math.pow(2,a-1)-1}}var e=a("../util/util"),f=a("./bucket").EXTENT,g={15:d(15),16:d(16)};b.exports=function(a,b){for(var c=g[b||16],d=f/a.extent,h=a.loadGeometry(),i=0;i<h.length;i++)for(var j=h[i],k=0;k<j.length;k++){var l=j[k];l.x=Math.round(l.x*d),l.y=Math.round(l.y*d),(l.x<c.min||l.x>c.max||l.y<c.min||l.y>c.max)&&e.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return h}},{"../util/util":122,"./bucket":2}],12:[function(a,b,c){"use strict";function d(a,b,c){this.column=a,this.row=b,this.zoom=c}b.exports=d,d.prototype={clone:function(){return new d(this.column,this.row,this.zoom)},zoomTo:function(a){return this.clone()._zoomTo(a)},sub:function(a){return this.clone()._sub(a)},_zoomTo:function(a){var b=Math.pow(2,a-this.zoom);return this.column*=b,this.row*=b,this.zoom=a,this},_sub:function(a){return a=a.zoomTo(this.zoom),this.column-=a.column,this.row-=a.row,this}}},{}],13:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))throw new Error("Invalid LngLat object: ("+a+", "+b+")");if(this.lng=+a,this.lat=+b,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}b.exports=d;var e=a("../util/util").wrap;d.prototype.wrap=function(){return new d(e(this.lng,-180,180),this.lat)},d.prototype.toArray=function(){return[this.lng,this.lat]},d.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},d.convert=function(a){if(a instanceof d)return a;if(a&&a.hasOwnProperty("lng")&&a.hasOwnProperty("lat"))return new d(a.lng,a.lat);if(Array.isArray(a)&&2===a.length)return new d(a[0],a[1]);throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},{"../util/util":122}],14:[function(a,b,c){"use strict";function d(a,b){a&&(b?this.setSouthWest(a).setNorthEast(b):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))}b.exports=d;var e=a("./lng_lat");d.prototype={setNorthEast:function(a){return this._ne=e.convert(a),this},setSouthWest:function(a){return this._sw=e.convert(a),this},extend:function(a){var b,c,f=this._sw,g=this._ne;if(a instanceof e)b=a,c=a;else{if(!(a instanceof d))return Array.isArray(a)?a.every(Array.isArray)?this.extend(d.convert(a)):this.extend(e.convert(a)):this;if(b=a._sw,c=a._ne,!b||!c)return this}return f||g?(f.lng=Math.min(b.lng,f.lng),f.lat=Math.min(b.lat,f.lat),g.lng=Math.max(c.lng,g.lng),g.lat=Math.max(c.lat,g.lat)):(this._sw=new e(b.lng,b.lat),this._ne=new e(c.lng,c.lat)),this},getCenter:function(){return new e((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getNorthWest:function(){return new e(this.getWest(),this.getNorth())},getSouthEast:function(){return new e(this.getEast(),this.getSouth())},getWest:function(){return this._sw.lng},getSouth:function(){return this._sw.lat},getEast:function(){return this._ne.lng},getNorth:function(){return this._ne.lat},toArray:function(){return[this._sw.toArray(),this._ne.toArray()]},toString:function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"}},d.convert=function(a){return!a||a instanceof d?a:new d(a)}},{"./lng_lat":13}],15:[function(a,b,c){"use strict";function d(a,b){this.tileSize=512,this._minZoom=a||0,this._maxZoom=b||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new e(0,0),this.zoom=0,this.angle=0,this._altitude=1.5,this._pitch=0,this._unmodified=!0}var e=a("./lng_lat"),f=a("point-geometry"),g=a("./coordinate"),h=a("../util/util"),i=a("../util/interpolate"),j=a("../source/tile_coord"),k=a("../data/bucket").EXTENT,l=a("gl-matrix"),m=l.vec4,n=l.mat4,o=l.mat2;b.exports=d,d.prototype={get minZoom(){return this._minZoom},set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))},get maxZoom(){return this._maxZoom},set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))},get worldSize(){return this.tileSize*this.scale},get centerPoint(){return this.size._div(2)},get size(){return new f(this.width,this.height)},get bearing(){return-this.angle/Math.PI*180},set bearing(a){var b=-h.wrap(a,-180,180)*Math.PI/180;this.angle!==b&&(this._unmodified=!1,this.angle=b,this._calcMatrices(),this.rotationMatrix=o.create(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},get pitch(){return this._pitch/Math.PI*180},set pitch(a){var b=h.clamp(a,0,60)/180*Math.PI;this._pitch!==b&&(this._unmodified=!1,this._pitch=b,this._calcMatrices())},get altitude(){return this._altitude},set altitude(a){var b=Math.max(.75,a);this._altitude!==b&&(this._unmodified=!1,this._altitude=b,this._calcMatrices())},get zoom(){return this._zoom},set zoom(a){var b=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==b&&(this._unmodified=!1,this._zoom=b,this.scale=this.zoomScale(b),this.tileZoom=Math.floor(b),this.zoomFraction=b-this.tileZoom,this._calcMatrices(),this._constrain())},get center(){return this._center},set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._calcMatrices(),this._constrain())},coveringZoomLevel:function(a){return(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize))},coveringTiles:function(a){var b=this.coveringZoomLevel(a),c=b;if(b<a.minzoom)return[];b>a.maxzoom&&(b=a.maxzoom);var d=this,e=d.locationCoordinate(d.center)._zoomTo(b),g=new f(e.column-.5,e.row-.5);return j.cover(b,[d.pointCoordinate(new f(0,0))._zoomTo(b),d.pointCoordinate(new f(d.width,0))._zoomTo(b),d.pointCoordinate(new f(d.width,d.height))._zoomTo(b),d.pointCoordinate(new f(0,d.height))._zoomTo(b)],a.reparseOverscaled?c:b).sort(function(a,b){return g.dist(a)-g.dist(b)})},resize:function(a,b){this.width=a,this.height=b,this.pixelsToGLUnits=[2/a,-2/b],this._calcMatrices(),this._constrain()},get unmodified(){return this._unmodified},zoomScale:function(a){return Math.pow(2,a)},scaleZoom:function(a){return Math.log(a)/Math.LN2},project:function(a,b){return new f(this.lngX(a.lng,b),this.latY(a.lat,b))},unproject:function(a,b){return new e(this.xLng(a.x,b),this.yLat(a.y,b))},get x(){return this.lngX(this.center.lng)},get y(){return this.latY(this.center.lat)},get point(){return new f(this.x,this.y)},lngX:function(a,b){return(180+a)*(b||this.worldSize)/360},latY:function(a,b){var c=180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360));return(180-c)*(b||this.worldSize)/360},xLng:function(a,b){return 360*a/(b||this.worldSize)-180},yLat:function(a,b){var c=180-360*a/(b||this.worldSize);return 360/Math.PI*Math.atan(Math.exp(c*Math.PI/180))-90},panBy:function(a){var b=this.centerPoint._add(a);this.center=this.pointLocation(b)},setLocationAtPoint:function(a,b){var c=this.locationCoordinate(a),d=this.pointCoordinate(b),e=this.pointCoordinate(this.centerPoint),f=d._sub(c);this._unmodified=!1,this.center=this.coordinateLocation(e._sub(f))},locationPoint:function(a){return this.coordinatePoint(this.locationCoordinate(a))},pointLocation:function(a){return this.coordinateLocation(this.pointCoordinate(a))},locationCoordinate:function(a){var b=this.zoomScale(this.tileZoom)/this.worldSize,c=e.convert(a);return new g(this.lngX(c.lng)*b,this.latY(c.lat)*b,this.tileZoom)},coordinateLocation:function(a){var b=this.zoomScale(a.zoom);return new e(this.xLng(a.column,b),this.yLat(a.row,b))},pointCoordinate:function(a){var b=0,c=[a.x,a.y,0,1],d=[a.x,a.y,1,1];m.transformMat4(c,c,this.pixelMatrixInverse),m.transformMat4(d,d,this.pixelMatrixInverse);var e=c[3],f=d[3],h=c[0]/e,j=d[0]/f,k=c[1]/e,l=d[1]/f,n=c[2]/e,o=d[2]/f,p=n===o?0:(b-n)/(o-n),q=this.worldSize/this.zoomScale(this.tileZoom);return new g(i(h,j,p)/q,i(k,l,p)/q,this.tileZoom)},coordinatePoint:function(a){var b=this.worldSize/this.zoomScale(a.zoom),c=[a.column*b,a.row*b,0,1];return m.transformMat4(c,c,this.pixelMatrix),new f(c[0]/c[3],c[1]/c[3])},calculatePosMatrix:function(a,b){void 0===b&&(b=1/0),a instanceof j&&(a=a.toCoordinate(b));var c=Math.min(a.zoom,b),d=this.worldSize/Math.pow(2,c),e=new Float64Array(16);return n.identity(e),n.translate(e,e,[a.column*d,a.row*d,0]),n.scale(e,e,[d/k,d/k,1]),n.multiply(e,this.projMatrix,e),new Float32Array(e)},_constrain:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,b,c,d,e,g,h,i,j=this.size,k=this._unmodified;this.latRange&&(a=this.latY(this.latRange[1]),b=this.latY(this.latRange[0]),e=b-a<j.y?j.y/(b-a):0),this.lngRange&&(c=this.lngX(this.lngRange[0]),d=this.lngX(this.lngRange[1]),g=d-c<j.x?j.x/(d-c):0);var l=Math.max(g||0,e||0);if(l)return this.center=this.unproject(new f(g?(d+c)/2:this.x,e?(b+a)/2:this.y)),this.zoom+=this.scaleZoom(l),this._unmodified=k,void(this._constraining=!1);if(this.latRange){var m=this.y,n=j.y/2;m-n<a&&(i=a+n),m+n>b&&(i=b-n)}if(this.lngRange){var o=this.x,p=j.x/2;o-p<c&&(h=c+p),o+p>d&&(h=d-p)}void 0===h&&void 0===i||(this.center=this.unproject(new f(void 0!==h?h:this.x,void 0!==i?i:this.y))),this._unmodified=k,this._constraining=!1}},_calcMatrices:function(){if(this.height){var a=Math.atan(.5/this.altitude),b=Math.sin(a)*this.altitude/Math.sin(Math.PI/2-this._pitch-a),c=Math.cos(Math.PI/2-this._pitch)*b+this.altitude,d=new Float64Array(16);if(n.perspective(d,2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,c),n.translate(d,d,[0,0,-this.altitude]),n.scale(d,d,[1,-1,1/this.height]),n.rotateX(d,d,this._pitch),n.rotateZ(d,d,this.angle),n.translate(d,d,[-this.x,-this.y,0]),this.projMatrix=d,d=n.create(),n.scale(d,d,[this.width/2,-this.height/2,1]),n.translate(d,d,[1,-1,0]),this.pixelMatrix=n.multiply(new Float64Array(16),d,this.projMatrix),d=n.invert(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,d=o.create(),o.scale(d,d,[1,Math.cos(this._pitch)]),o.rotate(d,d,this.angle),this.lineAntialiasingMatrix=d;var e=Math.sqrt(this.height*this.height/4*(1+this.altitude*this.altitude));this.lineStretch=(e+this.height/2*Math.tan(this._pitch))/e-1}}}},{"../data/bucket":2,"../source/tile_coord":46,"../util/interpolate":116,"../util/util":122,"./coordinate":12,"./lng_lat":13,"gl-matrix":150,"point-geometry":192}],16:[function(a,b,c){"use strict";var d,e=a("./util/worker_pool");b.exports=function(){return d||(d=new e),d}},{"./util/worker_pool":124}],17:[function(a,b,c){"use strict";var d={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],
"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};b.exports=function(a,b,c,e){e=e||1;var f,g,h,i,j,k,l,m,n=[];for(f=0,g=a.length;f<g;f++)if(j=d[a[f]]){for(m=null,h=0,i=j[1].length;h<i;h+=2)j[1][h]===-1&&j[1][h+1]===-1?m=null:(k=b+j[1][h]*e,l=c-j[1][h+1]*e,m&&n.push(m.x,m.y,k,l),m={x:k,y:l});b+=j[0]*e}return n}},{}],18:[function(a,b,c){"use strict";var d=a("./util/browser"),e=b.exports={};e.version=a("../package.json").version,e.workerCount=Math.max(d.hardwareConcurrency-1,1),e.Map=a("./ui/map"),e.Control=a("./ui/control/control"),e.NavigationControl=a("./ui/control/navigation_control"),e.GeolocateControl=a("./ui/control/geolocate_control"),e.AttributionControl=a("./ui/control/attribution_control"),e.ScaleControl=a("./ui/control/scale_control"),e.Popup=a("./ui/popup"),e.Marker=a("./ui/marker"),e.Style=a("./style/style"),e.LngLat=a("./geo/lng_lat"),e.LngLatBounds=a("./geo/lng_lat_bounds"),e.Point=a("point-geometry"),e.Evented=a("./util/evented"),e.util=a("./util/util"),e.supported=a("./util/browser").supported;var f=a("./util/ajax");e.util.getJSON=f.getJSON,e.util.getArrayBuffer=f.getArrayBuffer;var g=a("./util/config");e.config=g,Object.defineProperty(e,"accessToken",{get:function(){return g.ACCESS_TOKEN},set:function(a){g.ACCESS_TOKEN=a}})},{"../package.json":211,"./geo/lng_lat":13,"./geo/lng_lat_bounds":14,"./style/style":56,"./ui/control/attribution_control":87,"./ui/control/control":88,"./ui/control/geolocate_control":89,"./ui/control/navigation_control":90,"./ui/control/scale_control":91,"./ui/map":100,"./ui/marker":101,"./ui/popup":102,"./util/ajax":104,"./util/browser":105,"./util/config":109,"./util/evented":113,"./util/util":122,"point-geometry":192}],19:[function(a,b,c){"use strict";b.exports=function(a){for(var b={define:{},initialize:{}},c=0;c<a.length;c++){var d=a[c],e="{precision} "+(1===d.components?"float":"vec"+d.components);b.define[d.name.slice(2)]="uniform "+e+" "+d.name+";\n",b.initialize[d.name.slice(2)]=e+" "+d.name.slice(2)+" = "+d.name+";\n"}return b}},{}],20:[function(a,b,c){"use strict";function d(a,b,c){var d,h=a.gl,i=a.transform,j=c.paint["background-color"],k=c.paint["background-pattern"],l=c.paint["background-opacity"],m=k?a.spriteAtlas.getPosition(k.from,!0):null,n=k?a.spriteAtlas.getPosition(k.to,!0):null;if(a.setDepthSublayer(0),m&&n){if(a.isOpaquePass)return;d=a.useProgram("fillPattern"),h.uniform1i(d.u_image,0),h.uniform2fv(d.u_pattern_tl_a,m.tl),h.uniform2fv(d.u_pattern_br_a,m.br),h.uniform2fv(d.u_pattern_tl_b,n.tl),h.uniform2fv(d.u_pattern_br_b,n.br),h.uniform1f(d.u_opacity,l),h.uniform1f(d.u_mix,k.t),h.uniform2fv(d.u_pattern_size_a,m.size),h.uniform2fv(d.u_pattern_size_b,n.size),h.uniform1f(d.u_scale_a,k.fromScale),h.uniform1f(d.u_scale_b,k.toScale),h.activeTexture(h.TEXTURE0),a.spriteAtlas.bind(h,!0),a.tileExtentPatternVAO.bind(h,d,a.tileExtentBuffer)}else{if(a.isOpaquePass!==(1===j[3]))return;var o=f([{name:"u_color",components:4},{name:"u_opacity",components:1}]);d=a.useProgram("fill",[],o,o),h.uniform4fv(d.u_color,j),h.uniform1f(d.u_opacity,l),a.tileExtentVAO.bind(h,d,a.tileExtentBuffer)}h.disable(h.STENCIL_TEST);for(var p=i.coveringTiles({tileSize:g}),q=0;q<p.length;q++){var r=p[q];if(m&&n){var s={coord:r,tileSize:g};h.uniform1f(d.u_tile_units_to_pixels,1/e(s,1,a.transform.tileZoom));var t=s.tileSize*Math.pow(2,a.transform.tileZoom-s.coord.z),u=t*(s.coord.x+r.w*Math.pow(2,s.coord.z)),v=t*s.coord.y;h.uniform2f(d.u_pixel_coord_upper,u>>16,v>>16),h.uniform2f(d.u_pixel_coord_lower,65535&u,65535&v)}h.uniformMatrix4fv(d.u_matrix,!1,a.transform.calculatePosMatrix(r)),h.drawArrays(h.TRIANGLE_STRIP,0,a.tileExtentBuffer.length)}h.stencilMask(0),h.stencilFunc(h.EQUAL,128,128)}var e=a("../source/pixels_to_tile_units"),f=a("./create_uniform_pragmas"),g=512;b.exports=d},{"../source/pixels_to_tile_units":40,"./create_uniform_pragmas":19}],21:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;a.setDepthSublayer(0),a.depthMask(!1),f.disable(f.STENCIL_TEST);for(var g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.circle;if(k){var l=j.paintAttributes.circle[c.id],m=a.useProgram("circle",l.defines,l.vertexPragmas,l.fragmentPragmas);"map"===c.paint["circle-pitch-scale"]?(f.uniform1i(m.u_scale_with_map,!0),f.uniform2f(m.u_extrude_scale,a.transform.pixelsToGLUnits[0]*a.transform.altitude,a.transform.pixelsToGLUnits[1]*a.transform.altitude)):(f.uniform1i(m.u_scale_with_map,!1),f.uniform2fv(m.u_extrude_scale,a.transform.pixelsToGLUnits)),f.uniform1f(m.u_devicepixelratio,e.devicePixelRatio),f.uniformMatrix4fv(m.u_matrix,!1,a.translatePosMatrix(h.posMatrix,i,c.paint["circle-translate"],c.paint["circle-translate-anchor"])),j.setUniforms(f,"circle",m,c,{zoom:a.transform.zoom});for(var n=0;n<k.length;n++){var o=k[n];o.vaos[c.id].bind(f,m,o.layoutVertexBuffer,o.elementBuffer,o.paintVertexBuffers[c.id]),f.drawElements(f.TRIANGLES,3*o.elementBuffer.length,f.UNSIGNED_SHORT,0)}}}}}}var e=a("../util/browser");b.exports=d},{"../util/browser":105}],22:[function(a,b,c){"use strict";function d(a,b,c,d){var e=a.gl;e.enable(e.STENCIL_TEST);for(var f=a.useProgram("collisionBox"),g=0;g<d.length;g++){var h=d[g],i=b.getTile(h),j=i.getBucket(c);if(j){var k=j.bufferGroups.collisionBox;if(k&&k.length){var l=k[0];0!==l.layoutVertexBuffer.length&&(e.uniformMatrix4fv(f.u_matrix,!1,h.posMatrix),a.enableTileClippingMask(h),a.lineWidth(1),e.uniform1f(f.u_scale,Math.pow(2,a.transform.zoom-i.coord.z)),e.uniform1f(f.u_zoom,10*a.transform.zoom),e.uniform1f(f.u_maxzoom,10*(i.coord.z+1)),l.vaos[c.id].bind(e,f,l.layoutVertexBuffer),e.drawArrays(e.LINES,0,l.layoutVertexBuffer.length))}}}}b.exports=d},{}],23:[function(a,b,c){"use strict";function d(a,b,c){if(!a.isOpaquePass&&a.options.debug)for(var d=0;d<c.length;d++)e(a,b,c[d])}function e(a,b,c){var d=a.gl;d.disable(d.STENCIL_TEST),a.lineWidth(1*g.devicePixelRatio);var e=c.posMatrix,l=a.useProgram("debug");d.uniformMatrix4fv(l.u_matrix,!1,e),d.uniform4f(l.u_color,1,0,0,1),a.debugVAO.bind(d,l,a.debugBuffer),d.drawArrays(d.LINE_STRIP,0,a.debugBuffer.length);for(var m=f(c.toString(),50,200,5),n=new a.PosArray,o=0;o<m.length;o+=2)n.emplaceBack(m[o],m[o+1]);var p=new j(n.serialize(),a.PosArray.serialize(),j.BufferType.VERTEX),q=new k;q.bind(d,l,p),d.uniform4f(l.u_color,1,1,1,1);for(var r=b.getTile(c).tileSize,s=i/(Math.pow(2,a.transform.zoom-c.z)*r),t=[[-1,-1],[-1,1],[1,-1],[1,1]],u=0;u<t.length;u++){var v=t[u];d.uniformMatrix4fv(l.u_matrix,!1,h.translate([],e,[s*v[0],s*v[1],0])),d.drawArrays(d.LINES,0,p.length)}d.uniform4f(l.u_color,0,0,0,1),d.uniformMatrix4fv(l.u_matrix,!1,e),d.drawArrays(d.LINES,0,p.length)}var f=a("../lib/debugtext"),g=a("../util/browser"),h=a("gl-matrix").mat4,i=a("../data/bucket").EXTENT,j=a("../data/buffer"),k=a("./vertex_array_object");b.exports=d},{"../data/bucket":2,"../data/buffer":8,"../lib/debugtext":17,"../util/browser":105,"./vertex_array_object":34,"gl-matrix":150}],24:[function(a,b,c){"use strict";function d(a,b,c,d){if(0!==c.paint["fill-opacity"]){var g=a.gl;g.disable(g.STENCIL_TEST),a.depthMask(!0);var h=new e(g,a,c);h.bindFramebuffer(),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);for(var i=0;i<d.length;i++)f(a,b,c,d[i]);h.unbindFramebuffer(),h.renderToMap()}}function e(a,b,c){this.gl=a,this.width=b.width,this.height=b.height,this.painter=b,this.layer=c,this.texture=null,this.fbo=null,this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}function f(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var i=f.bufferGroups.fillextrusion;if(i&&!a.isOpaquePass){var j=a.gl,k=c.paint["fill-pattern"],l=f.paintAttributes.fillextrusion[c.id],m=a.useProgram(k?"fillExtrudePattern":"fillExtrude",l.defines,l.vertexPragmas,l.fragmentPragmas);k&&o(k,e,d,a,m,!0),g(m,a,d,e,c),h(m,a),f.setUniforms(j,"fillextrusion",m,c,{zoom:a.transform.zoom});for(var n=0;n<i.length;n++){var p=i[n];p.vaos[c.id].bind(j,m,p.layoutVertexBuffer,p.elementBuffer,p.paintVertexBuffers[c.id]),j.drawElements(j.TRIANGLES,3*p.elementBuffer.length,j.UNSIGNED_SHORT,0)}}}}function g(a,b,c,d,e){var f=Math.pow(2,b.transform.zoom)/5e4;b.gl.uniformMatrix4fv(a.u_matrix,!1,j.scale(j.create(),b.translatePosMatrix(c.posMatrix,d,e.paint["fill-translate"],e.paint["fill-translate-anchor"]),[1,1,f,1]))}function h(a,b){var c=b.gl,d=b.style.light,e=d.calculated.position,f=[e.x,e.y,e.z],g=i.create();"viewport"===d.calculated.anchor&&i.fromRotation(g,-b.transform.angle),k.transformMat3(f,f,g),c.uniform3fv(a.u_lightpos,f),c.uniform1f(a.u_lightintensity,d.calculated.intensity),c.uniform3fv(a.u_lightcolor,d.calculated.color.slice(0,3))}var i=a("gl-matrix").mat3,j=a("gl-matrix").mat4,k=a("gl-matrix").vec3,l=a("../data/buffer"),m=a("./vertex_array_object"),n=a("../util/struct_array"),o=a("./set_pattern");b.exports=d,e.prototype.bindFramebuffer=function(){var a=this.gl;if(this.texture=this.painter.getViewportTexture(this.width,this.height),a.activeTexture(a.TEXTURE1),this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,null),this.texture.width=this.width,this.texture.height=this.height),this.fbos)this.fbo=this.fbos.pop(),a.bindFramebuffer(a.FRAMEBUFFER,this.fbo),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0);else{this.fbo=a.createFramebuffer();var b=a.createRenderbuffer(),c=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,b),a.bindRenderbuffer(a.RENDERBUFFER,c),a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,this.width,this.height),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,this.width,this.height),a.bindFramebuffer(a.FRAMEBUFFER,this.fbo),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,b),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,c),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0)}},e.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer(),this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]),this.painter.saveViewportTexture(this.texture)},e.prototype.TextureBoundsArray=new n({members:[{name:"a_pos",type:"Int16",components:2}]}),e.prototype.renderToMap=function(){var a=this.gl,b=this.painter,c=b.useProgram("fillExtrudeTexture");a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.texture),a.uniform1f(c.u_opacity,this.layer.paint["fill-opacity"]),a.uniform1i(c.u_texture,1),a.uniformMatrix4fv(c.u_matrix,!1,j.ortho(j.create(),0,b.width,b.height,0,0,1)),a.disable(a.DEPTH_TEST),a.uniform1i(c.u_xdim,b.width),a.uniform1i(c.u_ydim,b.height);var d=new this.TextureBoundsArray;d.emplaceBack(0,0),d.emplaceBack(b.width,0),d.emplaceBack(0,b.height),d.emplaceBack(b.width,b.height);var e=new l(d.serialize(),this.TextureBoundsArray.serialize(),l.BufferType.VERTEX),f=new m;f.bind(a,c,e),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.enable(a.DEPTH_TEST)}},{"../data/buffer":8,"../util/struct_array":120,"./set_pattern":33,"./vertex_array_object":34,"gl-matrix":150}],25:[function(a,b,c){"use strict";function d(a,b,c,d){var g=a.gl;g.enable(g.STENCIL_TEST);var h=!c.paint["fill-pattern"]&&c.isPaintValueFeatureConstant("fill-color")&&c.isPaintValueFeatureConstant("fill-opacity")&&1===c.paint["fill-color"][3]&&1===c.paint["fill-opacity"];if(a.isOpaquePass===h){a.setDepthSublayer(1);for(var i=0;i<d.length;i++)e(a,b,c,d[i])}if(!a.isOpaquePass&&c.paint["fill-antialias"]){a.lineWidth(2),a.depthMask(!1),a.setDepthSublayer(c.getPaintProperty("fill-outline-color")?2:0);for(var j=0;j<d.length;j++)f(a,b,c,d[j])}}function e(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h=f.bufferGroups.fill;if(h){var i,j=a.gl,k=c.paint["fill-pattern"];if(k)i=a.useProgram("fillPattern"),g(k,e,d,a,i,!1),j.uniform1f(i.u_opacity,c.paint["fill-opacity"]),j.activeTexture(j.TEXTURE0),a.spriteAtlas.bind(j,!0);else{var l=f.paintAttributes.fill[c.id];i=a.useProgram("fill",l.defines,l.vertexPragmas,l.fragmentPragmas),f.setUniforms(j,"fill",i,c,{zoom:a.transform.zoom})}j.uniformMatrix4fv(i.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),a.enableTileClippingMask(d);for(var m=0;m<h.length;m++){var n=h[m];n.vaos[c.id].bind(j,i,n.layoutVertexBuffer,n.elementBuffer,n.paintVertexBuffers[c.id]),j.drawElements(j.TRIANGLES,n.elementBuffer.length,j.UNSIGNED_SHORT,0)}}}}function f(a,b,c,d){var e=b.getTile(d),f=e.getBucket(c);if(f){var h=f.bufferGroups.fill;if(h){var i,j=a.gl,k=c.paint["fill-pattern"],l=c.getPaintProperty("fill-outline-color");if(k&&!l)i=a.useProgram("fillOutlinePattern"),j.uniform2f(i.u_world,j.drawingBufferWidth,j.drawingBufferHeight);else{var m=f.paintAttributes.fill[c.id];i=a.useProgram("fillOutline",m.defines,m.vertexPragmas,m.fragmentPragmas),j.uniform2f(i.u_world,j.drawingBufferWidth,j.drawingBufferHeight),f.setUniforms(j,"fill",i,c,{zoom:a.transform.zoom})}j.uniform1f(i.u_opacity,c.paint["fill-opacity"]),j.uniformMatrix4fv(i.u_matrix,!1,a.translatePosMatrix(d.posMatrix,e,c.paint["fill-translate"],c.paint["fill-translate-anchor"])),k&&g(k,e,d,a,i,!1),a.enableTileClippingMask(d);for(var n=0;n<h.length;n++){var o=h[n];o.secondVaos[c.id].bind(j,i,o.layoutVertexBuffer,o.elementBuffer2,o.paintVertexBuffers[c.id]),j.drawElements(j.LINES,2*o.elementBuffer2.length,j.UNSIGNED_SHORT,0)}}}}var g=a("./set_pattern");b.exports=d},{"./set_pattern":33}],26:[function(a,b,c){"use strict";function d(a,b,c,d){var g=b.getTile(d),h=g.getBucket(c);if(h){var i=h.bufferGroups.line;if(i){var j=a.gl,k=c.paint["line-dasharray"],l=c.paint["line-pattern"],m=h.paintAttributes.line[c.id],n=a.useProgram(k?"lineSDF":l?"linePattern":"line",m.defines,m.vertexPragmas,m.fragmentPragmas);l||j.uniform4fv(n.u_color,c.paint["line-color"]);var o,p,q,r;if(k)o=a.lineAtlas.getDash(k.from,"round"===c.layout["line-cap"]),p=a.lineAtlas.getDash(k.to,"round"===c.layout["line-cap"]),j.uniform1i(n.u_image,0),j.activeTexture(j.TEXTURE0),a.lineAtlas.bind(j),j.uniform1f(n.u_tex_y_a,o.y),j.uniform1f(n.u_tex_y_b,p.y),j.uniform1f(n.u_mix,k.t);else if(l){if(q=a.spriteAtlas.getPosition(l.from,!0),r=a.spriteAtlas.getPosition(l.to,!0),!q||!r)return;j.uniform1i(n.u_image,0),j.activeTexture(j.TEXTURE0),a.spriteAtlas.bind(j,!0),j.uniform2fv(n.u_pattern_tl_a,q.tl),j.uniform2fv(n.u_pattern_br_a,q.br),j.uniform2fv(n.u_pattern_tl_b,r.tl),j.uniform2fv(n.u_pattern_br_b,r.br),j.uniform1f(n.u_fade,l.t)}var s=1/e.devicePixelRatio;j.uniform1f(n.u_linewidth,c.paint["line-width"]/2),j.uniform1f(n.u_gapwidth,c.paint["line-gap-width"]/2),j.uniform1f(n.u_antialiasing,s/2),j.uniform1f(n.u_blur,c.paint["line-blur"]+s),j.uniform1f(n.u_opacity,c.paint["line-opacity"]),j.uniformMatrix2fv(n.u_antialiasingmatrix,!1,a.transform.lineAntialiasingMatrix),j.uniform1f(n.u_offset,-c.paint["line-offset"]),j.uniform1f(n.u_extra,a.transform.lineStretch),a.enableTileClippingMask(d);var t=a.translatePosMatrix(d.posMatrix,g,c.paint["line-translate"],c.paint["line-translate-anchor"]);if(j.uniformMatrix4fv(n.u_matrix,!1,t),k){var u=o.width*k.fromScale,v=p.width*k.toScale,w=[1/f(g,u,a.transform.tileZoom),-o.height/2],x=[1/f(g,v,a.transform.tileZoom),-p.height/2],y=a.lineAtlas.width/(256*Math.min(u,v)*e.devicePixelRatio)/2;j.uniform2fv(n.u_patternscale_a,w),j.uniform2fv(n.u_patternscale_b,x),j.uniform1f(n.u_sdfgamma,y)}else l&&(j.uniform2fv(n.u_pattern_size_a,[f(g,q.size[0]*l.fromScale,a.transform.tileZoom),r.size[1]]),j.uniform2fv(n.u_pattern_size_b,[f(g,r.size[0]*l.toScale,a.transform.tileZoom),r.size[1]]));j.uniform1f(n.u_ratio,1/f(g,1,a.transform.zoom)),h.setUniforms(j,"line",n,c,{zoom:a.transform.zoom});for(var z=0;z<i.length;z++){var A=i[z];A.vaos[c.id].bind(j,n,A.layoutVertexBuffer,A.elementBuffer,A.paintVertexBuffers[c.id]),j.drawElements(j.TRIANGLES,3*A.elementBuffer.length,j.UNSIGNED_SHORT,0)}}}}var e=a("../util/browser"),f=a("../source/pixels_to_tile_units");b.exports=function(a,b,c,e){if(!a.isOpaquePass){a.setDepthSublayer(0),a.depthMask(!1);var f=a.gl;if(f.enable(f.STENCIL_TEST),!(c.paint["line-width"]<=0))for(var g=0;g<e.length;g++)d(a,b,c,e[g])}}},{"../source/pixels_to_tile_units":40,"../util/browser":105}],27:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=a.gl;f.enable(f.DEPTH_TEST),a.depthMask(!0),f.depthFunc(f.LESS);for(var g=d.length&&d[0].z,h=0;h<d.length;h++){var i=d[h];a.setDepthSublayer(i.z-g),e(a,b,c,i)}f.depthFunc(f.LEQUAL)}}function e(a,b,c,d){var e=a.gl;e.disable(e.STENCIL_TEST);var j=b.getTile(d),k=a.transform.calculatePosMatrix(d,b.getSource().maxzoom),l=a.useProgram("raster");e.uniformMatrix4fv(l.u_matrix,!1,k),e.uniform1f(l.u_brightness_low,c.paint["raster-brightness-min"]),e.uniform1f(l.u_brightness_high,c.paint["raster-brightness-max"]),e.uniform1f(l.u_saturation_factor,h(c.paint["raster-saturation"])),e.uniform1f(l.u_contrast_factor,g(c.paint["raster-contrast"])),e.uniform3fv(l.u_spin_weights,f(c.paint["raster-hue-rotate"]));var m,n,o=j.sourceCache&&j.sourceCache.findLoadedParent(d,0,{}),p=i(j,o,c,a.transform);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,j.texture),e.activeTexture(e.TEXTURE1),o?(e.bindTexture(e.TEXTURE_2D,o.texture),m=Math.pow(2,o.coord.z-j.coord.z),n=[j.coord.x*m%1,j.coord.y*m%1]):e.bindTexture(e.TEXTURE_2D,j.texture),e.uniform2fv(l.u_tl_parent,n||[0,0]),e.uniform1f(l.u_scale_parent,m||1),e.uniform1f(l.u_buffer_scale,1),e.uniform1f(l.u_opacity0,p[0]),e.uniform1f(l.u_opacity1,p[1]),e.uniform1i(l.u_image0,0),e.uniform1i(l.u_image1,1);var q=j.boundsBuffer||a.rasterBoundsBuffer,r=j.boundsVAO||a.rasterBoundsVAO;r.bind(e,l,q),e.drawArrays(e.TRIANGLE_STRIP,0,q.length)}function f(a){a*=Math.PI/180;var b=Math.sin(a),c=Math.cos(a);return[(2*c+1)/3,(-Math.sqrt(3)*b-c+1)/3,(Math.sqrt(3)*b-c+1)/3]}function g(a){return a>0?1/(1-a):1+a}function h(a){return a>0?1-1/(1.001-a):-a}function i(a,b,c,d){var e=[1,0],f=c.paint["raster-fade-duration"];if(a.sourceCache&&f>0){var g=Date.now(),h=(g-a.timeAdded)/f,i=b?(g-b.timeAdded)/f:-1,k=a.sourceCache.getSource(),l=d.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),m=!b||Math.abs(b.coord.z-l)>Math.abs(a.coord.z-l);e[0]=j.clamp(m?h:1-i,0,1),e[1]=b?1-e[0]:0}var n=c.paint["raster-opacity"];return e[0]*=n,e[1]*=n,e}var j=a("../util/util"),k=a("../util/struct_array");b.exports=d,d.RasterBoundsArray=new k({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]})},{"../util/struct_array":120,"../util/util":122}],28:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a.isOpaquePass){var f=!(c.layout["text-allow-overlap"]||c.layout["icon-allow-overlap"]||c.layout["text-ignore-placement"]||c.layout["icon-ignore-placement"]),g=a.gl;f?g.disable(g.STENCIL_TEST):g.enable(g.STENCIL_TEST),e(a,b,c,d,!1,c.paint["icon-translate"],c.paint["icon-translate-anchor"],c.layout["icon-rotation-alignment"],c.layout["icon-rotation-alignment"],c.layout["icon-size"],c.paint["icon-halo-width"],c.paint["icon-halo-color"],c.paint["icon-halo-blur"],c.paint["icon-opacity"],c.paint["icon-color"]),e(a,b,c,d,!0,c.paint["text-translate"],c.paint["text-translate-anchor"],c.layout["text-rotation-alignment"],c.layout["text-pitch-alignment"],c.layout["text-size"],c.paint["text-halo-width"],c.paint["text-halo-color"],c.paint["text-halo-blur"],c.paint["text-opacity"],c.paint["text-color"]),b.map.showCollisionBoxes&&h(a,b,c,d)}}function e(a,b,c,d,e,g,h,i,j,k,l,m,n,o,p){var q=a.gl;a.setDepthSublayer(0),a.depthMask(!1),"map"===j?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST);for(var r=0;r<d.length;r++){var s=b.getTile(d[r]),t=s.getBucket(c);if(t){var u=t.bufferGroups,v=e?u.glyph:u.icon;v.length&&(a.enableTileClippingMask(d[r]),f(a,c,d[r].posMatrix,s,t,v,e,e||t.sdfIcons,!e&&t.iconsNeedLinear,e?t.adjustedTextSize:t.adjustedIconSize,t.fontstack,g,h,i,j,k,l,m,n,o,p))}}q.enable(q.DEPTH_TEST)}function f(a,b,c,d,e,f,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y,z,A=a.gl,B=a.transform,C="map"===p,D="map"===q,E=h?24:1,F=r/E;if(D?(y=i(d,1,a.transform.zoom)*F,z=1/Math.cos(B._pitch),x=[y,y]):(y=a.transform.altitude*F,z=1,x=[B.pixelsToGLUnits[0]*y,B.pixelsToGLUnits[1]*y]),h||a.style.sprite.loaded()){var G=a.useProgram(j?"symbolSDF":"symbolIcon");if(A.uniformMatrix4fv(G.u_matrix,!1,a.translatePosMatrix(c,d,n,o)),A.uniform1i(G.u_rotate_with_map,C),A.uniform1i(G.u_pitch_with_map,D),A.uniform2fv(G.u_extrude_scale,x),A.activeTexture(A.TEXTURE0),A.uniform1i(G.u_texture,0),h){var H=m&&a.glyphSource.getGlyphAtlas(m);if(!H)return;H.updateTexture(A),A.uniform2f(G.u_texsize,H.width/4,H.height/4)}else{var I=a.options.rotating||a.options.zooming,J=1!==F||g.devicePixelRatio!==a.spriteAtlas.pixelRatio||k,K=D||a.transform.pitch;a.spriteAtlas.bind(A,j||I||J||K),A.uniform2f(G.u_texsize,a.spriteAtlas.width/4,a.spriteAtlas.height/4)}var L=Math.log(r/l)/Math.LN2||0;A.uniform1f(G.u_zoom,10*(a.transform.zoom-L)),A.activeTexture(A.TEXTURE1),a.frameHistory.bind(A),A.uniform1i(G.u_fadetexture,1);var M;if(j){var N=8,O=1.19,P=6,Q=.105*E/r/g.devicePixelRatio;if(s){A.uniform1f(G.u_gamma,(u*O/F/N+Q)*z),A.uniform4fv(G.u_color,t),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,(P-s/F)/N);for(var R=0;R<f.length;R++)M=f[R],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}A.uniform1f(G.u_gamma,Q*z),A.uniform4fv(G.u_color,w),A.uniform1f(G.u_opacity,v),A.uniform1f(G.u_buffer,.75),A.uniform1f(G.u_pitch,B.pitch/360*2*Math.PI),A.uniform1f(G.u_bearing,B.bearing/360*2*Math.PI),A.uniform1f(G.u_aspect_ratio,B.width/B.height);for(var S=0;S<f.length;S++)M=f[S],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}else{A.uniform1f(G.u_opacity,v);for(var T=0;T<f.length;T++)M=f[T],M.vaos[b.id].bind(A,G,M.layoutVertexBuffer,M.elementBuffer),A.drawElements(A.TRIANGLES,3*M.elementBuffer.length,A.UNSIGNED_SHORT,0)}}}var g=a("../util/browser"),h=a("./draw_collision_debug"),i=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":40,"../util/browser":105,"./draw_collision_debug":22}],29:[function(a,b,c){"use strict";function d(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.fadeDuration=300,this.previousZoom=0,this.firstFrame=!0}b.exports=d,d.prototype.record=function(a){var b=Date.now();this.firstFrame&&(b=0,this.firstFrame=!1),a=Math.floor(10*a);var c;if(a<this.previousZoom)for(c=a+1;c<=this.previousZoom;c++)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];else for(c=a;c>this.previousZoom;c--)this.changeTimes[c]=b,this.changeOpacities[c]=this.opacities[c];for(c=0;c<256;c++){var d=b-this.changeTimes[c],e=d/this.fadeDuration*255;c<=a?this.opacities[c]=this.changeOpacities[c]+e:this.opacities[c]=this.changeOpacities[c]-e}this.changed=!0,this.previousZoom=a},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.changed&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,256,1,a.ALPHA,a.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,256,1,0,a.ALPHA,a.UNSIGNED_BYTE,this.array))}},{}],30:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}}var e=a("../util/util");b.exports=d,d.prototype.setSprite=function(a){this.sprite=a},d.prototype.getDash=function(a,b){var c=a.join(",")+b;return this.positions[c]||(this.positions[c]=this.addDash(a,b)),this.positions[c]},d.prototype.addDash=function(a,b){var c=b?7:0,d=2*c+1,f=128;if(this.nextRow+d>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var g=0,h=0;h<a.length;h++)g+=a[h];for(var i=this.width/g,j=i/2,k=a.length%2===1,l=-c;l<=c;l++)for(var m=this.nextRow+c+l,n=this.width*m,o=k?-a[a.length-1]:0,p=a[0],q=1,r=0;r<this.width;r++){for(;p<r/i;)o=p,p+=a[q],k&&q===a.length-1&&(p+=a[0]),q++;var s,t=Math.abs(r-o*i),u=Math.abs(r-p*i),v=Math.min(t,u),w=q%2===1;if(b){var x=c?l/c*(j+1):0;if(w){var y=j-Math.abs(x);s=Math.sqrt(v*v+y*y)}else s=j-Math.sqrt(v*v+x*x)}else s=(w?1:-1)*v;this.data[3+4*(n+r)]=Math.max(0,Math.min(255,s+f))}var z={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:g};return this.nextRow+=d,this.dirty=!0,z},d.prototype.bind=function(a){this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this.data))}},{"../util/util":122}],31:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.transform=b,this.reusableTextures={},this.preFbos={},this.frameHistory=new g,this.setup(),this.numSublayers=h.maxUnderzooming+h.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE)}var e=a("../util/browser"),f=a("gl-matrix").mat4,g=a("./frame_history"),h=a("../source/source_cache"),i=a("../data/bucket").EXTENT,j=a("../source/pixels_to_tile_units"),k=a("../util/util"),l=a("../util/struct_array"),m=a("../data/buffer"),n=a("./vertex_array_object"),o=a("./draw_raster").RasterBoundsArray,p=a("./create_uniform_pragmas");b.exports=d,k.extend(d.prototype,a("./painter/use_program")),d.prototype.resize=function(a,b){var c=this.gl;this.width=a*e.devicePixelRatio,this.height=b*e.devicePixelRatio,c.viewport(0,0,this.width,this.height)},d.prototype.setup=function(){var a=this.gl;a.verbose=!0,a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),this._depthMask=!1,a.depthMask(!1);var b=this.PosArray=new l({members:[{name:"a_pos",type:"Int16",components:2}]}),c=new b;c.emplaceBack(0,0),c.emplaceBack(i,0),c.emplaceBack(0,i),c.emplaceBack(i,i),this.tileExtentBuffer=new m(c.serialize(),b.serialize(),m.BufferType.VERTEX),this.tileExtentVAO=new n,this.tileExtentPatternVAO=new n;var d=new b;d.emplaceBack(0,0),d.emplaceBack(i,0),d.emplaceBack(i,i),d.emplaceBack(0,i),d.emplaceBack(0,0),this.debugBuffer=new m(d.serialize(),b.serialize(),m.BufferType.VERTEX),this.debugVAO=new n;var e=new o;e.emplaceBack(0,0,0,0),e.emplaceBack(i,0,32767,0),e.emplaceBack(0,i,0,32767),e.emplaceBack(i,i,32767,32767),this.rasterBoundsBuffer=new m(e.serialize(),o.serialize(),m.BufferType.VERTEX),this.rasterBoundsVAO=new n},d.prototype.clearColor=function(){var a=this.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},d.prototype.clearStencil=function(){var a=this.gl;a.clearStencil(0),a.stencilMask(255),a.clear(a.STENCIL_BUFFER_BIT)},d.prototype.clearDepth=function(){var a=this.gl;a.clearDepth(1),this.depthMask(!0),a.clear(a.DEPTH_BUFFER_BIT)},d.prototype._renderTileClippingMasks=function(a){var b=this.gl;b.colorMask(!1,!1,!1,!1),this.depthMask(!1),b.disable(b.DEPTH_TEST),b.enable(b.STENCIL_TEST),b.stencilMask(248),b.stencilOp(b.KEEP,b.KEEP,b.REPLACE);var c=1;this._tileClippingMaskIDs={};for(var d=0;d<a.length;d++){var e=a[d],f=this._tileClippingMaskIDs[e.id]=c++<<3;b.stencilFunc(b.ALWAYS,f,248);var g=p([{name:"u_color",components:4},{name:"u_opacity",components:1}]),h=this.useProgram("fill",[],g,g);b.uniformMatrix4fv(h.u_matrix,!1,e.posMatrix),this.tileExtentVAO.bind(b,h,this.tileExtentBuffer),b.drawArrays(b.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}b.stencilMask(0),b.colorMask(!0,!0,!0,!0),this.depthMask(!0),b.enable(b.DEPTH_TEST)},d.prototype.enableTileClippingMask=function(a){var b=this.gl;b.stencilFunc(b.EQUAL,this._tileClippingMaskIDs[a.id],248)},d.prototype.prepareBuffers=function(){},d.prototype.bindDefaultFramebuffer=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)};var q={symbol:a("./draw_symbol"),circle:a("./draw_circle"),line:a("./draw_line"),fill:a("./draw_fill"),extrusion:a("./draw_extrusion"),raster:a("./draw_raster"),background:a("./draw_background"),debug:a("./draw_debug")};d.prototype.render=function(a,b){this.style=a,this.options=b,this.lineAtlas=a.lineAtlas,this.spriteAtlas=a.spriteAtlas,this.spriteAtlas.setSprite(a.sprite),this.glyphSource=a.glyphSource,this.frameHistory.record(this.transform.zoom),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(b.showOverdrawInspector),this.depthRange=(a._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass({isOpaquePass:!0}),this.renderPass({isOpaquePass:!1})},d.prototype.renderPass=function(a){var b=this.style._groups,c=a.isOpaquePass;this.currentLayer=c?this.style._order.length:-1;for(var d=0;d<b.length;d++){var e,f=b[c?b.length-1-d:d],g=this.style.sourceCaches[f.source],h=[];if(g){for(h=g.getVisibleCoordinates(),e=0;e<h.length;e++)h[e].posMatrix=this.transform.calculatePosMatrix(h[e],g.getSource().maxzoom);this.clearStencil(),g.prepare&&g.prepare(),g.getSource().isTileClipped&&this._renderTileClippingMasks(h)}for(c?(this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.isOpaquePass=!0):(this.gl.enable(this.gl.BLEND),this.isOpaquePass=!1,h.reverse()),e=0;e<f.length;e++){var i=f[c?f.length-1-e:e];this.currentLayer+=c?-1:1,this.renderLayer(this,g,i,h)}g&&q.debug(this,g,h)}},d.prototype.depthMask=function(a){a!==this._depthMask&&(this._depthMask=a,this.gl.depthMask(a))},d.prototype.renderLayer=function(a,b,c,d){if(!c.isHidden(this.transform.zoom)&&("background"===c.type||d.length)){this.id=c.id;var e=c.type;"fill"!==e||c.isPaintValueFeatureConstant("fill-extrude-height")&&c.isPaintValueZoomConstant("fill-extrude-height")&&0===c.getPaintValue("fill-extrude-height")||(e="extrusion"),q[e](a,b,c,d)}},d.prototype.setDepthSublayer=function(a){var b=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon,c=b-1+this.depthRange;this.gl.depthRange(c,b)},d.prototype.translatePosMatrix=function(a,b,c,d){if(!c[0]&&!c[1])return a;if("viewport"===d){var e=Math.sin(-this.transform.angle),g=Math.cos(-this.transform.angle);c=[c[0]*g-c[1]*e,c[0]*e+c[1]*g]}var h=[j(b,c[0],this.transform.zoom),j(b,c[1],this.transform.zoom),0],i=new Float32Array(16);return f.translate(i,a,h),i},d.prototype.saveTileTexture=function(a){var b=this.reusableTextures[a.size];b?b.push(a):this.reusableTextures[a.size]=[a]},d.prototype.saveViewportTexture=function(a){this.reusableTextures.viewport||(this.reusableTextures.viewport={}),this.reusableTextures.viewport.texture=a},d.prototype.getTileTexture=function(a,b){var c=this.reusableTextures[a];if(c){var d=c[b||a];return d&&d.length>0?d.pop():null}},d.prototype.getViewportTexture=function(a,b){if(this.reusableTextures.viewport){var c=this.reusableTextures.viewport.texture;return c.width===a&&c.height===b?c:(this.gl.deleteTexture(c),void(this.reusableTextures.viewport.texture=null))}},d.prototype.lineWidth=function(a){this.gl.lineWidth(k.clamp(a,this.lineWidthRange[0],this.lineWidthRange[1]))},d.prototype.showOverdrawInspector=function(a){if(a||this._showOverdrawInspector){this._showOverdrawInspector=a;var b=this.gl;if(a){b.blendFunc(b.CONSTANT_COLOR,b.ONE);var c=8,d=1/c;b.blendColor(d,d,d,0),b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT)}else b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA)}}},{"../data/bucket":2,"../data/buffer":8,"../source/pixels_to_tile_units":40,"../source/source_cache":44,"../util/browser":105,"../util/struct_array":120,"../util/util":122,"./create_uniform_pragmas":19,"./draw_background":20,"./draw_circle":21,"./draw_debug":23,"./draw_extrusion":24,"./draw_fill":25,"./draw_line":26,"./draw_raster":27,"./draw_symbol":28,"./frame_history":29,"./painter/use_program":32,"./vertex_array_object":34,"gl-matrix":150}],32:[function(a,b,c){"use strict";function d(a,b){return a.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(a,c,d,e,f){return b[c][f].replace(/{type}/g,e).replace(/{precision}/g,d)})}var e=a("../../util/util"),f=a("mapbox-gl-shaders"),g=f.util;b.exports._createProgram=function(a,b,c,h){for(var i=this.gl,j=i.createProgram(),k=f[a],l="#define MAPBOX_GL_JS;\n",m=0;m<b.length;m++)l+="#define "+b[m]+";\n";var n=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(n,d(l+k.fragmentSource,h)),i.compileShader(n),i.attachShader(j,n);var o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,d(l+g+k.vertexSource,c)),i.compileShader(o),i.attachShader(j,o),i.linkProgram(j);for(var p={},q=i.getProgramParameter(j,i.ACTIVE_ATTRIBUTES),r=0;r<q;r++){var s=i.getActiveAttrib(j,r);p[s.name]=i.getAttribLocation(j,s.name)}for(var t={},u=i.getProgramParameter(j,i.ACTIVE_UNIFORMS),v=0;v<u;v++){var w=i.getActiveUniform(j,v);t[w.name]=i.getUniformLocation(j,w.name)}return e.extend({program:j,definition:k,attributes:p,numAttributes:q},p,t)},b.exports._createProgramCached=function(a,b,c,d){this.cache=this.cache||{};var e=JSON.stringify({name:a,defines:b,vertexPragmas:c,fragmentPragmas:d});return this.cache[e]||(this.cache[e]=this._createProgram(a,b,c,d)),this.cache[e]},b.exports.useProgram=function(a,b,c,d){var e=this.gl;b=b||[],this._showOverdrawInspector&&(b=b.concat("OVERDRAW_INSPECTOR"));var f=this._createProgramCached(a,b,c,d),g=this.currentProgram;return g!==f&&(e.useProgram(f.program),this.currentProgram=f),f}},{"../../util/util":122,"mapbox-gl-shaders":163}],33:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){var h=d.gl,i=d.spriteAtlas.getPosition(a.from,!0),j=d.spriteAtlas.getPosition(a.to,!0);if(i&&j){h.uniform1i(f.u_image,0),h.uniform2fv(f.u_pattern_tl_a,i.tl),h.uniform2fv(f.u_pattern_br_a,i.br),h.uniform2fv(f.u_pattern_tl_b,j.tl),h.uniform2fv(f.u_pattern_br_b,j.br),h.uniform1f(f.u_mix,a.t),h.uniform1f(f.u_tile_units_to_pixels,1/e(b,1,d.transform.tileZoom)),h.uniform2fv(f.u_pattern_size_a,i.size),h.uniform2fv(f.u_pattern_size_b,j.size),h.uniform1f(f.u_scale_a,a.fromScale),h.uniform1f(f.u_scale_b,a.toScale);var k=b.tileSize*Math.pow(2,d.transform.tileZoom-b.coord.z),l=k*(b.coord.x+c.w*Math.pow(2,b.coord.z)),m=k*b.coord.y;h.uniform2f(f.u_pixel_coord_upper,l>>16,m>>16),h.uniform2f(f.u_pixel_coord_lower,65535&l,65535&m),g&&h.uniform1f(f.u_height_factor,-Math.pow(2,d.transform.tileZoom)/k>>3),h.activeTexture(h.TEXTURE0),d.spriteAtlas.bind(h,!0)}}var e=a("../source/pixels_to_tile_units");b.exports=d},{"../source/pixels_to_tile_units":40}],34:[function(a,b,c){"use strict";function d(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.vao=null}b.exports=d,d.prototype.bind=function(a,b,c,d,e){void 0===a.extVertexArrayObject&&(a.extVertexArrayObject=a.getExtension("OES_vertex_array_object"));var f=!this.vao||this.boundProgram!==b||this.boundVertexBuffer!==c||this.boundVertexBuffer2!==e||this.boundElementBuffer!==d;!a.extVertexArrayObject||f?(this.freshBind(a,b,c,d,e),this.gl=a):a.extVertexArrayObject.bindVertexArrayOES(this.vao)},d.prototype.freshBind=function(a,b,c,d,e){var f,g=b.numAttributes;if(a.extVertexArrayObject)this.vao&&this.destroy(),this.vao=a.extVertexArrayObject.createVertexArrayOES(),a.extVertexArrayObject.bindVertexArrayOES(this.vao),f=0,this.boundProgram=b,this.boundVertexBuffer=c,this.boundVertexBuffer2=e,this.boundElementBuffer=d;else{f=a.currentNumAttributes||0;for(var h=g;h<f;h++)a.disableVertexAttribArray(h)}for(var i=f;i<g;i++)a.enableVertexAttribArray(i);c.bind(a),c.setVertexAttribPointers(a,b),e&&(e.bind(a),e.setVertexAttribPointers(a,b)),d&&d.bind(a),a.currentNumAttributes=g},d.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}},{}],35:[function(a,b,c){"use strict";function d(a,b,c,d){b=b||{},this.id=a,this.dispatcher=c,this._data=b.data,void 0!==b.maxzoom&&(this.maxzoom=b.maxzoom),b.type&&(this.type=b.type);var e=i/this.tileSize;this.workerOptions=g.extend({source:this.id,cluster:b.cluster||!1,geojsonVtOptions:{buffer:(void 0!==b.buffer?b.buffer:128)*e,tolerance:(void 0!==b.tolerance?b.tolerance:.375)*e,extent:i,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(b.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:i,radius:(b.clusterRadius||50)*e,log:!1}},b.workerOptions),this.setEventedParent(d),this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(a){return a?void this.fire("error",{error:a}):(this.fire("data",{dataType:"source"}),void this.fire("source.load"))}.bind(this))}function e(a){var b=h.document.createElement("a");return b.href=a,b.href}var f=a("../util/evented"),g=a("../util/util"),h=a("../util/window"),i=a("../data/bucket").EXTENT;b.exports=d,d.prototype=g.inherit(f,{type:"geojson",minzoom:0,maxzoom:18,tileSize:512,isTileClipped:!0,reparseOverscaled:!0,onAdd:function(a){this.map=a},setData:function(a){return this._data=a,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(a){return a?this.fire("error",{error:a}):void this.fire("data",{dataType:"source"})}.bind(this)),this},_updateWorkerData:function(a){var b=g.extend({},this.workerOptions),c=this._data;"string"==typeof c?b.url=e(c):b.data=JSON.stringify(c),this.workerID=this.dispatcher.send(this.type+".loadData",b,function(b){this._loaded=!0,a(b)}.bind(this))},loadTile:function(a,b){var c=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,d={type:this.type,uid:a.uid,coord:a.coord,zoom:a.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:c,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID=this.dispatcher.send("load tile",d,function(c,d){if(a.unloadVectorData(),!a.aborted)return c?b(c):(a.loadVectorData(d,this.map.painter),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null))}.bind(this),this.workerID)},abortTile:function(a){a.aborted=!0},unloadTile:function(a){a.unloadVectorData(),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},function(){},a.workerID)},serialize:function(){return{type:this.type,data:this._data}}})},{"../data/bucket":2,"../util/evented":113,"../util/util":122,"../util/window":107}],36:[function(a,b,c){"use strict";function d(a,b,c){c&&(this.loadGeoJSON=c),l.call(this,a,b)}var e=a("../util/util"),f=a("../util/ajax"),g=a("geojson-rewind"),h=a("./geojson_wrapper"),i=a("vt-pbf"),j=a("supercluster"),k=a("geojson-vt"),l=a("./vector_tile_worker_source");b.exports=d,d.prototype=e.inherit(l,{_geoJSONIndexes:{},loadVectorData:function(a,b){var c=a.source,d=a.coord;if(!this._geoJSONIndexes[c])return b(null,null);var e=this._geoJSONIndexes[c].getTile(Math.min(d.z,a.maxZoom),d.x,d.y);if(!e)return b(null,null);var f=new h(e.features);f.name="_geojsonTileLayer";var g=i({layers:{_geojsonTileLayer:f}});0===g.byteOffset&&g.byteLength===g.buffer.byteLength||(g=new Uint8Array(g)),f.rawData=g.buffer,b(null,f)},loadData:function(a,b){var c=function(c,d){return c?b(c):"object"!=typeof d?b(new Error("Input data is not a valid GeoJSON object.")):(g(d,!0),void this._indexData(d,a,function(c,d){return c?b(c):(this._geoJSONIndexes[a.source]=d,void b(null))}.bind(this)))}.bind(this);this.loadGeoJSON(a,c)},loadGeoJSON:function(a,b){if(a.url)f.getJSON(a.url,b);else{if("string"!=typeof a.data)return b(new Error("Input data is not a valid GeoJSON object."));try{return b(null,JSON.parse(a.data))}catch(a){return b(new Error("Input data is not a valid GeoJSON object."))}}},_indexData:function(a,b,c){try{b.cluster?c(null,j(b.superclusterOptions).load(a.features)):c(null,k(a,b.geojsonVtOptions))}catch(a){return c(a)}}})},{"../util/ajax":104,"../util/util":122,"./geojson_wrapper":37,"./vector_tile_worker_source":48,"geojson-rewind":139,"geojson-vt":145,supercluster:195,"vt-pbf":206}],37:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length,this.extent=h}function e(a){if(this.type=a.type,1===a.type){this.rawGeometry=[];for(var b=0;b<a.geometry.length;b++)this.rawGeometry.push([a.geometry[b]])}else this.rawGeometry=a.geometry;this.properties=a.tags,this.extent=h}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature,h=a("../data/bucket").EXTENT;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-(1/0),d=1/0,e=-(1/0),f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"../data/bucket":2,"point-geometry":192,"vector-tile":202}],38:[function(a,b,c){"use strict";function d(a,b,c,d){this.id=a,this.dispatcher=c,this.url=b.url,this.coordinates=b.coordinates,this.setEventedParent(d),this.fire("dataloading",{dataType:"source"}),j.getImage(b.url,function(a,c){return a?this.fire("error",{error:a}):(this.image=c,this._loaded=!0,this.fire("data",{dataType:"source"}),this.fire("source.load"),void(this.map&&this.setCoordinates(b.coordinates)))}.bind(this))}var e=a("../util/util"),f=a("./tile_coord"),g=a("../geo/lng_lat"),h=a("point-geometry"),i=a("../util/evented"),j=a("../util/ajax"),k=a("../data/bucket").EXTENT,l=a("../render/draw_raster").RasterBoundsArray,m=a("../data/buffer"),n=a("../render/vertex_array_object");b.exports=d,d.prototype=e.inherit(i,{minzoom:0,maxzoom:22,tileSize:512,onAdd:function(a){this.map=a,this.image&&this.setCoordinates(this.coordinates)},setCoordinates:function(a){this.coordinates=a;var b=this.map,c=a.map(function(a){return b.transform.locationCoordinate(g.convert(a)).zoomTo(0)}),d=this.centerCoord=e.getCoordinatesCenter(c);return d.column=Math.round(d.column),d.row=Math.round(d.row),this.minzoom=this.maxzoom=d.zoom,this.coord=new f(d.zoom,d.column,d.row),this._tileCoords=c.map(function(a){var b=a.zoomTo(d.zoom);return new h(Math.round((b.column-d.column)*k),Math.round((b.row-d.row)*k))}),this.fire("data",{dataType:"source"}),this},_setTile:function(a){this._prepared=!1,this.tile=a;var b=32767,c=new l;c.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),c.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,b,0),c.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,b),c.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,b,b),this.tile.buckets={},this.tile.boundsBuffer=new m(c.serialize(),l.serialize(),m.BufferType.VERTEX),this.tile.boundsVAO=new n,this.tile.state="loaded"},prepare:function(){this.tile&&this._loaded&&this.image&&this.image.complete&&this._prepareImage(this.map.painter.gl,this.image)},_prepareImage:function(a,b){this._prepared?(a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,b)):(this._prepared=!0,this.tile.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.tile.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b))},loadTile:function(a,b){this.coord&&this.coord.toString()===a.coord.toString()?(this._setTile(a),b(null)):(a.state="errored",b(null))},serialize:function(){return{type:"image",urls:this.url,coordinates:this.coordinates}}})},{"../data/bucket":2,"../data/buffer":8,"../geo/lng_lat":13,"../render/draw_raster":27,"../render/vertex_array_object":34,"../util/ajax":104,"../util/evented":113,"../util/util":122,"./tile_coord":46,"point-geometry":192}],39:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/ajax"),f=a("../util/browser"),g=a("../util/mapbox").normalizeSourceURL;b.exports=function(a,b){var c=function(a,c){if(a)return b(a);var e=d.pick(c,["tiles","minzoom","maxzoom","attribution"]);c.vector_layers&&(e.vectorLayers=c.vector_layers,e.vectorLayerIds=e.vectorLayers.map(function(a){return a.id})),b(null,e)};a.url?e.getJSON(g(a.url),c):f.frame(c.bind(null,null,a))}},{"../util/ajax":104,"../util/browser":105,"../util/mapbox":119,"../util/util":122}],40:[function(a,b,c){"use strict";var d=a("../data/bucket");b.exports=function(a,b,c){return b*(d.EXTENT/(a.tileSize*Math.pow(2,c-a.coord.z)))}},{"../data/bucket":2}],41:[function(a,b,c){"use strict";function d(a,b){var c=a.coord,d=b.coord;return c.z-d.z||c.y-d.y||c.w-d.w||c.x-d.x}function e(a){for(var b=a[0]||{},c=1;c<a.length;c++){var d=a[c];for(var e in d){var f=d[e],g=b[e];if(void 0===g)g=b[e]=f;else for(var h=0;h<f.length;h++)g.push(f[h])}}return b}var f=a("./tile_coord");c.rendered=function(a,b,c,f,g,h){var i=a.tilesIn(c);i.sort(d);for(var j=[],k=0;k<i.length;k++){var l=i[k];l.tile.featureIndex&&j.push(l.tile.featureIndex.query({queryGeometry:l.queryGeometry,scale:l.scale,tileSize:l.tile.tileSize,bearing:h,params:f},b))}return e(j)},c.source=function(a,b){for(var c=a.getRenderableIds().map(function(b){return a.getTileByID(b)}),d=[],e={},g=0;g<c.length;g++){var h=c[g],i=new f(Math.min(h.sourceMaxZoom,h.coord.z),h.coord.x,h.coord.y,0).id;e[i]||(e[i]=!0,h.querySourceFeatures(d,b))}return d}},{"./tile_coord":46}],42:[function(a,b,c){"use strict";function d(a,b,c,d){this.id=a,this.dispatcher=c,e.extend(this,e.pick(b,["url","scheme","tileSize"])),this.setEventedParent(d),this.fire("dataloading",{dataType:"source"}),h(b,function(a,b){return a?this.fire("error",a):(e.extend(this,b),this.fire("data",{dataType:"source"}),void this.fire("source.load"))}.bind(this))}var e=a("../util/util"),f=a("../util/ajax"),g=a("../util/evented"),h=a("./load_tilejson"),i=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=e.inherit(g,{minzoom:0,maxzoom:22,roundZoom:!0,scheme:"xyz",tileSize:512,_loaded:!1,onAdd:function(a){this.map=a},serialize:function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles}},loadTile:function(a,b){function c(c,d){if(delete a.request,!a.aborted){if(c)return b(c);var e=this.map.painter.gl;a.texture=this.map.painter.getTileTexture(d.width),a.texture?(e.bindTexture(e.TEXTURE_2D,a.texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,d)):(a.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,a.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,d),a.texture.size=d.width),e.generateMipmap(e.TEXTURE_2D),this.map.animationLoop.set(this.map.style.rasterFadeDuration),a.state="loaded",b(null)}}var d=i(a.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);a.request=f.getImage(d,c.bind(this))},abortTile:function(a){a.request&&(a.request.abort(),delete a.request)},unloadTile:function(a){a.texture&&this.map.painter.saveTileTexture(a.texture)}})},{"../util/ajax":104,"../util/evented":113,"../util/mapbox":119,"../util/util":122,"./load_tilejson":39}],43:[function(a,b,c){"use strict";var d=a("../util/util"),e={vector:a("../source/vector_tile_source"),raster:a("../source/raster_tile_source"),geojson:a("../source/geojson_source"),video:a("../source/video_source"),image:a("../source/image_source")};c.create=function(a,b,c,f){if(b=new e[b.type](a,b,c,f),b.setEventedParent(f),b.id!==a)throw new Error("Expected Source id to be "+a+" instead of "+b.id);return d.bindAll(["load","abort","unload","serialize","prepare"],b),b},c.getType=function(a){return e[a]},c.setType=function(a,b){e[a]=b}},{"../source/geojson_source":35,"../source/image_source":38,"../source/raster_tile_source":42,"../source/vector_tile_source":47,"../source/video_source":49,"../util/util":122}],44:[function(a,b,c){"use strict";function d(a,b,c){this.id=a,this.dispatcher=c,this._source=g.create(a,b,c,this),this.on("source.load",function(){this.map&&this._source.onAdd&&this._source.onAdd(this.map),this._sourceLoaded=!0}),this.on("error",function(){this._sourceErrored=!0}),this.on("data",function(a){this._sourceLoaded&&"source"===a.dataType&&(this.reload(),this.transform&&this.update(this.transform,this.map&&this.map.style.rasterFadeDuration))}),this._tiles={},this._cache=new k(0,this.unloadTile.bind(this)),this._isIdRenderable=this._isIdRenderable.bind(this)}function e(a,b,c){var d=c.zoomTo(Math.min(a.z,b));return{x:(d.column-(a.x+a.w*Math.pow(2,a.z)))*n,y:(d.row-a.y)*n}}function f(a,b){return a%32-b%32}var g=a("./source"),h=a("./tile"),i=a("../util/evented"),j=a("./tile_coord"),k=a("../util/lru_cache"),l=a("../geo/coordinate"),m=a("../util/util"),n=a("../data/bucket").EXTENT;b.exports=d,d.maxOverzooming=10,d.maxUnderzooming=3,d.prototype=m.inherit(i,{onAdd:function(a){this.map=a,this._source&&this._source.onAdd&&this._source.onAdd(a)},loaded:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var a in this._tiles){var b=this._tiles[a];if("loaded"!==b.state&&"errored"!==b.state)return!1}return!0},getSource:function(){return this._source},loadTile:function(a,b){return this._source.loadTile(a,b)},unloadTile:function(a){if(this._source.unloadTile)return this._source.unloadTile(a)},abortTile:function(a){if(this._source.abortTile)return this._source.abortTile(a)},serialize:function(){return this._source.serialize()},prepare:function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},getIds:function(){return Object.keys(this._tiles).map(Number).sort(f)},getRenderableIds:function(){return this.getIds().filter(this._isIdRenderable)},_isIdRenderable:function(a){return this._tiles[a].hasData()&&!this._coveredTiles[a]},reload:function(){this._cache.reset();for(var a in this._tiles){var b=this._tiles[a];"loading"!==b.state&&(b.state="reloading"),this.loadTile(this._tiles[a],this._tileLoaded.bind(this,this._tiles[a]))}},_tileLoaded:function(a,b){return b?(a.state="errored",void this._source.fire("error",{tile:a,error:b})):(a.sourceCache=this,a.timeAdded=(new Date).getTime(),this._source.fire("data",{tile:a,dataType:"tile"}),void(this.map&&(this.map.painter.tileExtentVAO.vao=null)))},getTile:function(a){return this.getTileByID(a.id)},getTileByID:function(a){return this._tiles[a]},getZoom:function(a){return a.zoom+a.scaleZoom(a.tileSize/this._source.tileSize)},findLoadedChildren:function(a,b,c){var d=!1;for(var e in this._tiles){var f=this._tiles[e];if(!(c[e]||!f.hasData()||f.coord.z<=a.z||f.coord.z>b)){var g=Math.pow(2,Math.min(f.coord.z,this._source.maxzoom)-Math.min(a.z,this._source.maxzoom));if(Math.floor(f.coord.x/g)===a.x&&Math.floor(f.coord.y/g)===a.y)for(c[e]=!0,d=!0;f&&f.coord.z-1>a.z;){var h=f.coord.parent(this._source.maxzoom).id;f=this._tiles[h],f&&f.hasData()&&(delete c[e],c[h]=!0)}}}return d},findLoadedParent:function(a,b,c){for(var d=a.z-1;d>=b;d--){a=a.parent(this._source.maxzoom);var e=this._tiles[a.id];if(e&&e.hasData())return c[a.id]=!0,e;if(this._cache.has(a.id))return this.addTile(a),c[a.id]=!0,this._tiles[a.id]}},updateCacheSize:function(a){var b=Math.ceil(a.width/a.tileSize)+1,c=Math.ceil(a.height/a.tileSize)+1,d=b*c,e=5;this._cache.setMaxSize(Math.floor(d*e))},update:function(a,b){if(this._sourceLoaded){var c,e,f;this.updateCacheSize(a);var g=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(a)),h=Math.max(g-d.maxOverzooming,this._source.minzoom),i=Math.max(g+d.maxUnderzooming,this._source.minzoom),k={},l=(new Date).getTime();this._coveredTiles={};var n;for(n=this.used?this._source.coord?[this._source.coord]:a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}):[],c=0;c<n.length;c++)e=n[c],f=this.addTile(e),k[e.id]=!0,f.hasData()||this.findLoadedChildren(e,i,k)||this.findLoadedParent(e,h,k);for(var o={},p=Object.keys(k),q=0;q<p.length;q++){var r=p[q];e=j.fromID(r),f=this._tiles[r],f&&f.timeAdded>l-(b||0)&&(this.findLoadedChildren(e,i,k)&&(k[r]=!0),this.findLoadedParent(e,h,o))}var s;for(s in o)k[s]||(this._coveredTiles[s]=!0);for(s in o)k[s]=!0;var t=m.keysDifference(this._tiles,k);for(c=0;c<t.length;c++)this.removeTile(+t[c]);this.transform=a}},addTile:function(a){var b=this._tiles[a.id];if(b)return b;var c=a.wrapped();if(b=this._tiles[c.id],b||(b=this._cache.get(c.id),b&&this._redoPlacement&&this._redoPlacement(b)),!b){var d=a.z,e=d>this._source.maxzoom?Math.pow(2,d-this._source.maxzoom):1;b=new h(c,this._source.tileSize*e,this._source.maxzoom),this.loadTile(b,this._tileLoaded.bind(this,b))}return b.uses++,this._tiles[a.id]=b,this._source.fire("dataloading",{tile:b,dataType:"tile"}),b},removeTile:function(a){var b=this._tiles[a];b&&(b.uses--,delete this._tiles[a],this._source.fire("data",{tile:b,dataType:"tile"}),b.uses>0||(b.hasData()?this._cache.add(b.coord.wrapped().id,b):(b.aborted=!0,this.abortTile(b),this.unloadTile(b))))},clearTiles:function(){for(var a in this._tiles)this.removeTile(a);this._cache.reset()},tilesIn:function(a){for(var b={},c=this.getIds(),d=1/0,f=1/0,g=-(1/0),h=-(1/0),i=a[0].zoom,k=0;k<a.length;k++){var m=a[k];d=Math.min(d,m.column),f=Math.min(f,m.row),g=Math.max(g,m.column),h=Math.max(h,m.row)}for(var o=0;o<c.length;o++){var p=this._tiles[c[o]],q=j.fromID(c[o]),r=[e(q,p.sourceMaxZoom,new l(d,f,i)),e(q,p.sourceMaxZoom,new l(g,h,i))];if(r[0].x<n&&r[0].y<n&&r[1].x>=0&&r[1].y>=0){for(var s=[],t=0;t<a.length;t++)s.push(e(q,p.sourceMaxZoom,a[t]));var u=b[p.coord.id];void 0===u&&(u=b[p.coord.id]={tile:p,coord:q,queryGeometry:[],scale:Math.pow(2,this.transform.zoom-p.coord.z)}),u.queryGeometry.push(s)}}var v=[];for(var w in b)v.push(b[w]);return v},redoPlacement:function(){for(var a=this.getIds(),b=0;b<a.length;b++){var c=this.getTileByID(a[b]);c.redoPlacement(this)}},getVisibleCoordinates:function(){return this.getRenderableIds().map(j.fromID)}})},{"../data/bucket":2,"../geo/coordinate":12,"../util/evented":113,"../util/lru_cache":118,"../util/util":122,"./source":43,"./tile":45,"./tile_coord":46}],45:[function(a,b,c){"use strict";function d(a,b,c){this.coord=a,this.uid=f.uniqueId(),this.uses=0,this.tileSize=b,this.sourceMaxZoom=c,this.buckets={},this.state="loading"}function e(a,b){if(b){for(var c={},d=0;d<a.length;d++){var e=b.getLayer(a[d].layerId);if(e){var h=g.create(f.extend({layer:e,childLayers:a[d].childLayerIds.map(b.getLayer.bind(b)).filter(function(a){return a})},a[d]));c[h.id]=h}}return c}}var f=a("../util/util"),g=a("../data/bucket"),h=a("../data/feature_index"),i=a("vector-tile"),j=a("pbf"),k=a("../util/vectortile_to_geojson"),l=a("feature-filter"),m=a("../symbol/collision_tile"),n=a("../symbol/collision_box"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype={loadVectorData:function(a,b){this.hasData()&&this.unloadVectorData(b),this.state="loaded",a&&(a.rawTileData&&(this.rawTileData=a.rawTileData),this.collisionBoxArray=new n(a.collisionBoxArray),this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new o(a.symbolInstancesArray),this.symbolQuadsArray=new p(a.symbolQuadsArray),this.featureIndex=new h(a.featureIndex,this.rawTileData,this.collisionTile),this.buckets=e(a.buckets,b.style))},reloadSymbolData:function(a,b){if("unloaded"!==this.state){this.collisionTile=new m(a.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var c in this.buckets){var d=this.buckets[c];"symbol"===d.type&&(d.destroy(),delete this.buckets[c])}f.extend(this.buckets,e(a.buckets,b))}},unloadVectorData:function(){for(var a in this.buckets)this.buckets[a].destroy();this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.buckets=null,this.state="unloaded"},redoPlacement:function(a){function b(b,c){this.reloadSymbolData(c,a.map.style),a.fire("data",{tile:this,dataType:"tile"}),a.map&&(a.map.painter.tileExtentVAO.vao=null),this.state="loaded",this.redoWhenDone&&(this.redoPlacement(a),this.redoWhenDone=!1)}return"loaded"!==this.state||"reloading"===this.state?void(this.redoWhenDone=!0):(this.state="reloading",void a.dispatcher.send("redo placement",{uid:this.uid,source:a.id,angle:a.map.transform.angle,pitch:a.map.transform.pitch,showCollisionBoxes:a.map.showCollisionBoxes},b.bind(this),this.workerID))},getBucket:function(a){return this.buckets&&this.buckets[a.ref||a.id]},querySourceFeatures:function(a,b){
if(this.rawTileData){this.vtLayers||(this.vtLayers=new i.VectorTile(new j(this.rawTileData)).layers);var c=this.vtLayers._geojsonTileLayer||this.vtLayers[b.sourceLayer];if(c)for(var d=l(b.filter),e={z:this.coord.z,x:this.coord.x,y:this.coord.y},f=0;f<c.length;f++){var g=c.feature(f);if(d(g)){var h=new k(g,this.coord.z,this.coord.x,this.coord.y);h.tile=e,a.push(h)}}}},hasData:function(){return"loaded"===this.state||"reloading"===this.state}}},{"../data/bucket":2,"../data/feature_index":10,"../symbol/collision_box":72,"../symbol/collision_tile":74,"../symbol/symbol_instances":83,"../symbol/symbol_quads":84,"../util/util":122,"../util/vectortile_to_geojson":123,"feature-filter":138,pbf:190,"vector-tile":202}],46:[function(a,b,c){"use strict";function d(a,b,c,d){isNaN(d)&&(d=0),this.z=+a,this.x=+b,this.y=+c,this.w=+d,d*=2,d<0&&(d=d*-1-1);var e=1<<this.z;this.id=32*(e*e*d+e*this.y+this.x)+this.z,this.posMatrix=null}function e(a,b,c){for(var d,e="",f=a;f>0;f--)d=1<<f-1,e+=(b&d?1:0)+(c&d?2:0);return e}function f(a,b){if(a.row>b.row){var c=a;a=b,b=c}return{x0:a.column,y0:a.row,x1:b.column,y1:b.row,dx:b.column-a.column,dy:b.row-a.row}}function g(a,b,c,d,e){var f=Math.max(c,Math.floor(b.y0)),g=Math.min(d,Math.ceil(b.y1));if(a.x0===b.x0&&a.y0===b.y0?a.x0+b.dy/a.dy*a.dx<b.x1:a.x1-b.dy/a.dy*a.dx<b.x0){var h=a;a=b,b=h}for(var i=a.dx/a.dy,j=b.dx/b.dy,k=a.dx>0,l=b.dx<0,m=f;m<g;m++){var n=i*Math.max(0,Math.min(a.dy,m+k-a.y0))+a.x0,o=j*Math.max(0,Math.min(b.dy,m+l-b.y0))+b.x0;e(Math.floor(o),Math.ceil(n),m)}}function h(a,b,c,d,e,h){var i,j=f(a,b),k=f(b,c),l=f(c,a);j.dy>k.dy&&(i=j,j=k,k=i),j.dy>l.dy&&(i=j,j=l,l=i),k.dy>l.dy&&(i=k,k=l,l=i),j.dy&&g(l,j,d,e,h),k.dy&&g(l,k,d,e,h)}var i=a("whoots-js"),j=a("../geo/coordinate");b.exports=d,d.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},d.prototype.toCoordinate=function(a){var b=Math.min(this.z,a),c=Math.pow(2,b),d=this.y,e=this.x+c*this.w;return new j(e,d,b)},d.fromID=function(a){var b=a%32,c=1<<b,e=(a-b)/32,f=e%c,g=(e-f)/c%c,h=Math.floor(e/(c*c));return h%2!==0&&(h=h*-1-1),h/=2,new d(b,f,g,h)},d.prototype.url=function(a,b,c){var d=i.getTileBBox(this.x,this.y,this.z),f=e(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,b||this.z)).replace("{x}",this.x).replace("{y}","tms"===c?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)},d.prototype.parent=function(a){return 0===this.z?null:this.z>a?new d(this.z-1,this.x,this.y,this.w):new d(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},d.prototype.wrapped=function(){return new d(this.z,this.x,this.y,0)},d.prototype.children=function(a){if(this.z>=a)return[new d(this.z+1,this.x,this.y,this.w)];var b=this.z+1,c=2*this.x,e=2*this.y;return[new d(b,c,e,this.w),new d(b,c+1,e,this.w),new d(b,c,e+1,this.w),new d(b,c+1,e+1,this.w)]},d.cover=function(a,b,c){function e(a,b,e){var h,i,j;if(e>=0&&e<=f)for(h=a;h<b;h++)i=(h%f+f)%f,j=new d(c,i,e,Math.floor(h/f)),g[j.id]=j}var f=1<<a,g={};return h(b[0],b[1],b[2],0,f,e),h(b[2],b[3],b[0],0,f,e),Object.keys(g).map(function(a){return g[a]})}},{"../geo/coordinate":12,"whoots-js":210}],47:[function(a,b,c){"use strict";function d(a,b,c,d){if(this.id=a,this.dispatcher=c,f.extend(this,f.pick(b,["url","scheme","tileSize"])),this._options=f.extend({type:"vector"},b),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d),this.fire("dataloading",{dataType:"source"}),g(b,function(a,b){return a?void this.fire("error",a):(f.extend(this,b),this.fire("data",{dataType:"source"}),void this.fire("source.load"))}.bind(this))}var e=a("../util/evented"),f=a("../util/util"),g=a("./load_tilejson"),h=a("../util/mapbox").normalizeTileURL;b.exports=d,d.prototype=f.inherit(e,{minzoom:0,maxzoom:22,scheme:"xyz",tileSize:512,reparseOverscaled:!0,isTileClipped:!0,onAdd:function(a){this.map=a},serialize:function(){return f.extend({},this._options)},loadTile:function(a,b){function c(c,d){if(!a.aborted){if(c)return b(c);a.loadVectorData(d,this.map.painter),a.redoWhenDone&&(a.redoWhenDone=!1,a.redoPlacement(this)),b(null),a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)}}var d=a.coord.z>this.maxzoom?Math.pow(2,a.coord.z-this.maxzoom):1,e={url:h(a.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:a.uid,coord:a.coord,zoom:a.coord.z,tileSize:this.tileSize*d,source:this.id,overscaling:d,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};a.workerID?"loading"===a.state?a.reloadCallback=b:this.dispatcher.send("reload tile",e,c.bind(this),a.workerID):a.workerID=this.dispatcher.send("load tile",e,c.bind(this))},abortTile:function(a){this.dispatcher.send("abort tile",{uid:a.uid,source:this.id},null,a.workerID)},unloadTile:function(a){a.unloadVectorData(),this.dispatcher.send("remove tile",{uid:a.uid,source:this.id},null,a.workerID)}})},{"../util/evented":113,"../util/mapbox":119,"../util/util":122,"./load_tilejson":39}],48:[function(a,b,c){"use strict";function d(a,b,c){this.actor=a,this.styleLayers=b,c&&(this.loadVectorData=c),this.loading={},this.loaded={}}var e=a("../util/ajax"),f=a("vector-tile"),g=a("pbf"),h=a("./worker_tile"),i=a("../util/util");b.exports=d,d.prototype={loadTile:function(a,b){function c(a,c){return delete this.loading[d][e],a?b(a):c?(f.vectorTile=c,f.parse(c,this.styleLayers.getLayerFamilies(),this.actor,function(a,d,e){return a?b(a):void b(null,i.extend({rawTileData:c.rawData},d),e)}),this.loaded[d]=this.loaded[d]||{},void(this.loaded[d][e]=f)):b(null,null)}var d=a.source,e=a.uid;this.loading[d]||(this.loading[d]={});var f=this.loading[d][e]=new h(a);f.abort=this.loadVectorData(a,c.bind(this))},reloadTile:function(a,b){var c=this.loaded[a.source],d=a.uid;if(c&&c[d]){var e=c[d];e.parse(e.vectorTile,this.styleLayers.getLayerFamilies(),this.actor,b)}},abortTile:function(a){var b=this.loading[a.source],c=a.uid;b&&b[c]&&b[c].abort&&(b[c].abort(),delete b[c])},removeTile:function(a){var b=this.loaded[a.source],c=a.uid;b&&b[c]&&delete b[c]},loadVectorData:function(a,b){function c(a,c){if(a)return b(a);var d=new f.VectorTile(new g(c));d.rawData=c,b(a,d)}var d=e.getArrayBuffer(a.url,c.bind(this));return function(){d.abort()}},redoPlacement:function(a,b){var c=this.loaded[a.source],d=this.loading[a.source],e=a.uid;if(c&&c[e]){var f=c[e],g=f.redoPlacement(a.angle,a.pitch,a.showCollisionBoxes);g.result&&b(null,g.result,g.transferables)}else d&&d[e]&&(d[e].angle=a.angle)}}},{"../util/ajax":104,"../util/util":122,"./worker_tile":51,pbf:190,"vector-tile":202}],49:[function(a,b,c){"use strict";function d(a,b,c,d){this.id=a,this.urls=b.urls,this.coordinates=b.coordinates,this.setEventedParent(d),this.fire("dataloading",{dataType:"source"}),f.getVideo(b.urls,function(a,c){if(a)return this.fire("error",{error:a});this.video=c,this.video.loop=!0;var d;this.video.addEventListener("playing",function(){d=this.map.style.animationLoop.set(1/0),this.map._rerender()}.bind(this)),this.video.addEventListener("pause",function(){this.map.style.animationLoop.cancel(d)}.bind(this)),this.map&&(this.video.play(),this.setCoordinates(b.coordinates)),this.fire("data",{dataType:"source"}),this.fire("source.load")}.bind(this))}var e=a("../util/util"),f=a("../util/ajax"),g=a("./image_source");b.exports=d,d.prototype=e.inherit(g,{roundZoom:!0,getVideo:function(){return this.video},onAdd:function(a){this.map||(this.map=a,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},prepare:function(){!this.tile||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},serialize:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}})},{"../util/ajax":104,"../util/util":122,"./image_source":38}],50:[function(a,b,c){"use strict";function d(a){this.self=a,this.actor=new f(a,this),this.layers={},this.layerFamilies={},this.workerSourceTypes={vector:i,geojson:j},this.workerSources={},this.self.registerWorkerSource=function(a,b){if(this.workerSourceTypes[a])throw new Error('Worker source with name "'+a+'" already registered.');this.workerSourceTypes[a]=b}.bind(this)}function e(a){var b={};for(var c in a){var d=a[c],e=d.ref||d.id,f=a[e];f.layout&&"none"===f.layout.visibility||(b[e]=b[e]||[],c===e?b[e].unshift(d):b[e].push(d))}return b}var f=a("../util/actor"),g=a("../style/style_layer"),h=a("../util/util"),i=a("./vector_tile_worker_source"),j=a("./geojson_worker_source"),k=a("feature-filter");b.exports=function(a){return new d(a)},h.extend(d.prototype,{"set layers":function(a,b){function c(a){var b=g.create(a,a.ref&&d[a.ref]);b.updatePaintTransitions({},{transition:!1}),b.filter=k(b.filter),d[b.id]=b}for(var d=this.layers[a]={},f=[],h=0;h<b.length;h++){var i=b[h];"fill"!==i.type&&"line"!==i.type&&"circle"!==i.type&&"symbol"!==i.type||(i.ref?f.push(h):c(i))}for(var j=0;j<f.length;j++)c(b[f[j]]);this.layerFamilies[a]=e(this.layers[a])},"update layers":function(a,b){function c(a){var b=h[a.ref],c=h[a.id];c?c.set(a,b):c=h[a.id]=g.create(a,b),c.updatePaintTransitions({},{transition:!1}),c.filter=k(c.filter)}var d,f,h=this.layers[a];for(d in b)f=b[d],f.ref&&c(f);for(d in b)f=b[d],f.ref||c(f);this.layerFamilies[a]=e(this.layers[a])},"load tile":function(a,b,c){var d=b.type||"vector";this.getWorkerSource(a,d).loadTile(b,c)},"reload tile":function(a,b,c){var d=b.type||"vector";this.getWorkerSource(a,d).reloadTile(b,c)},"abort tile":function(a,b){var c=b.type||"vector";this.getWorkerSource(a,c).abortTile(b)},"remove tile":function(a,b){var c=b.type||"vector";this.getWorkerSource(a,c).removeTile(b)},"redo placement":function(a,b,c){var d=b.type||"vector";this.getWorkerSource(a,d).redoPlacement(b,c)},"load worker source":function(a,b,c){try{this.self.importScripts(b.url),c()}catch(a){c(a)}},getWorkerSource:function(a,b){if(this.workerSources[a]||(this.workerSources[a]={}),!this.workerSources[a][b]){var c={getLayers:function(){return this.layers[a]}.bind(this),getLayerFamilies:function(){return this.layerFamilies[a]}.bind(this)},d={send:function(b,c,d,e){this.actor.send(b,c,d,e,a)}.bind(this)};this.workerSources[a][b]=new this.workerSourceTypes[b](d,c)}return this.workerSources[a][b]}})},{"../style/style_layer":59,"../util/actor":103,"../util/util":122,"./geojson_worker_source":36,"./vector_tile_worker_source":48,"feature-filter":138}],51:[function(a,b,c){"use strict";function d(a){this.coord=a.coord,this.uid=a.uid,this.zoom=a.zoom,this.tileSize=a.tileSize,this.source=a.source,this.overscaling=a.overscaling,this.angle=a.angle,this.pitch=a.pitch,this.showCollisionBoxes=a.showCollisionBoxes}function e(a){return!a.isEmpty()}function f(a){return a.serialize()}function g(a){var b=[];for(var c in a)a[c].getTransferables(b);return b}function h(a){return a.id}var i=a("../data/feature_index"),j=a("../symbol/collision_tile"),k=a("../data/bucket"),l=a("../symbol/collision_box"),m=a("../util/dictionary_coder"),n=a("../util/util"),o=a("../symbol/symbol_instances"),p=a("../symbol/symbol_quads");b.exports=d,d.prototype.parse=function(a,b,c,d){function q(a,b){for(var c=0;c<a.length;c++){var d=a.feature(c);d.index=c;for(var e in b)b[e].layer.filter(d)&&b[e].features.push(d)}}function r(a){if(a)return d(a);if(M++,2===M){for(var b=H.length-1;b>=0;b--)s(B,H[b]);t()}}function s(a,b){if(b.populateArrays(y,L,K),"symbol"!==b.type)for(var c=0;c<b.features.length;c++){var d=b.features[c];z.insert(d,d.index,b.sourceLayerIndex,b.index)}b.features=null}function t(){B.status="done",B.redoPlacementAfterDone&&(B.redoPlacement(B.angle,B.pitch,null),B.redoPlacementAfterDone=!1);var a=z.serialize(),b=y.serialize(),c=B.collisionBoxArray.serialize(),h=B.symbolInstancesArray.serialize(),i=B.symbolQuadsArray.serialize(),j=G.filter(e);d(null,{buckets:j.map(f),featureIndex:a.data,collisionTile:b.data,collisionBoxArray:c,symbolInstancesArray:h,symbolQuadsArray:i},g(j).concat(a.transferables).concat(b.transferables))}this.status="parsing",this.data=a,this.collisionBoxArray=new l,this.symbolInstancesArray=new o,this.symbolQuadsArray=new p;var u,v,w,x,y=new j(this.angle,this.pitch,this.collisionBoxArray),z=new i(this.coord,this.overscaling,y,a.layers),A=new m(a.layers?Object.keys(a.layers).sort():["_geojsonTileLayer"]),B=this,C={},D={},E=0;for(var F in b)v=b[F][0],v.source===this.source&&(v.ref||v.minzoom&&this.zoom<v.minzoom||v.maxzoom&&this.zoom>=v.maxzoom||v.layout&&"none"===v.layout.visibility||a.layers&&!a.layers[v.sourceLayer]||(x=k.create({layer:v,index:E++,childLayers:b[F],zoom:this.zoom,overscaling:this.overscaling,showCollisionBoxes:this.showCollisionBoxes,collisionBoxArray:this.collisionBoxArray,symbolQuadsArray:this.symbolQuadsArray,symbolInstancesArray:this.symbolInstancesArray,sourceLayerIndex:A.encode(v.sourceLayer||"_geojsonTileLayer")}),C[v.id]=x,a.layers&&(w=v.sourceLayer,D[w]=D[w]||{},D[w][v.id]=x)));if(a.layers)for(w in D)1===v.version&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+w+'" does not use vector tile spec v2 and therefore may have some rendering errors.'),v=a.layers[w],v&&q(v,D[w]);else q(a,C);var G=[],H=this.symbolBuckets=[],I=[];z.bucketLayerIDs={};for(var J in C)x=C[J],0!==x.features.length&&(z.bucketLayerIDs[x.index]=x.childLayers.map(h),G.push(x),"symbol"===x.type?H.push(x):I.push(x));var K={},L={},M=0;if(H.length>0){for(u=H.length-1;u>=0;u--)H[u].updateIcons(K),H[u].updateFont(L);for(var N in L)L[N]=Object.keys(L[N]).map(Number);K=Object.keys(K),c.send("get glyphs",{uid:this.uid,stacks:L},function(a,b){L=b,r(a)}),K.length?c.send("get icons",{icons:K},function(a,b){K=b,r(a)}):r()}for(u=I.length-1;u>=0;u--)s(this,I[u]);if(0===H.length)return t()},d.prototype.redoPlacement=function(a,b,c){if("done"!==this.status)return this.redoPlacementAfterDone=!0,this.angle=a,{};for(var d=new j(a,b,this.collisionBoxArray),h=this.symbolBuckets,i=h.length-1;i>=0;i--)h[i].placeFeatures(d,c);var k=d.serialize(),l=h.filter(e);return{result:{buckets:l.map(f),collisionTile:k.data},transferables:g(l).concat(k.transferables)}}},{"../data/bucket":2,"../data/feature_index":10,"../symbol/collision_box":72,"../symbol/collision_tile":74,"../symbol/symbol_instances":83,"../symbol/symbol_quads":84,"../util/dictionary_coder":110,"../util/util":122}],52:[function(a,b,c){"use strict";function d(){this.n=0,this.times=[]}b.exports=d,d.prototype.stopped=function(){return this.times=this.times.filter(function(a){return a.time>=(new Date).getTime()}),!this.times.length},d.prototype.set=function(a){return this.times.push({id:this.n,time:a+(new Date).getTime()}),this.n++},d.prototype.cancel=function(a){this.times=this.times.filter(function(b){return b.id!==a})}},{}],53:[function(a,b,c){"use strict";function d(a){this.base=a,this.retina=h.devicePixelRatio>1;var b=this.retina?"@2x":"";g.getJSON(i(a,b,".json"),function(a,b){return a?void this.fire("error",{error:a}):(this.data=b,void(this.img&&this.fire("data",{dataType:"style"})))}.bind(this)),g.getImage(i(a,b,".png"),function(a,b){if(a)return void this.fire("error",{error:a});for(var c=b.getData(),d=b.data=new Uint8Array(c.length),e=0;e<c.length;e+=4){var f=c[e+3]/255;d[e+0]=c[e+0]*f,d[e+1]=c[e+1]*f,d[e+2]=c[e+2]*f,d[e+3]=c[e+3]}this.img=b,this.data&&this.fire("data",{dataType:"style"})}.bind(this))}function e(){}var f=a("../util/evented"),g=a("../util/ajax"),h=a("../util/browser"),i=a("../util/mapbox").normalizeSpriteURL;b.exports=d,d.prototype=Object.create(f),d.prototype.toJSON=function(){return this.base},d.prototype.loaded=function(){return!(!this.data||!this.img)},d.prototype.resize=function(){if(h.devicePixelRatio>1!==this.retina){var a=new d(this.base);a.on("data",function(){this.img=a.img,this.data=a.data,this.retina=a.retina}.bind(this))}},e.prototype={x:0,y:0,width:0,height:0,pixelRatio:1,sdf:!1},d.prototype.getSpritePosition=function(a){if(!this.loaded())return new e;var b=this.data&&this.data[a];return b&&this.img?b:new e}},{"../util/ajax":104,"../util/browser":105,"../util/evented":113,"../util/mapbox":119}],54:[function(a,b,c){"use strict";function d(a){this.set(a)}var e=a("./style_spec"),f=a("../util/util"),g=a("../util/evented"),h=a("./validate_style"),i=a("./style_declaration"),j=a("./style_transition");b.exports=d;var k="-transition";d.prototype=f.inherit(g,{properties:["anchor","color","position","intensity"],_specifications:e.$root.light,set:function(a){if(!this._validate(h.light,a)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},a=f.extend({anchor:this._specifications.anchor.default,color:this._specifications.color.default,position:this._specifications.position.default,intensity:this._specifications.intensity.default},a);for(var b in this.properties){var c=this.properties[b];this._declarations[c]=new i(this._specifications[c],a[c])}return this}},getLight:function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},getLightProperty:function(a){return f.endsWith(a,k)?this._transitionOptions[a]:this._declarations[a]&&this._declarations[a].value},getLightValue:function(a,b){if("position"===a){var c=this._transitions[a].calculate(b),d=f.sphericalToCartesian(c);return{x:d[0],y:d[1],z:d[2]}}return this._transitions[a].calculate(b)},setLight:function(a){if(!this._validate(h.light,a))for(var b in a){var c=a[b];f.endsWith(b,k)?this._transitionOptions[b]=c:null===c||void 0===c?delete this._declarations[b]:this._declarations[b]=new i(this._specifications[b],c)}},recalculate:function(a,b){for(var c in this._declarations)this.calculated[c]=this.getLightValue(c,{zoom:a,zoomHistory:b})},_applyLightDeclaration:function(a,b,c,d,e){var g=c.transition?this._transitions[a]:void 0,h=this._specifications[a];if(null!==b&&void 0!==b||(b=new i(h,h.default)),!g||g.declaration.json!==b.json){var l=f.extend({duration:300,delay:0},d,this.getLightProperty(a+k)),m=this._transitions[a]=new j(h,b,g,l);m.instant()||(m.loopID=e.set(m.endTime-Date.now())),g&&e.cancel(g.loopID)}},updateLightTransitions:function(a,b,c){var d;for(d in this._declarations)this._applyLightDeclaration(d,this._declarations[d],a,b,c)},_validate:function(a,b){return h.emitErrors(this,a.call(h,f.extend({value:b,style:{glyphs:!0,sprite:!0},styleSpec:e})))}})},{"../util/evented":113,"../util/util":122,"./style_declaration":57,"./style_spec":66,"./style_transition":67,"./validate_style":68}],55:[function(a,b,c){"use strict";var d=a("csscolorparser").parseCSSColor,e=a("../util/util"),f=a("./style_function"),g={};b.exports=function a(b){if(f.isFunctionDefinition(b))return b.stops?e.extend({},b,{stops:b.stops.map(function(b){return[b[0],a(b[1])]})}):b;if("string"==typeof b){if(!g[b]){var c=d(b);if(!c)throw new Error("Invalid color "+b);g[b]=[c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]]}return g[b]}if(Array.isArray(b))return b;throw new Error("Invalid color "+b)}},{"../util/util":122,"./style_function":58,csscolorparser:136}],56:[function(a,b,c){"use strict";function d(a,b,c){this.map=b,this.animationLoop=b&&b.animationLoop||new q,this.dispatcher=new p(x(),this),this.spriteAtlas=new j(1024,1024),this.lineAtlas=new k(256,512),this._layers={},this._order=[],this._groups=[],this.sourceCaches={},this.zoomHistory={},l.bindAll(["_redoPlacement"],this),this._resetUpdates(),c=l.extend({validate:"string"!=typeof a||!n.isMapboxURL(a)},c),this.setEventedParent(b),this.fire("dataloading",{dataType:"style"});var d=function(a,b){if(a)return void this.fire("error",{error:a});if(!c.validate||!r.emitErrors(this,r(b))){this._loaded=!0,this.stylesheet=b,this.updateClasses();for(var d in b.sources)this.addSource(d,b.sources[d],c);b.sprite&&(this.sprite=new g(b.sprite),this.sprite.setEventedParent(this)),this.glyphSource=new i(b.glyphs),this._resolve(),this.fire("data",{dataType:"style"}),this.fire("style.load")}}.bind(this);"string"==typeof a?m.getJSON(n.normalizeStyleURL(a),d):o.frame(d.bind(this,null,a)),this.on("source.load",function(a){var b=a.source;if(b&&b.vectorLayerIds)for(var c in this._layers){var d=this._layers[c];d.source===b.id&&this._validateLayer(d)}})}var e=a("../util/evented"),f=a("./style_layer"),g=a("./image_sprite"),h=a("./light"),i=a("../symbol/glyph_source"),j=a("../symbol/sprite_atlas"),k=a("../render/line_atlas"),l=a("../util/util"),m=a("../util/ajax"),n=a("../util/mapbox"),o=a("../util/browser"),p=a("../util/dispatcher"),q=a("./animation_loop"),r=a("./validate_style"),s=a("../source/source"),t=a("../source/query_features"),u=a("../source/source_cache"),v=a("./style_spec"),w=a("./style_function"),x=a("../global_worker_pool");b.exports=d,d.prototype=l.inherit(e,{_loaded:!1,_validateLayer:function(a){var b=this.sourceCaches[a.source];if(a.sourceLayer&&b){var c=b.getSource();c.vectorLayerIds&&c.vectorLayerIds.indexOf(a.sourceLayer)===-1&&this.fire("error",{error:new Error('Source layer "'+a.sourceLayer+'" does not exist on source "'+c.id+'" as specified by style layer "'+a.id+'"')})}},loaded:function(){if(!this._loaded)return!1;if(Object.keys(this._updates.sources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},_resolve:function(){var a,b;this._layers={},this._order=this.stylesheet.layers.map(function(a){return a.id});for(var c=0;c<this.stylesheet.layers.length;c++)b=this.stylesheet.layers[c],b.ref||(a=f.create(b),this._layers[a.id]=a,a.setEventedParent(this,{layer:{id:a.id}}));for(var d=0;d<this.stylesheet.layers.length;d++)if(b=this.stylesheet.layers[d],b.ref){var e=this.getLayer(b.ref);a=f.create(b,e),this._layers[a.id]=a,a.setEventedParent(this,{layer:{id:a.id}})}this._groupLayers(),this._updateWorkerLayers(),this.light=new h(this.stylesheet.light)},_groupLayers:function(){var a;this._groups=[];for(var b=0;b<this._order.length;++b){var c=this._layers[this._order[b]];a&&c.source===a.source||(a=[],a.source=c.source,this._groups.push(a)),a.push(c)}},_updateWorkerLayers:function(a){this.dispatcher.broadcast(a?"update layers":"set layers",this._serializeLayers(a))},_serializeLayers:function(a){a=a||this._order;for(var b=[],c={includeRefProperties:!0},d=0;d<a.length;d++)b.push(this._layers[a[d]].serialize(c));return b},_applyClasses:function(a,b){if(this._loaded){a=a||[],b=b||{transition:!0};var c=this.stylesheet.transition||{},d=this._updates.allPaintProps?this._layers:this._updates.paintProps;for(var e in d){var f=this._layers[e],g=this._updates.paintProps[e];if(this._updates.allPaintProps||g.all)f.updatePaintTransitions(a,b,c,this.animationLoop);else for(var h in g)this._layers[e].updatePaintTransition(h,a,b,c,this.animationLoop)}this.light.updateLightTransitions(b,c,this.animationLoop)}},_recalculate:function(a){if(this._loaded){for(var b in this.sourceCaches)this.sourceCaches[b].used=!1;this._updateZoomHistory(a),this.rasterFadeDuration=300;for(var c in this._layers){var d=this._layers[c];d.recalculate(a,this.zoomHistory),!d.isHidden(a)&&d.source&&(this.sourceCaches[d.source].used=!0)}this.light.recalculate(a,this.zoomHistory);var e=300;Math.floor(this.z)!==Math.floor(a)&&this.animationLoop.set(e),this.z=a}},_updateZoomHistory:function(a){var b=this.zoomHistory;void 0===b.lastIntegerZoom&&(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=0,b.lastZoom=a),Math.floor(b.lastZoom)<Math.floor(a)?(b.lastIntegerZoom=Math.floor(a),b.lastIntegerZoomTime=Date.now()):Math.floor(b.lastZoom)>Math.floor(a)&&(b.lastIntegerZoom=Math.floor(a+1),b.lastIntegerZoomTime=Date.now()),b.lastZoom=a},_checkLoaded:function(){if(!this._loaded)throw new Error("Style is not done loading")},update:function(a,b){if(!this._updates.changed)return this;if(this._updates.allLayers)this._groupLayers(),this._updateWorkerLayers();else{var c=Object.keys(this._updates.layers);c.length&&this._updateWorkerLayers(c)}var d,e=Object.keys(this._updates.sources);for(d=0;d<e.length;d++)this._reloadSource(e[d]);for(d=0;d<this._updates.events.length;d++){var f=this._updates.events[d];this.fire(f[0],f[1])}return this._applyClasses(a,b),this._updates.changed&&this.fire("data",{dataType:"style"}),this._resetUpdates(),this},_resetUpdates:function(){this._updates={events:[],layers:{},sources:{},paintProps:{}}},addSource:function(a,b,c){if(this._checkLoaded(),void 0!==this.sourceCaches[a])throw new Error("There is already a source with this ID");if(!b.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(b)+".");var d=["vector","raster","geojson","video","image"],e=d.indexOf(b.type)>=0;return e&&this._validate(r.source,"sources."+a,b,null,c)?this:(b=new u(a,b,this.dispatcher),this.sourceCaches[a]=b,b.style=this,b.setEventedParent(this,{source:b.getSource()}),b.onAdd&&b.onAdd(this.map),this._updates.changed=!0,this)},removeSource:function(a){if(this._checkLoaded(),void 0===this.sourceCaches[a])throw new Error("There is no source with this ID");var b=this.sourceCaches[a];return delete this.sourceCaches[a],delete this._updates.sources[a],b.setEventedParent(null),b.clearTiles(),b.onRemove&&b.onRemove(this.map),this._updates.changed=!0,this},getSource:function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},addLayer:function(a,b,c){if(this._checkLoaded(),!(a instanceof f)){if(this._validate(r.layer,"layers."+a.id,a,{arrayIndex:-1},c))return this;var d=a.ref&&this.getLayer(a.ref);a=f.create(a,d)}return this._validateLayer(a),a.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=a,this._order.splice(b?this._order.indexOf(b):1/0,0,a.id),this._updates.allLayers=!0,a.source&&(this._updates.sources[a.source]=!0),this.updateClasses(a.id)},removeLayer:function(a){this._checkLoaded();var b=this._layers[a];if(void 0===b)throw new Error("There is no layer with this ID");for(var c in this._layers)this._layers[c].ref===a&&this.removeLayer(c);return b.setEventedParent(null),delete this._layers[a],delete this._updates.layers[a],delete this._updates.paintProps[a],this._order.splice(this._order.indexOf(a),1),this._updates.allLayers=!0,this._updates.changed=!0,this},getLayer:function(a){return this._layers[a]},getReferentLayer:function(a){var b=this.getLayer(a);return b.ref&&(b=this.getLayer(b.ref)),b},setLayerZoomRange:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return d.minzoom===b&&d.maxzoom===c?this:(null!=b&&(d.minzoom=b),null!=c&&(d.maxzoom=c),this._updateLayer(d))},setFilter:function(a,b){this._checkLoaded();var c=this.getReferentLayer(a);return null!==b&&this._validate(r.filter,"layers."+c.id+".filter",b)?this:l.deepEqual(c.filter,b)?this:(c.filter=l.clone(b),this._updateLayer(c))},getFilter:function(a){return l.clone(this.getReferentLayer(a).filter)},setLayoutProperty:function(a,b,c){this._checkLoaded();var d=this.getReferentLayer(a);return l.deepEqual(d.getLayoutProperty(b),c)?this:(d.setLayoutProperty(b,c),this._updateLayer(d))},getLayoutProperty:function(a,b){return this.getReferentLayer(a).getLayoutProperty(b)},setPaintProperty:function(a,b,c,d){this._checkLoaded();var e=this.getLayer(a);if(l.deepEqual(e.getPaintProperty(b,d),c))return this;var f=e.isPaintValueFeatureConstant(b);e.setPaintProperty(b,c,d);var g=!(c&&w.isFunctionDefinition(c)&&"$zoom"!==c.property&&void 0!==c.property);return g&&f||(this._updates.layers[a]=!0,e.source&&(this._updates.sources[e.source]=!0)),this.updateClasses(a,b)},getPaintProperty:function(a,b,c){return this.getLayer(a).getPaintProperty(b,c)},updateClasses:function(a,b){if(this._updates.changed=!0,a){var c=this._updates.paintProps;c[a]||(c[a]={}),c[a][b||"all"]=!0}else this._updates.allPaintProps=!0;return this},serialize:function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._order.map(function(a){return this._layers[a].serialize()},this)},function(a){return void 0!==a})},_updateLayer:function(a){return this._updates.layers[a.id]=!0,a.source&&(this._updates.sources[a.source]=!0),this._updates.changed=!0,this},_flattenRenderedFeatures:function(a){for(var b=[],c=this._order.length-1;c>=0;c--)for(var d=this._order[c],e=0;e<a.length;e++){var f=a[e][d];if(f)for(var g=0;g<f.length;g++)b.push(f[g])}return b},queryRenderedFeatures:function(a,b,c,d){b&&b.filter&&this._validate(r.filter,"queryRenderedFeatures.filter",b.filter);var e={};if(b&&b.layers)for(var g=0;g<b.layers.length;g++){var h=this._layers[b.layers[g]];if(!(h instanceof f))return this.fire("error",{error:"The layer '"+b.layers[g]+"' does not exist in the map's style and cannot be queried for features."});e[h.source]=!0}var i=[];for(var j in this.sourceCaches)if(!b.layers||e[j]){var k=this.sourceCaches[j],l=t.rendered(k,this._layers,a,b,c,d);i.push(l)}return this._flattenRenderedFeatures(i)},querySourceFeatures:function(a,b){b&&b.filter&&this._validate(r.filter,"querySourceFeatures.filter",b.filter);var c=this.sourceCaches[a];return c?t.source(c,b):[]},addSourceType:function(a,b,c){return s.getType(a)?c(new Error('A source type called "'+a+'" already exists.')):(s.setType(a,b),b.workerSourceURL?void this.dispatcher.broadcast("load worker source",{name:a,url:b.workerSourceURL},c):c(null,null))},getLight:function(){return this.light.getLight()},setLight:function(a,b){this._checkLoaded();var c=this.light.getLight(),d=!1;for(var e in a)if(!l.deepEqual(a[e],c[e])){d=!0;break}if(!d)return this;var f=this.stylesheet.transition||{};return this.light.setLight(a),this.light.updateLightTransitions(b||{transition:!0},f,this.animationLoop)},_validate:function(a,b,c,d,e){return(!e||e.validate!==!1)&&r.emitErrors(this,a.call(r,l.extend({key:b,style:this.serialize(),value:c,styleSpec:v},d)))},_remove:function(){for(var a in this.sourceCaches)this.sourceCaches[a].clearTiles();this.dispatcher.remove()},_reloadSource:function(a){this.sourceCaches[a].reload()},_updateSources:function(a){for(var b in this.sourceCaches)this.sourceCaches[b].update(a)},_redoPlacement:function(){for(var a in this.sourceCaches)this.sourceCaches[a].redoPlacement&&this.sourceCaches[a].redoPlacement()},"get icons":function(a,b,c){var d=this.sprite,e=this.spriteAtlas;d.loaded()?(e.setSprite(d),e.addIcons(b.icons,c)):d.on("data",function(){e.setSprite(d),e.addIcons(b.icons,c)})},"get glyphs":function(a,b,c){function d(a,b,d){a&&console.error(a),g[d]=b,f--,0===f&&c(null,g)}var e=b.stacks,f=Object.keys(e).length,g={};for(var h in e)this.glyphSource.getSimpleGlyphs(h,e[h],b.uid,d)}})},{"../global_worker_pool":16,"../render/line_atlas":30,"../source/query_features":41,"../source/source":43,"../source/source_cache":44,"../symbol/glyph_source":77,"../symbol/sprite_atlas":82,"../util/ajax":104,"../util/browser":105,"../util/dispatcher":111,"../util/evented":113,"../util/mapbox":119,"../util/util":122,"./animation_loop":52,"./image_sprite":53,"./light":54,"./style_function":58,"./style_layer":59,"./style_spec":66,"./validate_style":68}],57:[function(a,b,c){"use strict";function d(a,b){this.value=i.clone(b),this.isFunction=g.isFunctionDefinition(b),this.json=JSON.stringify(this.value);var c="color"===a.type&&this.value?h(this.value):b,d=a.default;if(d&&"color"===a.type&&(d=h(d)),this.calculate=g[a.function||"piecewise-constant"](c),this.isFeatureConstant=this.calculate.isFeatureConstant,this.isZoomConstant=this.calculate.isZoomConstant,"color"===a.type&&(this.calculate=e(this.calculate)),"piecewise-constant"===a.function&&a.transition&&(this.calculate=f(this.calculate)),!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var j=[],k=this.value.stops,l=0;l<this.value.stops.length;l++){var m=k[l][0].zoom;this.stopZoomLevels.indexOf(m)<0&&(this.stopZoomLevels.push(m),j.push([m,j.length]));
}this.calculateInterpolationT=g.interpolated({stops:j,base:b.base,colorSpace:b.colorSpace})}}function e(a){return function(b,c){var d=a(b,c);return d&&h(d)}}function f(a){return function(b,c){var d,e,f,g=b.zoom,h=b.zoomHistory,i=b.duration,j=g%1,k=Math.min((Date.now()-h.lastIntegerZoomTime)/i,1),l=1,m=1;return g>h.lastIntegerZoom?(d=j+(1-j)*k,l*=2,e=a({zoom:g-1},c),f=a({zoom:g},c)):(d=1-(1-k)*j,f=a({zoom:g},c),e=a({zoom:g+1},c),l/=2),void 0===e||void 0===f?void 0:{from:e,fromScale:l,to:f,toScale:m,t:d}}}var g=a("./style_function"),h=a("./parse_color"),i=a("../util/util");b.exports=d},{"../util/util":122,"./parse_color":55,"./style_function":58}],58:[function(a,b,c){"use strict";var d=a("mapbox-gl-function");c.interpolated=function(a,b){var c=d.interpolated(a,b),e=function(a,b){return c(a&&a.zoom,b||{})};return e.isFeatureConstant=c.isFeatureConstant,e.isZoomConstant=c.isZoomConstant,e},c["piecewise-constant"]=function(a,b){var c=d["piecewise-constant"](a,b),e=function(a,b){return c(a&&a.zoom,b||{})};return e.isFeatureConstant=c.isFeatureConstant,e.isZoomConstant=c.isZoomConstant,e},c.isFunctionDefinition=d.isFunctionDefinition},{"mapbox-gl-function":162}],59:[function(a,b,c){"use strict";function d(a,b){this.set(a,b)}function e(a){return a.value}var f=a("../util/util"),g=a("./style_transition"),h=a("./style_declaration"),i=a("./style_spec"),j=a("./validate_style"),k=a("./parse_color"),l=a("../util/evented");b.exports=d;var m="-transition";d.prototype=f.inherit(l,{set:function(a,b){this.id=a.id,this.ref=a.ref,this.metadata=a.metadata,this.type=(b||a).type,this.source=(b||a).source,this.sourceLayer=(b||a)["source-layer"],this.minzoom=(b||a).minzoom,this.maxzoom=(b||a).maxzoom,this.filter=(b||a).filter,this.paint={},this.layout={},this._paintSpecifications=i["paint_"+this.type],this._layoutSpecifications=i["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var c,d,e={validate:!1};for(var f in a){var g=f.match(/^paint(?:\.(.*))?$/);if(g){var h=g[1]||"";for(c in a[f])this.setPaintProperty(c,a[f][c],h,e)}}if(this.ref)this._layoutDeclarations=b._layoutDeclarations;else for(d in a.layout)this.setLayoutProperty(d,a.layout[d],e);for(c in this._paintSpecifications)this.paint[c]=this.getPaintValue(c);for(d in this._layoutSpecifications)this._updateLayoutValue(d)},setLayoutProperty:function(a,b,c){if(null==b)delete this._layoutDeclarations[a];else{var d="layers."+this.id+".layout."+a;if(this._validate(j.layoutProperty,d,a,b,c))return;this._layoutDeclarations[a]=new h(this._layoutSpecifications[a],b)}this._updateLayoutValue(a)},getLayoutProperty:function(a){return this._layoutDeclarations[a]&&this._layoutDeclarations[a].value},getLayoutValue:function(a,b,c){var d=this._layoutSpecifications[a],e=this._layoutDeclarations[a];return e?e.calculate(b,c):d.default},setPaintProperty:function(a,b,c,d){var e="layers."+this.id+(c?'["paint.'+c+'"].':".paint.")+a;if(f.endsWith(a,m))if(this._paintTransitionOptions[c||""]||(this._paintTransitionOptions[c||""]={}),null===b||void 0===b)delete this._paintTransitionOptions[c||""][a];else{if(this._validate(j.paintProperty,e,a,b,d))return;this._paintTransitionOptions[c||""][a]=b}else if(this._paintDeclarations[c||""]||(this._paintDeclarations[c||""]={}),null===b||void 0===b)delete this._paintDeclarations[c||""][a];else{if(this._validate(j.paintProperty,e,a,b,d))return;this._paintDeclarations[c||""][a]=new h(this._paintSpecifications[a],b)}},getPaintProperty:function(a,b){return b=b||"",f.endsWith(a,m)?this._paintTransitionOptions[b]&&this._paintTransitionOptions[b][a]:this._paintDeclarations[b]&&this._paintDeclarations[b][a]&&this._paintDeclarations[b][a].value},getPaintValue:function(a,b,c){var d=this._paintSpecifications[a],e=this._paintTransitions[a];return e?e.calculate(b,c):"color"===d.type&&d.default?k(d.default):d.default},getPaintValueStopZoomLevels:function(a){var b=this._paintTransitions[a];return b?b.declaration.stopZoomLevels:[]},getPaintInterpolationT:function(a,b){var c=this._paintTransitions[a];return c.declaration.calculateInterpolationT({zoom:b})},isPaintValueFeatureConstant:function(a){var b=this._paintTransitions[a];return!b||b.declaration.isFeatureConstant},isLayoutValueFeatureConstant:function(a){var b=this._layoutDeclarations[a];return!b||b.isFeatureConstant},isPaintValueZoomConstant:function(a){var b=this._paintTransitions[a];return!b||b.declaration.isZoomConstant},isHidden:function(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||"none"===this.layout.visibility},updatePaintTransitions:function(a,b,c,d){for(var e=f.extend({},this._paintDeclarations[""]),g=0;g<a.length;g++)f.extend(e,this._paintDeclarations[a[g]]);var h;for(h in e)this._applyPaintDeclaration(h,e[h],b,c,d);for(h in this._paintTransitions)h in e||this._applyPaintDeclaration(h,null,b,c,d)},updatePaintTransition:function(a,b,c,d,e){for(var f=this._paintDeclarations[""][a],g=0;g<b.length;g++){var h=this._paintDeclarations[b[g]];h&&h[a]&&(f=h[a])}this._applyPaintDeclaration(a,f,c,d,e)},recalculate:function(a,b){for(var c in this._paintTransitions)this.paint[c]=this.getPaintValue(c,{zoom:a,zoomHistory:b});for(var d in this._layoutFunctions)this.layout[d]=this.getLayoutValue(d,{zoom:a,zoomHistory:b})},serialize:function(a){var b={id:this.id,ref:this.ref,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom};for(var c in this._paintDeclarations){var d=""===c?"paint":"paint."+c;b[d]=f.mapObject(this._paintDeclarations[c],e)}return(!this.ref||a&&a.includeRefProperties)&&f.extend(b,{type:this.type,source:this.source,"source-layer":this.sourceLayer,filter:this.filter,layout:f.mapObject(this._layoutDeclarations,e)}),f.filterObject(b,function(a,b){return void 0!==a&&!("layout"===b&&!Object.keys(a).length)})},_applyPaintDeclaration:function(a,b,c,d,e){var i=c.transition?this._paintTransitions[a]:void 0,j=this._paintSpecifications[a];if(null!==b&&void 0!==b||(b=new h(j,j.default)),!i||i.declaration.json!==b.json){var k=f.extend({duration:300,delay:0},d,this.getPaintProperty(a+m)),l=this._paintTransitions[a]=new g(j,b,i,k);l.instant()||(l.loopID=e.set(l.endTime-Date.now())),i&&e.cancel(i.loopID)}},_updateLayoutValue:function(a){var b=this._layoutDeclarations[a];b&&b.isFunction?this._layoutFunctions[a]=!0:(delete this._layoutFunctions[a],this.layout[a]=this.getLayoutValue(a))},_validate:function(a,b,c,d,e){return(!e||e.validate!==!1)&&j.emitErrors(this,a.call(j,{key:b,layerType:this.type,objectKey:c,value:d,styleSpec:i,style:{glyphs:!0,sprite:!0}}))}});var n={background:a("./style_layer/background_style_layer"),circle:a("./style_layer/circle_style_layer"),fill:a("./style_layer/fill_style_layer"),line:a("./style_layer/line_style_layer"),raster:a("./style_layer/raster_style_layer"),symbol:a("./style_layer/symbol_style_layer")};d.create=function(a,b){return new n[(b||a).type](a,b)}},{"../util/evented":113,"../util/util":122,"./parse_color":55,"./style_declaration":57,"./style_layer/background_style_layer":60,"./style_layer/circle_style_layer":61,"./style_layer/fill_style_layer":62,"./style_layer/line_style_layer":63,"./style_layer/raster_style_layer":64,"./style_layer/symbol_style_layer":65,"./style_spec":66,"./style_transition":67,"./validate_style":68}],60:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":122,"../style_layer":59}],61:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":122,"../style_layer":59}],62:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValue.call(this,"fill-color",b,c):f.prototype.getPaintValue.call(this,a,b,c)},getPaintValueStopZoomLevels:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):f.prototype.getPaintValueStopZoomLevels.call(this,a)},getPaintInterpolationT:function(a,b){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.getPaintInterpolationT.call(this,"fill-color",b):f.prototype.getPaintInterpolationT.call(this,a,b)},isPaintValueFeatureConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):f.prototype.isPaintValueFeatureConstant.call(this,a)},isPaintValueZoomConstant:function(a){return"fill-outline-color"===a&&void 0===this.getPaintProperty("fill-outline-color")?f.prototype.isPaintValueZoomConstant.call(this,"fill-color"):f.prototype.isPaintValueZoomConstant.call(this,a)}}),b.exports=d},{"../../util/util":122,"../style_layer":59}],63:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{getPaintValue:function(a,b,c){var d=f.prototype.getPaintValue.apply(this,arguments);if(d&&"line-dasharray"===a){var e=Math.floor(b.zoom);this._flooredZoom!==e&&(this._flooredZoom=e,this._flooredLineWidth=this.getPaintValue("line-width",b,c)),d.fromScale*=this._flooredLineWidth,d.toScale*=this._flooredLineWidth}return d}})},{"../../util/util":122,"../style_layer":59}],64:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{})},{"../../util/util":122,"../style_layer":59}],65:[function(a,b,c){"use strict";function d(){f.apply(this,arguments)}var e=a("../../util/util"),f=a("../style_layer");b.exports=d,d.prototype=e.inherit(f,{getLayoutValue:function(a,b,c){var d=f.prototype.getLayoutValue.apply(this,arguments);if("auto"!==d)return d;switch(a){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",b,c)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",b,c);default:return d}}})},{"../../util/util":122,"../style_layer":59}],66:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":186}],67:[function(a,b,c){"use strict";function d(a,b,c,d){this.declaration=b,this.startTime=this.endTime=(new Date).getTime(),"piecewise-constant"===a.function&&a.transition?this.interp=e:this.interp=g[a.type],this.oldTransition=c,this.duration=d.duration||0,this.delay=d.delay||0,this.instant()||(this.endTime=this.startTime+this.duration+this.delay,this.ease=f.easeCubicInOut),c&&c.endTime<=this.startTime&&delete c.oldTransition}function e(a,b,c){return void 0===(a&&a.to)||void 0===(b&&b.to)?void 0:{from:a.to,fromScale:a.toScale,to:b.to,toScale:b.toScale,t:c}}var f=a("../util/util"),g=a("../util/interpolate");b.exports=d,d.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},d.prototype.calculate=function(a,b){var c=this.declaration.calculate(f.extend({},a,{duration:this.duration}),b);if(this.instant())return c;var d=a.time||Date.now();if(d<this.endTime){var e=this.oldTransition.calculate(f.extend({},a,{time:this.startTime}),b),g=this.ease((d-this.startTime-this.delay)/this.duration);c=this.interp(e,c,g)}return c}},{"../util/interpolate":116,"../util/util":122}],68:[function(a,b,c){"use strict";b.exports=a("mapbox-gl-style-spec/lib/validate_style.min"),b.exports.emitErrors=function(a,b){if(b&&b.length){for(var c=0;c<b.length;c++)a.fire("error",{error:new Error(b[c].message)});return!0}return!1}},{"mapbox-gl-style-spec/lib/validate_style.min":185}],69:[function(a,b,c){"use strict";function d(a,b,c,d){this.x=a,this.y=b,this.angle=c,void 0!==d&&(this.segment=d)}var e=a("point-geometry");b.exports=d,d.prototype=Object.create(e.prototype),d.prototype.clone=function(){return new d(this.x,this.y,this.angle,this.segment)}},{"point-geometry":192}],70:[function(a,b,c){"use strict";function d(a,b,c,d,e){if(void 0===b.segment)return!0;for(var f=b,g=b.segment+1,h=0;h>-c/2;){if(g--,g<0)return!1;h-=a[g].dist(f),f=a[g]}h+=a[g].dist(a[g+1]),g++;for(var i=[],j=0;h<c/2;){var k=a[g-1],l=a[g],m=a[g+1];if(!m)return!1;var n=k.angleTo(l)-l.angleTo(m);for(n=Math.abs((n+3*Math.PI)%(2*Math.PI)-Math.PI),i.push({distance:h,angleDelta:n}),j+=n;h-i[0].distance>d;)j-=i.shift().angleDelta;if(j>e)return!1;g++,h+=l.dist(m)}return!0}b.exports=d},{}],71:[function(a,b,c){"use strict";function d(a,b,c,d,f){for(var g=[],h=0;h<a.length;h++)for(var i,j=a[h],k=0;k<j.length-1;k++){var l=j[k],m=j[k+1];l.x<b&&m.x<b||(l.x<b?l=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round():m.x<b&&(m=new e(b,l.y+(m.y-l.y)*((b-l.x)/(m.x-l.x)))._round()),l.y<c&&m.y<c||(l.y<c?l=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round():m.y<c&&(m=new e(l.x+(m.x-l.x)*((c-l.y)/(m.y-l.y)),c)._round()),l.x>=d&&m.x>=d||(l.x>=d?l=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round():m.x>=d&&(m=new e(d,l.y+(m.y-l.y)*((d-l.x)/(m.x-l.x)))._round()),l.y>=f&&m.y>=f||(l.y>=f?l=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round():m.y>=f&&(m=new e(l.x+(m.x-l.x)*((f-l.y)/(m.y-l.y)),f)._round()),i&&l.equals(i[i.length-1])||(i=[l],g.push(i)),i.push(m)))))}return g}var e=a("point-geometry");b.exports=d},{"point-geometry":192}],72:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":120,"../util/util":122,"point-geometry":192}],73:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k){var l=g.top*h-i,m=g.bottom*h+i,n=g.left*h-i,o=g.right*h+i;if(this.boxStartIndex=a.length,j){var p=m-l,q=o-n;if(p>0)if(p=Math.max(10*h,p),k){var r=b[c.segment+1].sub(b[c.segment])._unit()._mult(q),s=[c.sub(r),c.add(r)];this._addLineCollisionBoxes(a,s,c,0,q,p,d,e,f)}else this._addLineCollisionBoxes(a,b,c,c.segment,q,p,d,e,f)}else a.emplaceBack(c.x,c.y,n,l,o,m,1/0,d,e,f,0,0,0,0,0);this.boxEndIndex=a.length}b.exports=d,d.prototype._addLineCollisionBoxes=function(a,b,c,d,e,f,g,h,i){var j=f/2,k=Math.floor(e/j),l=-f/2,m=this.boxes,n=c,o=d+1,p=l;do{if(o--,o<0)return m;p-=b[o].dist(n),n=b[o]}while(p>-e/2);for(var q=b[o].dist(b[o+1]),r=0;r<k;r++){for(var s=-e/2+r*j;p+q<s;){if(p+=q,o++,o+1>=b.length)return m;q=b[o].dist(b[o+1])}var t=s-p,u=b[o],v=b[o+1],w=v.sub(u)._unit()._mult(t)._add(u)._round(),x=Math.max(Math.abs(s-l)-j/2,0),y=e/2/x;a.emplaceBack(w.x,w.y,-f/2,-f/2,f/2,f/2,y,g,h,i,0,0,0,0,0)}return m}},{}],74:[function(a,b,c){"use strict";function d(a,b,c){if("object"==typeof a){var d=a;c=b,a=d.angle,b=d.pitch,this.grid=new g(d.grid),this.ignoredGrid=new g(d.ignoredGrid)}else this.grid=new g(f,12,6),this.ignoredGrid=new g(f,12,0);this.angle=a,this.pitch=b;var e=Math.sin(a),h=Math.cos(a);if(this.rotationMatrix=[h,-e,e,h],this.reverseRotationMatrix=[h,e,-e,h],this.yStretch=1/Math.cos(b/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=c,0===c.length){c.emplaceBack();var i=32767;c.emplaceBack(0,0,0,-i,0,i,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(f,0,0,-i,0,i,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,0,-i,0,i,0,i,0,0,0,0,0,0,0,0,0),c.emplaceBack(0,f,-i,0,i,0,i,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=c.get(0),this.edges=[c.get(1),c.get(2),c.get(3),c.get(4)]}var e=a("point-geometry"),f=a("../data/bucket").EXTENT,g=a("grid-index");b.exports=d,d.prototype.serialize=function(){var a={angle:this.angle,pitch:this.pitch,grid:this.grid.toArrayBuffer(),ignoredGrid:this.ignoredGrid.toArrayBuffer()};return{data:a,transferables:[a.grid,a.ignoredGrid]}},d.prototype.minScale=.25,d.prototype.maxScale=2,d.prototype.placeCollisionFeature=function(a,b,c){for(var d=this.collisionBoxArray,f=this.minScale,g=this.rotationMatrix,h=this.yStretch,i=a.boxStartIndex;i<a.boxEndIndex;i++){var j=d.get(i),k=j.anchorPoint._matMult(g),l=k.x,m=k.y,n=l+j.x1,o=m+j.y1*h,p=l+j.x2,q=m+j.y2*h;if(j.bbox0=n,j.bbox1=o,j.bbox2=p,j.bbox3=q,!b)for(var r=this.grid.query(n,o,p,q),s=0;s<r.length;s++){var t=d.get(r[s]),u=t.anchorPoint._matMult(g);if(f=this.getPlacementScale(f,k,j,u,t),f>=this.maxScale)return f}if(c){var v;if(this.angle){var w=this.reverseRotationMatrix,x=new e(j.x1,j.y1).matMult(w),y=new e(j.x2,j.y1).matMult(w),z=new e(j.x1,j.y2).matMult(w),A=new e(j.x2,j.y2).matMult(w);v=this.tempCollisionBox,v.anchorPointX=j.anchorPoint.x,v.anchorPointY=j.anchorPoint.y,v.x1=Math.min(x.x,y.x,z.x,A.x),v.y1=Math.min(x.y,y.x,z.x,A.x),v.x2=Math.max(x.x,y.x,z.x,A.x),v.y2=Math.max(x.y,y.x,z.x,A.x),v.maxScale=j.maxScale}else v=j;for(var B=0;B<this.edges.length;B++){var C=this.edges[B];if(f=this.getPlacementScale(f,j.anchorPoint,v,C.anchorPoint,C),f>=this.maxScale)return f}}}return f},d.prototype.queryRenderedSymbols=function(a,b,c,d,f){var g={},h=[],i=this.collisionBoxArray,j=this.rotationMatrix,k=new e(a,b)._matMult(j),l=this.tempCollisionBox;l.anchorX=k.x,l.anchorY=k.y,l.x1=0,l.y1=0,l.x2=c-a,l.y2=d-b,l.maxScale=f,f=l.maxScale;for(var m=[k.x+l.x1/f,k.y+l.y1/f*this.yStretch,k.x+l.x2/f,k.y+l.y2/f*this.yStretch],n=this.grid.query(m[0],m[1],m[2],m[3]),o=this.ignoredGrid.query(m[0],m[1],m[2],m[3]),p=0;p<o.length;p++)n.push(o[p]);for(var q=0;q<n.length;q++){var r=i.get(n[q]),s=r.sourceLayerIndex,t=r.featureIndex;if(void 0===g[s]&&(g[s]={}),!g[s][t]){var u=r.anchorPoint.matMult(j),v=this.getPlacementScale(this.minScale,k,l,u,r);v>=f&&(g[s][t]=!0,h.push(n[q]))}}return h},d.prototype.getPlacementScale=function(a,b,c,d,e){var f=b.x-d.x,g=b.y-d.y,h=(e.x1-c.x2)/f,i=(e.x2-c.x1)/f,j=(e.y1-c.y2)*this.yStretch/g,k=(e.y2-c.y1)*this.yStretch/g;(isNaN(h)||isNaN(i))&&(h=i=1),(isNaN(j)||isNaN(k))&&(j=k=1);var l=Math.min(Math.max(h,i),Math.max(j,k)),m=e.maxScale,n=c.maxScale;return l>m&&(l=m),l>n&&(l=n),l>a&&l>=e.placementScale&&(a=l),a},d.prototype.insertCollisionFeature=function(a,b,c){for(var d=c?this.ignoredGrid:this.grid,e=this.collisionBoxArray,f=a.boxStartIndex;f<a.boxEndIndex;f++){var g=e.get(f);g.placementScale=b,b<this.maxScale&&d.insert(f,g.bbox0,g.bbox1,g.bbox2,g.bbox3)}}},{"../data/bucket":2,"grid-index":160,"point-geometry":192}],75:[function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j){var k=d?.6*g*h:0,l=Math.max(d?d.right-d.left:0,f?f.right-f.left:0),m=0===a[0].x||a[0].x===j||0===a[0].y||a[0].y===j;b-l*h<b/4&&(b=l*h+b/4);var n=2*g,o=m?b/2*i%b:(l/2+n)*h*i%b;return e(a,o,b,k,c,l*h,m,!1,j)}function e(a,b,c,d,i,j,k,l,m){for(var n=j/2,o=0,p=0;p<a.length-1;p++)o+=a[p].dist(a[p+1]);for(var q=0,r=b-c,s=[],t=0;t<a.length-1;t++){for(var u=a[t],v=a[t+1],w=u.dist(v),x=v.angleTo(u);r+c<q+w;){r+=c;var y=(r-q)/w,z=f(u.x,v.x,y),A=f(u.y,v.y,y);if(z>=0&&z<m&&A>=0&&A<m&&r-n>=0&&r+n<=o){var B=new g(z,A,x,t)._round();d&&!h(a,B,j,d,i)||s.push(B)}}q+=w}return l||s.length||k||(s=e(a,q/2,c,d,i,j,k,!0,m)),s}var f=a("../util/interpolate"),g=a("../symbol/anchor"),h=a("./check_max_angle");b.exports=d},{"../symbol/anchor":69,"../util/interpolate":116,"./check_max_angle":70}],76:[function(a,b,c){"use strict";function d(){this.width=h,this.height=h,this.bin=new e(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)}var e=a("shelf-pack"),f=a("../util/util"),g=4,h=128,i=2048;b.exports=d,d.prototype.getGlyphs=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]=[]),d[b].push(c);return d},d.prototype.getRects=function(){var a,b,c,d={};for(var e in this.ids)a=e.split("#"),b=a[0],c=a[1],d[b]||(d[b]={}),d[b][c]=this.index[e];return d},d.prototype.addGlyph=function(a,b,c,d){if(!c)return null;var e=b+"#"+c.id;if(this.index[e])return this.ids[e].indexOf(a)<0&&this.ids[e].push(a),this.index[e];if(!c.bitmap)return null;var g=c.width+2*d,h=c.height+2*d,i=1,j=g+2*i,k=h+2*i;j+=4-j%4,k+=4-k%4;var l=this.bin.packOne(j,k);if(l||(this.resize(),l=this.bin.packOne(j,k)),!l)return f.warnOnce("glyph bitmap overflow"),null;this.index[e]=l,this.ids[e]=[a];for(var m=this.data,n=c.bitmap,o=0;o<h;o++)for(var p=this.width*(l.y+o+i)+l.x+i,q=g*o,r=0;r<g;r++)m[p+r]=n[q+r];return this.dirty=!0,l},d.prototype.resize=function(){var a=this.width,b=this.height;if(!(a>=i||b>=i)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=g,this.height*=g,this.bin.resize(this.width,this.height);for(var c=new ArrayBuffer(this.width*this.height),d=0;d<b;d++){var e=new Uint8Array(this.data.buffer,b*d,a),f=new Uint8Array(c,b*d*g,a);f.set(e)}this.data=new Uint8Array(c)}},d.prototype.bind=function(a){this.gl=a,this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,null))},d.prototype.updateTexture=function(a){this.bind(a),this.dirty&&(a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data),this.dirty=!1)}},{"../util/util":122,"shelf-pack":194}],77:[function(a,b,c){"use strict";function d(a){this.url=a&&g(a),this.atlases={},this.stacks={},this.loading={}}function e(a,b,c){var d=1;this.advance=a.advance,this.left=a.left-c-d,this.top=a.top+c+d,this.rect=b}function f(a,b,c,d){return d=d||"abc",c.replace("{s}",d[a.length%d.length]).replace("{fontstack}",a).replace("{range}",b)}var g=a("../util/mapbox").normalizeGlyphsURL,h=a("../util/ajax"),i=a("../util/glyphs"),j=a("../symbol/glyph_atlas"),k=a("pbf");b.exports=d,d.prototype.getSimpleGlyphs=function(a,b,c,d){void 0===this.stacks[a]&&(this.stacks[a]={}),void 0===this.atlases[a]&&(this.atlases[a]=new j);for(var f,g={},h=this.stacks[a],i=this.atlases[a],k=3,l={},m=0,n=0;n<b.length;n++){var o=b[n];if(f=Math.floor(o/256),h[f]){var p=h[f].glyphs[o],q=i.addGlyph(c,a,p,k);p&&(g[o]=new e(p,q,k))}else void 0===l[f]&&(l[f]=[],m++),l[f].push(o)}m||d(void 0,g,a);var r=function(b,f,h){if(!b)for(var j=this.stacks[a][f]=h.stacks[0],n=0;n<l[f].length;n++){var o=l[f][n],p=j.glyphs[o],q=i.addGlyph(c,a,p,k);p&&(g[o]=new e(p,q,k))}m--,m||d(void 0,g,a)}.bind(this);for(var s in l)this.loadRange(a,s,r)},d.prototype.loadRange=function(a,b,c){if(256*b>65535)return c("glyphs > 65535 not supported");void 0===this.loading[a]&&(this.loading[a]={});var d=this.loading[a];if(d[b])d[b].push(c);else{d[b]=[c];var e=256*b+"-"+(256*b+255),g=f(a,e,this.url);h.getArrayBuffer(g,function(a,c){for(var e=!a&&new i(new k(c)),f=0;f<d[b].length;f++)d[b][f](a,b,e);delete d[b]})}},d.prototype.getGlyphAtlas=function(a){return this.atlases[a]}},{"../symbol/glyph_atlas":76,"../util/ajax":104,"../util/glyphs":115,"../util/mapbox":119,pbf:190}],78:[function(a,b,c){"use strict";b.exports=function(a,b,c){function d(d){k.push(a[d]),l.push(c[d]),m.push(b[d]),n++}function e(a,b,c){var d=j[a];return delete j[a],j[b]=d,l[d][0].pop(),l[d][0]=l[d][0].concat(c[0]),d}function f(a,b,c){var d=i[b];return delete i[b],i[a]=d,l[d][0].shift(),l[d][0]=c[0].concat(l[d][0]),d}function g(a,b,c){var d=c?b[0][b[0].length-1]:b[0][0];return a+":"+d.x+":"+d.y}var h,i={},j={},k=[],l=[],m=[],n=0;for(h=0;h<a.length;h++){var o=c[h],p=b[h];if(p){var q=g(p,o),r=g(p,o,!0);if(q in j&&r in i&&j[q]!==i[r]){var s=f(q,r,o),t=e(q,r,l[s]);delete i[q],delete j[r],j[g(p,l[t],!0)]=t,l[s]=null}else q in j?e(q,r,o):r in i?f(q,r,o):(d(h),i[q]=n-1,j[r]=n-1)}else d(h)}return{features:k,textFeatures:m,geometries:l}}},{}],79:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){this.anchorPoint=a,this.tl=b,this.tr=c,this.bl=d,this.br=e,this.tex=f,this.anchorAngle=g,this.glyphAngle=h,this.minScale=i,this.maxScale=j}function e(a,b,c,e,f,g,j,k,l){var m,n,o,p,q=b.image.rect,r=f.layout,s=1,t=b.left-s,u=t+q.w/b.image.pixelRatio,v=b.top-s,w=v+q.h/b.image.pixelRatio;if("none"!==r["icon-text-fit"]&&j){var x=u-t,y=w-v,z=r["text-size"]/24,A=j.left*z,B=j.right*z,C=j.top*z,D=j.bottom*z,E=B-A,F=D-C,G=r["icon-text-fit-padding"][0],H=r["icon-text-fit-padding"][1],I=r["icon-text-fit-padding"][2],J=r["icon-text-fit-padding"][3],K="width"===r["icon-text-fit"]?.5*(F-y):0,L="height"===r["icon-text-fit"]?.5*(E-x):0,M="width"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?E:x,N="height"===r["icon-text-fit"]||"both"===r["icon-text-fit"]?F:y;m=new h(A+L-J,C+K-G),n=new h(A+L+H+M,C+K-G),o=new h(A+L+H+M,C+K+I+N),p=new h(A+L-J,C+K+I+N)}else m=new h(t,v),n=new h(u,v),o=new h(u,w),p=new h(t,w);var O=f.getLayoutValue("icon-rotate",k,l)*Math.PI/180;if(g){var P=e[a.segment];if(a.y===P.y&&a.x===P.x&&a.segment+1<e.length){var Q=e[a.segment+1];O+=Math.atan2(a.y-Q.y,a.x-Q.x)+Math.PI}else O+=Math.atan2(a.y-P.y,a.x-P.x)}if(O){var R=Math.sin(O),S=Math.cos(O),T=[S,-R,R,S];m=m.matMult(T),n=n.matMult(T),p=p.matMult(T),o=o.matMult(T)}return[new d(new h(a.x,a.y),m,n,p,o,b.image.rect,0,0,i,1/0)]}function f(a,b,c,e,f,j){for(var k=f.layout["text-rotate"]*Math.PI/180,l=f.layout["text-keep-upright"],m=b.positionedGlyphs,n=[],o=0;o<m.length;o++){var p=m[o],q=p.glyph;if(q){var r=q.rect;if(r){var s,t=(p.x+q.advance/2)*c,u=i;j?(s=[],u=g(s,a,t,e,a.segment,!0),l&&(u=Math.min(u,g(s,a,t,e,a.segment,!1)))):s=[{anchorPoint:new h(a.x,a.y),offset:0,angle:0,maxScale:1/0,minScale:i}];for(var v=p.x+q.left,w=p.y-q.top,x=v+r.w,y=w+r.h,z=new h(v,w),A=new h(x,w),B=new h(v,y),C=new h(x,y),D=0;D<s.length;D++){var E=s[D],F=z,G=A,H=B,I=C;if(k){var J=Math.sin(k),K=Math.cos(k),L=[K,-J,J,K];F=F.matMult(L),G=G.matMult(L),H=H.matMult(L),I=I.matMult(L)}var M=Math.max(E.minScale,u),N=(a.angle+E.offset+2*Math.PI)%(2*Math.PI),O=(E.angle+E.offset+2*Math.PI)%(2*Math.PI);n.push(new d(E.anchorPoint,F,G,H,I,r,N,O,M,E.maxScale))}}}}return n}function g(a,b,c,d,e,f){var g=!f;c<0&&(f=!f),f&&e++;var j=new h(b.x,b.y),k=d[e],l=1/0;c=Math.abs(c);for(var m=i;;){var n=j.dist(k),o=c/n,p=Math.atan2(k.y-j.y,k.x-j.x);if(f||(p+=Math.PI),a.push({anchorPoint:j,offset:g?Math.PI:0,minScale:o,maxScale:l,angle:(p+2*Math.PI)%(2*Math.PI)}),o<=m)break;for(j=k;j.equals(k);)if(e+=f?1:-1,k=d[e],!k)return o;var q=k.sub(j)._unit();j=j.sub(q._mult(n)),l=o}return m}var h=a("point-geometry");b.exports={getIconQuads:e,getGlyphQuads:f,SymbolQuad:d};var i=.5},{"point-geometry":192}],80:[function(a,b,c){"use strict";function d(a,b,c){for(var d=[],f=0,g=a.length;f<g;f++){var h=e(a[f].properties,b["text-field"]);if(h){h=h.toString();var i=b["text-transform"];"uppercase"===i?h=h.toLocaleUpperCase():"lowercase"===i&&(h=h.toLocaleLowerCase());for(var j=0;j<h.length;j++)c[h.charCodeAt(j)]=!0;d[f]=h}else d[f]=null}return d}var e=a("../util/token");b.exports=d},{"../util/token":121}],81:[function(a,b,c){"use strict";function d(a,b,c,d){this.codePoint=a,this.x=b,this.y=c,this.glyph=d||null}function e(a,b,c,d,e,f){this.positionedGlyphs=a,this.text=b,this.top=c,this.bottom=d,this.left=e,this.right=f}function f(a,b,c,f,h,i,j,k,m){var n=[],o=new e(n,a,m[1],m[1],m[0],m[0]),p=-17,q=0,r=p;a=a.trim();for(var s=0;s<a.length;s++){var t=a.charCodeAt(s),u=b[t];(u||t===l)&&(n.push(new d(t,q,r,u)),u&&(q+=u.advance+k))}return!!n.length&&(g(o,b,f,c,h,i,j,m),o)}function g(a,b,c,d,e,f,g,j){var k=null,o=0,p=0,q=0,r=0,s=a.positionedGlyphs;if(d)for(var t=0;t<s.length;t++){var u=s[t];if(u.x-=o,u.y+=c*q,null!==k&&(u.x>d||s[k].codePoint===l)){var v=s[k+1].x;r=Math.max(v,r);for(var w=k+1;w<=t;w++)s[w].y+=c,s[w].x-=v;if(g){var x=k;m[s[k].codePoint]&&x--,h(s,b,p,x,g)}p=k+1,k=null,o+=v,q++}n[u.codePoint]&&(k=t)}var y=s[s.length-1],z=y.x+b[y.codePoint].advance;r=Math.max(r,z);var A=(q+1)*c;h(s,b,p,s.length-1,g),i(s,g,e,f,r,c,q,j),a.top+=-f*A,a.bottom=a.top+A,a.left+=-e*r,a.right=a.left+r}function h(a,b,c,d,e){for(var f=b[a[d].codePoint].advance,g=(a[d].x+f)*e,h=c;h<=d;h++)a[h].x-=g}function i(a,b,c,d,e,f,g,h){for(var i=(b-c)*e+h[0],j=(-d*(g+1)+.5)*f+h[1],k=0;k<a.length;k++)a[k].x+=i,a[k].y+=j}function j(a,b){if(!a||!a.rect)return null;var c=b["icon-offset"][0],d=b["icon-offset"][1],e=c-a.width/2,f=e+a.width,g=d-a.height/2,h=g+a.height;return new k(a,g,h,e,f)}function k(a,b,c,d,e){this.image=a,this.top=b,this.bottom=c,this.left=d,this.right=e}b.exports={shapeText:f,shapeIcon:j};var l=10,m={32:!0,8203:!0},n={32:!0,38:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0};m[l]=n[l]=!0},{}],82:[function(a,b,c){"use strict";function d(a,b){this.width=a,this.height=b,this.bin=new g(a,b),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0}function e(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=d*b+c,o=h*f+g;if(k)for(o-=f,m=-1;m<=j;m++,n=((m+j)%j+d)*b+c,o+=f)for(l=-1;l<=i;l++)e[o+l]=a[n+(l+i)%i];else for(m=0;m<j;m++,n+=b,o+=f)for(l=0;l<i;l++)e[o+l]=a[n+l]}function f(a,b,c,d,e){this.rect=a,this.width=b,this.height=c,this.sdf=d,this.pixelRatio=e}var g=a("shelf-pack"),h=a("../util/browser"),i=a("../util/util");b.exports=d,d.prototype.allocateImage=function(a,b){a/=this.pixelRatio,b/=this.pixelRatio;var c=2,d=a+c+(4-(a+c)%4),e=b+c+(4-(b+c)%4),f=this.bin.packOne(d,e);return f?f:(i.warnOnce("SpriteAtlas out of space."),null)},d.prototype.getImage=function(a,b){if(this.images[a])return this.images[a];if(!this.sprite)return null;var c=this.sprite.getSpritePosition(a);if(!c.width||!c.height)return null;var d=this.allocateImage(c.width,c.height);if(!d)return null;var e=new f(d,c.width/c.pixelRatio,c.height/c.pixelRatio,c.sdf,c.pixelRatio/this.pixelRatio);return this.images[a]=e,this.copy(d,c,b),e},d.prototype.getPosition=function(a,b){var c=this.getImage(a,b),d=c&&c.rect;if(!d)return null;var e=c.width*c.pixelRatio,f=c.height*c.pixelRatio,g=1;return{size:[c.width,c.height],tl:[(d.x+g)/this.width,(d.y+g)/this.height],br:[(d.x+g+e)/this.width,(d.y+g+f)/this.height]}},d.prototype.allocate=function(){if(!this.data){var a=Math.floor(this.width*this.pixelRatio),b=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(a*b);for(var c=0;c<this.data.length;c++)this.data[c]=0}},d.prototype.copy=function(a,b,c){if(this.sprite.img.data){var d=new Uint32Array(this.sprite.img.data.buffer);this.allocate();var f=this.data,g=1;e(d,this.sprite.img.width,b.x,b.y,f,this.width*this.pixelRatio,(a.x+g)*this.pixelRatio,(a.y+g)*this.pixelRatio,b.width,b.height,c),this.dirty=!0}},d.prototype.setSprite=function(a){a&&(this.pixelRatio=h.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=a},d.prototype.addIcons=function(a,b){for(var c=0;c<a.length;c++)this.getImage(a[c]);b(null,this.images)},d.prototype.bind=function(a,b){var c=!1;this.texture?a.bindTexture(a.TEXTURE_2D,this.texture):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),c=!0);var d=b?a.LINEAR:a.NEAREST;d!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,d),this.filter=d),this.dirty&&(this.allocate(),c?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),
this.dirty=!1)}},{"../util/browser":105,"../util/util":122,"shelf-pack":194}],83:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=b.exports=new d({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"}]});e.extendAll(g.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)}})},{"../util/struct_array":120,"../util/util":122,"point-geometry":192}],84:[function(a,b,c){"use strict";var d=a("../util/struct_array"),e=a("../util/util"),f=a("point-geometry"),g=a("./quads").SymbolQuad,h=b.exports=new d({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"}]});e.extendAll(h.prototype.StructType.prototype,{get anchorPoint(){return new f(this.anchorPointX,this.anchorPointY)},get SymbolQuad(){return new g(this.anchorPoint,new f(this.tlX,this.tlY),new f(this.trX,this.trY),new f(this.blX,this.blY),new f(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale)}})},{"../util/struct_array":120,"../util/util":122,"./quads":79,"point-geometry":192}],85:[function(a,b,c){"use strict";var d=a("../util/dom"),e=a("point-geometry"),f={scrollZoom:a("./handler/scroll_zoom"),boxZoom:a("./handler/box_zoom"),dragRotate:a("./handler/drag_rotate"),dragPan:a("./handler/drag_pan"),keyboard:a("./handler/keyboard"),doubleClickZoom:a("./handler/dblclick_zoom"),touchZoomRotate:a("./handler/touch_zoom_rotate")};b.exports=function(a,b){function c(a){r("mouseout",a)}function g(b){a.stop(),v=d.mousePos(t,b),r("mousedown",b)}function h(b){var c=a.dragRotate&&a.dragRotate.isActive();u&&!c&&r("contextmenu",u),u=null,r("mouseup",b)}function i(b){if(!(a.dragPan&&a.dragPan.isActive()||a.dragRotate&&a.dragRotate.isActive())){for(var c=b.toElement||b.target;c&&c!==t;)c=c.parentNode;c===t&&r("mousemove",b)}}function j(b){a.stop(),s("touchstart",b),!b.touches||b.touches.length>1||(w?(clearTimeout(w),w=null,r("dblclick",b)):w=setTimeout(n,300))}function k(a){s("touchmove",a)}function l(a){s("touchend",a)}function m(a){s("touchcancel",a)}function n(){w=null}function o(a){var b=d.mousePos(t,a);b.equals(v)&&r("click",a)}function p(a){r("dblclick",a),a.preventDefault()}function q(a){u=a,a.preventDefault()}function r(b,c){var e=d.mousePos(t,c);return a.fire(b,{lngLat:a.unproject(e),point:e,originalEvent:c})}function s(b,c){var f=d.touchPos(t,c),g=f.reduce(function(a,b,c,d){return a.add(b.div(d.length))},new e(0,0));return a.fire(b,{lngLat:a.unproject(g),point:g,lngLats:f.map(function(b){return a.unproject(b)},this),points:f,originalEvent:c})}var t=a.getCanvasContainer(),u=null,v=null,w=null;for(var x in f)a[x]=new f[x](a,b),b.interactive&&b[x]&&a[x].enable();t.addEventListener("mouseout",c,!1),t.addEventListener("mousedown",g,!1),t.addEventListener("mouseup",h,!1),t.addEventListener("mousemove",i,!1),t.addEventListener("touchstart",j,!1),t.addEventListener("touchend",l,!1),t.addEventListener("touchmove",k,!1),t.addEventListener("touchcancel",m,!1),t.addEventListener("click",o,!1),t.addEventListener("dblclick",p,!1),t.addEventListener("contextmenu",q,!1)}},{"../util/dom":112,"./handler/box_zoom":92,"./handler/dblclick_zoom":93,"./handler/drag_pan":94,"./handler/drag_rotate":95,"./handler/keyboard":96,"./handler/scroll_zoom":97,"./handler/touch_zoom_rotate":98,"point-geometry":192}],86:[function(a,b,c){"use strict";var d=a("../util/util"),e=a("../util/interpolate"),f=a("../util/browser"),g=a("../geo/lng_lat"),h=a("../geo/lng_lat_bounds"),i=a("point-geometry"),j=b.exports=function(){};d.extend(j.prototype,{getCenter:function(){return this.transform.center},setCenter:function(a,b){return this.jumpTo({center:a},b),this},panBy:function(a,b,c){return this.panTo(this.transform.center,d.extend({offset:i.convert(a).mult(-1)},b),c),this},panTo:function(a,b,c){return this.easeTo(d.extend({center:a},b),c)},getZoom:function(){return this.transform.zoom},setZoom:function(a,b){return this.jumpTo({zoom:a},b),this},zoomTo:function(a,b,c){return this.easeTo(d.extend({zoom:a},b),c)},zoomIn:function(a,b){return this.zoomTo(this.getZoom()+1,a,b),this},zoomOut:function(a,b){return this.zoomTo(this.getZoom()-1,a,b),this},getBearing:function(){return this.transform.bearing},setBearing:function(a,b){return this.jumpTo({bearing:a},b),this},rotateTo:function(a,b,c){return this.easeTo(d.extend({bearing:a},b),c)},resetNorth:function(a,b){return this.rotateTo(0,d.extend({duration:1e3},a),b),this},snapToNorth:function(a,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,b):this},getPitch:function(){return this.transform.pitch},setPitch:function(a,b){return this.jumpTo({pitch:a},b),this},fitBounds:function(a,b,c){b=d.extend({padding:0,offset:[0,0],maxZoom:1/0},b),a=h.convert(a);var e=i.convert(b.offset),f=this.transform,g=f.project(a.getNorthWest()),j=f.project(a.getSouthEast()),k=j.sub(g),l=(f.width-2*b.padding-2*Math.abs(e.x))/k.x,m=(f.height-2*b.padding-2*Math.abs(e.y))/k.y;return b.center=f.unproject(g.add(j).div(2)),b.zoom=Math.min(f.scaleZoom(f.scale*Math.min(l,m)),b.maxZoom),b.bearing=0,b.linear?this.easeTo(b,c):this.flyTo(b,c)},jumpTo:function(a,b){this.stop();var c=this.transform,d=!1,e=!1,f=!1;return"zoom"in a&&c.zoom!==+a.zoom&&(d=!0,c.zoom=+a.zoom),"center"in a&&(c.center=g.convert(a.center)),"bearing"in a&&c.bearing!==+a.bearing&&(e=!0,c.bearing=+a.bearing),"pitch"in a&&c.pitch!==+a.pitch&&(f=!0,c.pitch=+a.pitch),this.fire("movestart",b).fire("move",b),d&&this.fire("zoomstart",b).fire("zoom",b).fire("zoomend",b),e&&this.fire("rotate",b),f&&this.fire("pitch",b),this.fire("moveend",b)},easeTo:function(a,b){this.stop(),a=d.extend({offset:[0,0],duration:500,easing:d.ease},a);var c,f,h=this.transform,j=i.convert(a.offset),k=this.getZoom(),l=this.getBearing(),m=this.getPitch(),n="zoom"in a?+a.zoom:k,o="bearing"in a?this._normalizeBearing(a.bearing,l):l,p="pitch"in a?+a.pitch:m;"center"in a?(c=g.convert(a.center),f=h.centerPoint.add(j)):"around"in a?(c=g.convert(a.around),f=h.locationPoint(c)):(f=h.centerPoint.add(j),c=h.pointLocation(f));var q=h.locationPoint(c);return a.animate===!1&&(a.duration=0),this.zooming=n!==k,this.rotating=l!==o,this.pitching=p!==m,a.smoothEasing&&0!==a.duration&&(a.easing=this._smoothOutEasing(a.duration)),a.noMoveStart||this.fire("movestart",b),this.zooming&&this.fire("zoomstart",b),clearTimeout(this._onEaseEnd),this._ease(function(a){this.zooming&&(h.zoom=e(k,n,a)),this.rotating&&(h.bearing=e(l,o,a)),this.pitching&&(h.pitch=e(m,p,a)),h.setLocationAtPoint(c,q.add(f.sub(q)._mult(a))),this.fire("move",b),this.zooming&&this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){a.delayEndEvents?this._onEaseEnd=setTimeout(this._easeToEnd.bind(this,b),a.delayEndEvents):this._easeToEnd(b)}.bind(this),a),this},_easeToEnd:function(a){var b=this.zooming;this.zooming=!1,this.rotating=!1,this.pitching=!1,b&&this.fire("zoomend",a),this.fire("moveend",a)},flyTo:function(a,b){function c(a){var b=(z*z-y*y+(a?-1:1)*D*D*A*A)/(2*(a?z:y)*D*A);return Math.log(Math.sqrt(b*b+1)-b)}function f(a){return(Math.exp(a)-Math.exp(-a))/2}function h(a){return(Math.exp(a)+Math.exp(-a))/2}function j(a){return f(a)/h(a)}this.stop(),a=d.extend({offset:[0,0],speed:1.2,curve:1.42,easing:d.ease},a);var k=this.transform,l=i.convert(a.offset),m=this.getZoom(),n=this.getBearing(),o=this.getPitch(),p="center"in a?g.convert(a.center):this.getCenter(),q="zoom"in a?+a.zoom:m,r="bearing"in a?this._normalizeBearing(a.bearing,n):n,s="pitch"in a?+a.pitch:o;Math.abs(k.center.lng)+Math.abs(p.lng)>180&&(k.center.lng>0&&p.lng<0?p.lng+=360:k.center.lng<0&&p.lng>0&&(p.lng-=360));var t=k.zoomScale(q-m),u=k.point,v="center"in a?k.project(p).sub(l.div(t)):u,w=k.worldSize,x=a.curve,y=Math.max(k.width,k.height),z=y/t,A=v.sub(u).mag();if("minZoom"in a){var B=d.clamp(Math.min(a.minZoom,m,q),k.minZoom,k.maxZoom),C=y/k.zoomScale(B-m);x=Math.sqrt(C/A*2)}var D=x*x,E=c(0),F=function(a){return h(E)/h(E+x*a)},G=function(a){return y*((h(E)*j(E+x*a)-f(E))/D)/A},H=(c(1)-E)/x;if(Math.abs(A)<1e-6){if(Math.abs(y-z)<1e-6)return this.easeTo(a);var I=z<y?-1:1;H=Math.abs(Math.log(z/y))/x,G=function(){return 0},F=function(a){return Math.exp(I*x*a)}}if("duration"in a)a.duration=+a.duration;else{var J="screenSpeed"in a?+a.screenSpeed/x:+a.speed;a.duration=1e3*H/J}return this.zooming=!0,n!==r&&(this.rotating=!0),o!==s&&(this.pitching=!0),this.fire("movestart",b),this.fire("zoomstart",b),this._ease(function(a){var c=a*H,d=G(c);k.zoom=m+k.scaleZoom(1/F(c)),k.center=k.unproject(u.add(v.sub(u).mult(d)),w),this.rotating&&(k.bearing=e(n,r,a)),this.pitching&&(k.pitch=e(o,s,a)),this.fire("move",b),this.fire("zoom",b),this.rotating&&this.fire("rotate",b),this.pitching&&this.fire("pitch",b)},function(){this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",b),this.fire("moveend",b)},a),this},isEasing:function(){return!!this._abortFn},stop:function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},_ease:function(a,b,c){this._finishFn=b,this._abortFn=f.timed(function(b){a.call(this,c.easing(b)),1===b&&this._finishEase()},c.animate===!1?0:c.duration,this)},_finishEase:function(){delete this._abortFn;var a=this._finishFn;delete this._finishFn,a.call(this)},_normalizeBearing:function(a,b){a=d.wrap(a,-180,180);var c=Math.abs(a-b);return Math.abs(a-360-b)<c&&(a-=360),Math.abs(a+360-b)<c&&(a+=360),a},_smoothOutEasing:function(a){var b=d.ease;if(this._prevEase){var c=this._prevEase,e=(Date.now()-c.start)/c.duration,f=c.easing(e+.01)-c.easing(e),g=.27/Math.sqrt(f*f+1e-4)*.01,h=Math.sqrt(.0729-g*g);b=d.bezier(g,h,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:a,easing:b},b}})},{"../geo/lng_lat":13,"../geo/lng_lat_bounds":14,"../util/browser":105,"../util/interpolate":116,"../util/util":122,"point-geometry":192}],87:[function(a,b,c){"use strict";function d(a){g.setOptions(this,a)}var e=a("./control"),f=a("../../util/dom"),g=a("../../util/util");b.exports=d,d.prototype=g.inherit(e,{options:{position:"bottom-right"},onAdd:function(a){var b="mapboxgl-ctrl-attrib",c=this._container=f.create("div",b,a.getContainer());return this._updateAttributions(),this._updateEditLink(),a.on("data",function(a){"source"===a.dataType&&(this._updateAttributions(),this._updateEditLink())}.bind(this)),a.on("moveend",this._updateEditLink.bind(this)),c},_updateAttributions:function(){if(this._map.style){var a=[],b=this._map.style.sourceCaches;for(var c in b){var d=b[c].getSource();d.attribution&&a.indexOf(d.attribution)<0&&a.push(d.attribution)}a.sort(function(a,b){return a.length-b.length}),a=a.filter(function(b,c){for(var d=c+1;d<a.length;d++)if(a[d].indexOf(b)>=0)return!1;return!0}),this._container.innerHTML=a.join(" | "),this._editLink=null}},_updateEditLink:function(){if(this._editLink||(this._editLink=this._container.querySelector(".mapbox-improve-map")),this._editLink){var a=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+a.lng+"/"+a.lat+"/"+Math.round(this._map.getZoom()+1)}}})},{"../../util/dom":112,"../../util/util":122,"./control":88}],88:[function(a,b,c){"use strict";function d(){}var e=a("../../util/util"),f=a("../../util/evented");b.exports=d,d.prototype={addTo:function(a){this._map=a;var b=this._container=this.onAdd(a);if(this.options&&this.options.position){var c=this.options.position,d=a._controlCorners[c];b.className+=" mapboxgl-ctrl",c.indexOf("bottom")!==-1?d.insertBefore(b,d.firstChild):d.appendChild(b)}return this},remove:function(){return this._container.parentNode.removeChild(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this}},e.extend(d.prototype,f)},{"../../util/evented":113,"../../util/util":122}],89:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}var e=a("./control"),f=a("../../util/browser"),g=a("../../util/dom"),h=a("../../util/util"),i=a("../../util/window");b.exports=d;var j={enableHighAccuracy:!1,timeout:6e3};d.prototype=h.inherit(e,{options:{position:"top-right"},onAdd:function(a){var b="mapboxgl-ctrl",c=this._container=g.create("div",b+"-group",a.getContainer());return f.supportsGeolocation?(this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._geolocateButton=g.create("button",b+"-icon "+b+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),c):c},_onContextMenu:function(a){a.preventDefault()},_onClickGeolocate:function(){i.navigator.geolocation.getCurrentPosition(this._success.bind(this),this._error.bind(this),j),this._timeoutId=setTimeout(this._finish.bind(this),1e4)},_success:function(a){this._map.jumpTo({center:[a.coords.longitude,a.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",a),this._finish()},_error:function(a){this.fire("error",a),this._finish()},_finish:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}})},{"../../util/browser":105,"../../util/dom":112,"../../util/util":122,"../../util/window":107,"./control":88}],90:[function(a,b,c){"use strict";function d(a){h.setOptions(this,a)}function e(a){return new i.MouseEvent(a.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:a.detail,view:a.view,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY,movementX:a.movementX,movementY:a.movementY,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,altKey:a.altKey,metaKey:a.metaKey})}var f=a("./control"),g=a("../../util/dom"),h=a("../../util/util"),i=a("../../util/window");b.exports=d,d.prototype=h.inherit(f,{options:{position:"top-right"},onAdd:function(a){var b="mapboxgl-ctrl",c=this._container=g.create("div",b+"-group",a.getContainer());return this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(b+"-icon "+b+"-zoom-in",a.zoomIn.bind(a)),this._zoomOutButton=this._createButton(b+"-icon "+b+"-zoom-out",a.zoomOut.bind(a)),this._compass=this._createButton(b+"-icon "+b+"-compass",a.resetNorth.bind(a)),this._compassArrow=g.create("span","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),a.on("rotate",this._rotateCompassArrow.bind(this)),this._rotateCompassArrow(),this._el=a.getCanvasContainer(),c},_onContextMenu:function(a){a.preventDefault()},_onCompassDown:function(a){0===a.button&&(g.disableDrag(),i.document.addEventListener("mousemove",this._onCompassMove),i.document.addEventListener("mouseup",this._onCompassUp),this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassMove:function(a){0===a.button&&(this._el.dispatchEvent(e(a)),a.stopPropagation())},_onCompassUp:function(a){0===a.button&&(i.document.removeEventListener("mousemove",this._onCompassMove),i.document.removeEventListener("mouseup",this._onCompassUp),g.enableDrag(),this._el.dispatchEvent(e(a)),a.stopPropagation())},_createButton:function(a,b){var c=g.create("button",a,this._container);return c.type="button",c.addEventListener("click",function(){b()}),c},_rotateCompassArrow:function(){var a="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=a}})},{"../../util/dom":112,"../../util/util":122,"../../util/window":107,"./control":88}],91:[function(a,b,c){"use strict";function d(a){i.setOptions(this,a)}function e(a,b,c){var d=c&&c.maxWidth||100,e=a._container.clientHeight/2,h=g(a.unproject([0,e]),a.unproject([d,e]));if(c&&"imperial"===c.unit){var i=3.2808*h;if(i>5280){var j=i/5280;f(b,d,j,"mi")}else f(b,d,i,"ft")}else f(b,d,h,"m")}function f(a,b,c,d){var e=h(c),f=e/c;"m"===d&&e>=1e3&&(e/=1e3,d="km"),a.style.width=b*f+"px",a.innerHTML=e+d}function g(a,b){var c=6371e3,d=Math.PI/180,e=a.lat*d,f=b.lat*d,g=Math.sin(e)*Math.sin(f)+Math.cos(e)*Math.cos(f)*Math.cos((b.lng-a.lng)*d),h=c*Math.acos(Math.min(g,1));return h}function h(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}var i=a("../../util/util"),j=a("./control"),k=a("../../util/dom");b.exports=d,d.prototype=i.inherit(j,{options:{position:"bottom-left"},onAdd:function(a){var b="mapboxgl-ctrl-scale",c=this._container=k.create("div",b,a.getContainer()),d=this.options;return e(a,c,d),a.on("move",function(){e(a,c,d)}),c}})},{"../../util/dom":112,"../../util/util":122,"./control":88}],92:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),g.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../geo/lng_lat_bounds"),g=a("../../util/util"),h=a("../../util/window");b.exports=d,d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},_onMouseDown:function(a){a.shiftKey&&0===a.button&&(h.document.addEventListener("mousemove",this._onMouseMove,!1),h.document.addEventListener("keydown",this._onKeyDown,!1),h.document.addEventListener("mouseup",this._onMouseUp,!1),e.disableDrag(),this._startPos=e.mousePos(this._el,a),this._active=!0)},_onMouseMove:function(a){var b=this._startPos,c=e.mousePos(this._el,a);this._box||(this._box=e.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));var d=Math.min(b.x,c.x),f=Math.max(b.x,c.x),g=Math.min(b.y,c.y),h=Math.max(b.y,c.y);e.setTransform(this._box,"translate("+d+"px,"+g+"px)"),this._box.style.width=f-d+"px",this._box.style.height=h-g+"px"},_onMouseUp:function(a){if(0===a.button){var b=this._startPos,c=e.mousePos(this._el,a),d=(new f).extend(this._map.unproject(b)).extend(this._map.unproject(c));this._finish(),b.x===c.x&&b.y===c.y?this._fireEvent("boxzoomcancel",a):this._map.fitBounds(d,{linear:!0}).fire("boxzoomend",{originalEvent:a,boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",a))},_finish:function(){this._active=!1,h.document.removeEventListener("mousemove",this._onMouseMove,!1),h.document.removeEventListener("keydown",this._onKeyDown,!1),h.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),e.enableDrag()},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})}}},{"../../geo/lng_lat_bounds":14,"../../util/dom":112,"../../util/util":122,"../../util/window":107}],93:[function(a,b,c){"use strict";function d(a){this._map=a,this._onDblClick=this._onDblClick.bind(this)}b.exports=d,d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},_onDblClick:function(a){this._map.zoomTo(this._map.getZoom()+(a.originalEvent.shiftKey?-1:1),{around:a.lngLat},a)}}},{}],94:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util"),g=a("../../util/window");b.exports=d;var h=.3,i=f.bezier(0,0,h,1),j=1400,k=2500;d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},_onDown:function(a){this._ignoreEvent(a)||this.isActive()||(a.touches?(g.document.addEventListener("touchmove",this._onMove),g.document.addEventListener("touchend",this._onTouchEnd)):(g.document.addEventListener("mousemove",this._onMove),g.document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=e.mousePos(this._el,a),this._inertia=[[Date.now(),this._pos]])},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",a),this._fireEvent("movestart",a));var b=e.mousePos(this._el,a),c=this._map;c.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),b]),c.transform.setLocationAtPoint(c.transform.pointLocation(this._pos),b),this._fireEvent("drag",a),this._fireEvent("move",a),this._pos=b,a.preventDefault()}},_onUp:function(a){if(this.isActive()){this._active=!1,this._fireEvent("dragend",a),this._drainInertiaBuffer();var b=function(){this._fireEvent("moveend",a)}.bind(this),c=this._inertia;if(c.length<2)return void b();var d=c[c.length-1],e=c[0],f=d[1].sub(e[1]),g=(d[0]-e[0])/1e3;if(0===g||d[1].equals(e[1]))return void b();var l=f.mult(h/g),m=l.mag();m>j&&(m=j,l._unit()._mult(m));var n=m/(k*h),o=l.mult(-n/2);this._map.panBy(o,{duration:1e3*n,easing:i,noMoveStart:!0},{originalEvent:a})}},_onMouseUp:function(a){this._ignoreEvent(a)||(this._onUp(a),g.document.removeEventListener("mousemove",this._onMove),g.document.removeEventListener("mouseup",this._onMouseUp))},_onTouchEnd:function(a){this._ignoreEvent(a)||(this._onUp(a),g.document.removeEventListener("touchmove",this._onMove),g.document.removeEventListener("touchend",this._onTouchEnd))},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragRotate&&b.dragRotate.isActive())return!0;if(a.touches)return a.touches.length>1;if(a.ctrlKey)return!0;var c=1,d=0;return"mousemove"===a.type?a.buttons&0===c:a.button!==d},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>0&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":112,"../../util/util":122,"../../util/window":107}],95:[function(a,b,c){"use strict";function d(a,b){this._map=a,this._el=a.getCanvasContainer(),this._bearingSnap=b.bearingSnap,this._pitchWithRotate=b.pitchWithRotate!==!1,f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util"),g=a("../../util/window");b.exports=d;var h=.25,i=f.bezier(0,0,h,1),j=180,k=720;d.prototype={_enabled:!1,_active:!1,isEnabled:function(){return this._enabled},isActive:function(){return this._active},enable:function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},_onDown:function(a){this._ignoreEvent(a)||this.isActive()||(g.document.addEventListener("mousemove",this._onMove),g.document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=e.mousePos(this._el,a),this._center=this._map.transform.centerPoint,a.preventDefault())},_onMove:function(a){if(!this._ignoreEvent(a)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",a),this._fireEvent("movestart",a));var b=this._map;b.stop();var c=this._pos,d=e.mousePos(this._el,a),f=.8*(c.x-d.x),g=(c.y-d.y)*-.5,h=b.getBearing()-f,i=b.getPitch()-g,j=this._inertia,k=j[j.length-1];this._drainInertiaBuffer(),j.push([Date.now(),b._normalizeBearing(h,k[1])]),b.transform.bearing=h,this._pitchWithRotate&&(b.transform.pitch=i),this._fireEvent("rotate",a),this._fireEvent("move",a),this._pos=d}},_onUp:function(a){if(!this._ignoreEvent(a)&&(g.document.removeEventListener("mousemove",this._onMove),g.document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",a),this._drainInertiaBuffer();var b=this._map,c=b.getBearing(),d=this._inertia,e=function(){Math.abs(c)<this._bearingSnap?b.resetNorth({noMoveStart:!0},{originalEvent:a}):this._fireEvent("moveend",a)}.bind(this);if(d.length<2)return void e();var f=d[0],l=d[d.length-1],m=d[d.length-2],n=b._normalizeBearing(c,m[1]),o=l[1]-f[1],p=o<0?-1:1,q=(l[0]-f[0])/1e3;if(0===o||0===q)return void e();var r=Math.abs(o*(h/q));r>j&&(r=j);var s=r/(k*h),t=p*r*(s/2);n+=t,Math.abs(b._normalizeBearing(n,0))<this._bearingSnap&&(n=b._normalizeBearing(0,n)),b.rotateTo(n,{duration:1e3*s,easing:i,noMoveStart:!0},{originalEvent:a})}},_fireEvent:function(a,b){return this._map.fire(a,{originalEvent:b})},_ignoreEvent:function(a){var b=this._map;if(b.boxZoom&&b.boxZoom.isActive())return!0;if(b.dragPan&&b.dragPan.isActive())return!0;if(a.touches)return a.touches.length>1;var c=a.ctrlKey?1:2,d=a.ctrlKey?0:2;return"mousemove"===a.type?a.buttons&0===c:a.button!==d},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>0&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":112,"../../util/util":122,"../../util/window":107}],96:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)}function e(a){return a*(2-a)}b.exports=d;var f=100,g=15,h=10;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b=0,c=0,d=0,i=0,j=0;switch(a.keyCode){case 61:case 107:case 171:case 187:b=1;break;case 189:case 109:case 173:b=-1;break;case 37:a.shiftKey?c=-1:(a.preventDefault(),i=-1);break;case 39:a.shiftKey?c=1:(a.preventDefault(),i=1);break;case 38:a.shiftKey?d=1:(a.preventDefault(),j=-1);break;case 40:a.shiftKey?d=-1:(j=1,a.preventDefault())}var k=this._map,l=k.getZoom(),m={duration:300,delayEndEvents:500,easing:e,zoom:b?Math.round(l)+b*(a.shiftKey?2:1):l,bearing:k.getBearing()+c*g,pitch:k.getPitch()+d*h,offset:[-i*f,-j*f],center:k.getCenter()};k.easeTo(m,{originalEvent:a})}}}},{}],97:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util"),g=a("../../util/browser"),h=a("../../util/window");b.exports=d;var i=h.navigator.userAgent.toLowerCase(),j=i.indexOf("firefox")!==-1,k=i.indexOf("safari")!==-1&&i.indexOf("chrom")===-1;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},_onWheel:function(a){var b;"wheel"===a.type?(b=a.deltaY,j&&a.deltaMode===h.WheelEvent.DOM_DELTA_PIXEL&&(b/=g.devicePixelRatio),a.deltaMode===h.WheelEvent.DOM_DELTA_LINE&&(b*=40)):"mousewheel"===a.type&&(b=-a.wheelDeltaY,k&&(b/=3));var c=g.now(),d=c-(this._time||0);this._pos=e.mousePos(this._el,a),this._time=c,0!==b&&b%4.000244140625===0?this._type="wheel":0!==b&&Math.abs(b)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=b,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(d*b)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,b+=this._lastValue)),a.shiftKey&&b&&(b/=4),this._type&&this._zoom(-b,a),a.preventDefault()},_onTimeout:function(){this._type="wheel",this._zoom(-this._lastValue)},_zoom:function(a,b){if(0!==a){var c=this._map,d=2/(1+Math.exp(-Math.abs(a/100)));a<0&&0!==d&&(d=1/d);var e=c.ease?c.ease.to:c.transform.scale,f=c.transform.scaleZoom(e*d);c.zoomTo(f,{duration:"wheel"===this._type?200:0,around:c.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:b})}}}},{"../../util/browser":105,"../../util/dom":112,"../../util/util":122,"../../util/window":107}],98:[function(a,b,c){"use strict";function d(a){this._map=a,this._el=a.getCanvasContainer(),f.bindHandlers(this)}var e=a("../../util/dom"),f=a("../../util/util"),g=a("../../util/window");b.exports=d;var h=.15,i=f.bezier(0,0,h,1),j=12,k=2.5,l=.15,m=4;d.prototype={_enabled:!1,isEnabled:function(){return this._enabled},enable:function(){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0)},disable:function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},disableRotation:function(){this._rotationDisabled=!0},enableRotation:function(){this._rotationDisabled=!1},_onStart:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]);this._startVec=b.sub(c),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],g.document.addEventListener("touchmove",this._onMove,!1),g.document.addEventListener("touchend",this._onEnd,!1)}},_onMove:function(a){if(2===a.touches.length){var b=e.mousePos(this._el,a.touches[0]),c=e.mousePos(this._el,a.touches[1]),d=b.add(c).div(2),f=b.sub(c),g=f.mag()/this._startVec.mag(),h=this._rotationDisabled?0:180*f.angleWith(this._startVec)/Math.PI,i=this._map;if(this._gestureIntent){var j={duration:0,around:i.unproject(d)};"rotate"===this._gestureIntent&&(j.bearing=this._startBearing+h),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(j.zoom=i.transform.scaleZoom(this._startScale*g)),i.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),g,d]),i.easeTo(j,{originalEvent:a})}else{var k=Math.abs(1-g)>l,n=Math.abs(h)>m;n?this._gestureIntent="rotate":k&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=f,this._startScale=i.transform.scale,this._startBearing=i.transform.bearing)}a.preventDefault()}},_onEnd:function(a){g.document.removeEventListener("touchmove",this._onMove),g.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var b=this._inertia,c=this._map;if(b.length<2)return void c.snapToNorth({},{originalEvent:a});var d=b[b.length-1],e=b[0],f=c.transform.scaleZoom(this._startScale*d[1]),l=c.transform.scaleZoom(this._startScale*e[1]),m=f-l,n=(d[0]-e[0])/1e3,o=d[2];if(0===n||f===l)return void c.snapToNorth({},{originalEvent:a});var p=m*h/n;Math.abs(p)>k&&(p=p>0?k:-k);var q=1e3*Math.abs(p/(j*h)),r=f+p*q/2e3;r<0&&(r=0),c.easeTo({zoom:r,duration:q,easing:i,around:c.unproject(o)},{originalEvent:a})},_drainInertiaBuffer:function(){for(var a=this._inertia,b=Date.now(),c=160;a.length>2&&b-a[0][0]>c;)a.shift()}}},{"../../util/dom":112,"../../util/util":122,"../../util/window":107}],99:[function(a,b,c){"use strict";function d(){e.bindAll(["_onHashChange","_updateHash"],this)}b.exports=d;var e=a("../util/util"),f=a("../util/window");d.prototype={addTo:function(a){return this._map=a,f.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},remove:function(){return f.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),
delete this._map,this},_onHashChange:function(){var a=f.location.hash.replace("#","").split("/");return a.length>=3&&(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||0),pitch:+(a[4]||0)}),!0)},_updateHash:function(){var a=this._map.getCenter(),b=this._map.getZoom(),c=this._map.getBearing(),d=this._map.getPitch(),e=Math.max(0,Math.ceil(Math.log(b)/Math.LN2)),g="#"+Math.round(100*b)/100+"/"+a.lat.toFixed(e)+"/"+a.lng.toFixed(e);(c||d)&&(g+="/"+Math.round(10*c)/10),d&&(g+="/"+Math.round(d)),f.history.replaceState("","",g)}}},{"../util/util":122,"../util/window":107}],100:[function(a,b,c){"use strict";function d(a){a.parentNode&&a.parentNode.removeChild(a)}var e=a("../util/util"),f=a("../util/browser"),g=a("../util/window"),h=a("../util/evented"),i=a("../util/dom"),j=a("../style/style"),k=a("../style/animation_loop"),l=a("../render/painter"),m=a("../geo/transform"),n=a("./hash"),o=a("./bind_handlers"),p=a("./camera"),q=a("../geo/lng_lat"),r=a("../geo/lng_lat_bounds"),s=a("point-geometry"),t=a("./control/attribution_control"),u=a("mapbox-gl-supported"),v=0,w=20,x={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:v,maxZoom:w,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0},y=b.exports=function(a){a=e.extend({},x,a),this._interactive=a.interactive,this._failIfMajorPerformanceCaveat=a.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=a.preserveDrawingBuffer,this._trackResize=a.trackResize,this._bearingSnap=a.bearingSnap,"string"==typeof a.container?this._container=g.document.getElementById(a.container):this._container=a.container,this.animationLoop=new k,this.transform=new m(a.minZoom,a.maxZoom),a.maxBounds&&this.setMaxBounds(a.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){this.animationLoop.set(300),this._rerender()}.bind(this)),"undefined"!=typeof g&&(g.addEventListener("online",this._onWindowOnline,!1),g.addEventListener("resize",this._onWindowResize,!1)),o(this,a),this._hash=a.hash&&(new n).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),this._classes=[],this.resize(),a.classes&&this.setClasses(a.classes),a.style&&this.setStyle(a.style),a.attributionControl&&this.addControl(new t(a.attributionControl)),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})}),this.on("data",function(a){"style"===a.dataType?this._update(!0):this._update()})};e.extend(y.prototype,h),e.extend(y.prototype,p.prototype),e.extend(y.prototype,{addControl:function(a){return a.addTo(this),this},addClass:function(a,b){return this._classes.indexOf(a)>=0||""===a?this:(this._classes.push(a),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},removeClass:function(a,b){var c=this._classes.indexOf(a);return c<0||""===a?this:(this._classes.splice(c,1),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0))},setClasses:function(a,b){for(var c={},d=0;d<a.length;d++)""!==a[d]&&(c[a[d]]=!0);return this._classes=Object.keys(c),this._classOptions=b,this.style&&this.style.updateClasses(),this._update(!0)},hasClass:function(a){return this._classes.indexOf(a)>=0},getClasses:function(){return this._classes},resize:function(){var a=this._containerDimensions(),b=a[0],c=a[1];return this._resizeCanvas(b,c),this.transform.resize(b,c),this.painter.resize(b,c),this.fire("movestart").fire("move").fire("resize").fire("moveend")},getBounds:function(){var a=new r(this.transform.pointLocation(new s(0,this.transform.height)),this.transform.pointLocation(new s(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(a.extend(this.transform.pointLocation(new s(this.transform.size.x,0))),a.extend(this.transform.pointLocation(new s(0,this.transform.size.y)))),a},setMaxBounds:function(a){if(a){var b=r.convert(a);this.transform.lngRange=[b.getWest(),b.getEast()],this.transform.latRange=[b.getSouth(),b.getNorth()],this.transform._constrain(),this._update()}else null!==a&&void 0!==a||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},setMinZoom:function(a){if(a=null===a||void 0===a?v:a,a>=v&&a<=this.transform.maxZoom)return this.transform.minZoom=a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw new Error("minZoom must be between "+v+" and the current maxZoom, inclusive")},setMaxZoom:function(a){if(a=null===a||void 0===a?w:a,a>=this.transform.minZoom&&a<=w)return this.transform.maxZoom=a,this._update(),this.getZoom()>a&&this.setZoom(a),this;throw new Error("maxZoom must be between the current minZoom and "+w+", inclusive")},project:function(a){return this.transform.locationPoint(q.convert(a))},unproject:function(a){return this.transform.pointLocation(s.convert(a))},queryRenderedFeatures:function(){function a(a){return a instanceof s||Array.isArray(a)}var b,c={};return 2===arguments.length?(b=arguments[0],c=arguments[1]):1===arguments.length&&a(arguments[0])?b=arguments[0]:1===arguments.length&&(c=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(b),c,this.transform.zoom,this.transform.angle)},_makeQueryGeometry:function(a){void 0===a&&(a=[s.convert([0,0]),s.convert([this.transform.width,this.transform.height])]);var b,c=a instanceof s||"number"==typeof a[0];if(c){var d=s.convert(a);b=[d]}else{var e=[s.convert(a[0]),s.convert(a[1])];b=[e[0],new s(e[1].x,e[0].y),e[1],new s(e[0].x,e[1].y),e[0]]}return b=b.map(function(a){return this.transform.pointCoordinate(a)}.bind(this))},querySourceFeatures:function(a,b){return this.style.querySourceFeatures(a,b)},setStyle:function(a){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),a?(a instanceof j?this.style=a:this.style=new j(a,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},getStyle:function(){if(this.style)return this.style.serialize()},addSource:function(a,b){return this.style.addSource(a,b),this._update(!0),this},addSourceType:function(a,b,c){return this.style.addSourceType(a,b,c)},removeSource:function(a){return this.style.removeSource(a),this._update(!0),this},getSource:function(a){return this.style.getSource(a)},addLayer:function(a,b){return this.style.addLayer(a,b),this._update(!0),this},removeLayer:function(a){return this.style.removeLayer(a),this._update(!0),this},getLayer:function(a){return this.style.getLayer(a)},setFilter:function(a,b){return this.style.setFilter(a,b),this._update(!0),this},setLayerZoomRange:function(a,b,c){return this.style.setLayerZoomRange(a,b,c),this._update(!0),this},getFilter:function(a){return this.style.getFilter(a)},setPaintProperty:function(a,b,c,d){return this.style.setPaintProperty(a,b,c,d),this._update(!0),this},getPaintProperty:function(a,b,c){return this.style.getPaintProperty(a,b,c)},setLayoutProperty:function(a,b,c){return this.style.setLayoutProperty(a,b,c),this._update(!0),this},getLayoutProperty:function(a,b){return this.style.getLayoutProperty(a,b)},setLight:function(a){return this.style.setLight(a),this._update(!0),this},getLight:function(){return this.style.getLight()},getContainer:function(){return this._container},getCanvasContainer:function(){return this._canvasContainer},getCanvas:function(){return this._canvas},_containerDimensions:function(){var a=0,b=0;return this._container&&(a=this._container.offsetWidth||400,b=this._container.offsetHeight||300),[a,b]},_setupContainer:function(){var a=this._container;a.classList.add("mapboxgl-map");var b=this._canvasContainer=i.create("div","mapboxgl-canvas-container",a);this._interactive&&b.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",b),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",0);var c=this._containerDimensions();this._resizeCanvas(c[0],c[1]);var d=this._controlContainer=i.create("div","mapboxgl-control-container",a),e=this._controlCorners={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(a){e[a]=i.create("div","mapboxgl-ctrl-"+a,d)})},_resizeCanvas:function(a,b){var c=g.devicePixelRatio||1;this._canvas.width=c*a,this._canvas.height=c*b,this._canvas.style.width=a+"px",this._canvas.style.height=b+"px"},_setupPainter:function(){var a=e.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},u.webGLContextAttributes),b=this._canvas.getContext("webgl",a)||this._canvas.getContext("experimental-webgl",a);return b?void(this.painter=new l(b,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},_contextLost:function(a){a.preventDefault(),this._frameId&&f.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:a})},_contextRestored:function(a){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:a})},loaded:function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},_update:function(a){return this.style?(this._styleDirty=this._styleDirty||a,this._sourcesDirty=!0,this._rerender(),this):this},_render:function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{debug:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,vertices:this.vertices,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},remove:function(){this._hash&&this._hash.remove(),f.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof g&&g.removeEventListener("resize",this._onWindowResize,!1);var a=this.painter.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),d(this._canvasContainer),d(this._controlContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},_rerender:function(){this.style&&!this._frameId&&(this._frameId=f.frame(this._render))},_onWindowOnline:function(){this._update()},_onWindowResize:function(){this._trackResize&&this.stop().resize()._update()}}),e.extendAll(y.prototype,{_showTileBoundaries:!1,get showTileBoundaries(){return this._showTileBoundaries},set showTileBoundaries(a){this._showTileBoundaries!==a&&(this._showTileBoundaries=a,this._update())},_showCollisionBoxes:!1,get showCollisionBoxes(){return this._showCollisionBoxes},set showCollisionBoxes(a){this._showCollisionBoxes!==a&&(this._showCollisionBoxes=a,this.style._redoPlacement())},_showOverdrawInspector:!1,get showOverdrawInspector(){return this._showOverdrawInspector},set showOverdrawInspector(a){this._showOverdrawInspector!==a&&(this._showOverdrawInspector=a,this._update())},_repaint:!1,get repaint(){return this._repaint},set repaint(a){this._repaint=a,this._update()},_vertices:!1,get vertices(){return this._vertices},set vertices(a){this._vertices=a,this._update()}})},{"../geo/lng_lat":13,"../geo/lng_lat_bounds":14,"../geo/transform":15,"../render/painter":31,"../style/animation_loop":52,"../style/style":56,"../util/browser":105,"../util/dom":112,"../util/evented":113,"../util/util":122,"../util/window":107,"./bind_handlers":85,"./camera":86,"./control/attribution_control":87,"./hash":99,"mapbox-gl-supported":188,"point-geometry":192}],101:[function(a,b,c){"use strict";function d(a,b){this._offset=g.convert(b&&b.offset||[0,0]),this._update=this._update.bind(this),this._onMapClick=this._onMapClick.bind(this),a||(a=e.create("div")),a.classList.add("mapboxgl-marker"),this._element=a,this._popup=null}b.exports=d;var e=a("../util/dom"),f=(a("../util/util"),a("../geo/lng_lat")),g=a("point-geometry");a("./popup"),d.prototype={addTo:function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},remove:function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map=null),e.remove(this._element),this._popup&&this._popup.remove(),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=f.convert(a),this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},getElement:function(){return this._element},setPopup:function(a){return this._popup&&(this._popup.remove(),this._popup=null),a&&(this._popup=a,this._popup.setLngLat(this._lngLat)),this},_onMapClick:function(a){var b=a.originalEvent.target,c=this._element;this._popup&&(b===c||c.contains(b))&&this.togglePopup()},getPopup:function(){return this._popup},togglePopup:function(){var a=this._popup;a&&(a.isOpen()?a.remove():a.addTo(this._map))},_update:function(a){if(this._map){var b=this._map.project(this._lngLat)._add(this._offset);a&&"moveend"!==a.type||(b=b.round()),e.setTransform(this._element,"translate("+b.x+"px,"+b.y+"px)")}}}},{"../geo/lng_lat":13,"../util/dom":112,"../util/util":122,"./popup":102,"point-geometry":192}],102:[function(a,b,c){"use strict";function d(a){g.setOptions(this,a),g.bindAll(["_update","_onClickClose"],this)}function e(a){if(a){if("number"==typeof a){var b=Math.round(Math.sqrt(.5*Math.pow(a,2)));return{top:new k(0,a),"top-left":new k(b,b),"top-right":new k(-b,b),bottom:new k(0,-a),"bottom-left":new k(b,-b),"bottom-right":new k(-b,-b),left:new k(a,0),right:new k(-a,0)}}if(f(a)){var c=k.convert(a);return{top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{top:k.convert(a.top),"top-left":k.convert(a["top-left"]),"top-right":k.convert(a["top-right"]),bottom:k.convert(a.bottom),"bottom-left":k.convert(a["bottom-left"]),"bottom-right":k.convert(a["bottom-right"]),left:k.convert(a.left),right:k.convert(a.right)}}return e(new k(0,0))}function f(a){return a instanceof k||Array.isArray(a)}b.exports=d;var g=a("../util/util"),h=a("../util/evented"),i=a("../util/dom"),j=a("../geo/lng_lat"),k=a("point-geometry"),l=a("../util/window");d.prototype=g.inherit(h,{options:{closeButton:!0,closeOnClick:!0},addTo:function(a){return this._map=a,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},isOpen:function(){return!!this._map},remove:function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},getLngLat:function(){return this._lngLat},setLngLat:function(a){return this._lngLat=j.convert(a),this._update(),this},setText:function(a){return this.setDOMContent(l.document.createTextNode(a))},setHTML:function(a){var b,c=l.document.createDocumentFragment(),d=l.document.createElement("body");for(d.innerHTML=a;b=d.firstChild;)c.appendChild(b);return this.setDOMContent(c)},setDOMContent:function(a){return this._createContent(),this._content.appendChild(a),this._update(),this},_createContent:function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},_update:function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var a=this.options.anchor,b=e(this.options.offset),c=this._map.project(this._lngLat).round();if(!a){var d=this._container.offsetWidth,f=this._container.offsetHeight;a=c.y+b.bottom.y<f?["top"]:c.y>this._map.transform.height-f?["bottom"]:[],c.x<d/2?a.push("left"):c.x>this._map.transform.width-d/2&&a.push("right"),a=0===a.length?"bottom":a.join("-")}var g=c.add(b[a]),h={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},j=this._container.classList;for(var k in h)j.remove("mapboxgl-popup-anchor-"+k);j.add("mapboxgl-popup-anchor-"+a),i.setTransform(this._container,h[a]+" translate("+g.x+"px,"+g.y+"px)")}},_onClickClose:function(){this.remove()}})},{"../geo/lng_lat":13,"../util/dom":112,"../util/evented":113,"../util/util":122,"../util/window":107,"point-geometry":192}],103:[function(a,b,c){"use strict";function d(a,b,c){this.target=a,this.parent=b,this.mapId=c,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)}b.exports=d,d.prototype.send=function(a,b,c,d,e){var f=c?this.mapId+":"+this.callbackID++:null;c&&(this.callbacks[f]=c),this.target.postMessage({targetMapId:e,sourceMapId:this.mapId,type:a,id:String(f),data:b},d)},d.prototype.receive=function(a){function b(a,b,c){this.target.postMessage({sourceMapId:this.mapId,type:"<response>",id:String(e),error:a?String(a):null,data:b},c)}var c,d=a.data,e=d.id;if(!d.targetMapId||this.mapId===d.targetMapId)if("<response>"===d.type)c=this.callbacks[d.id],delete this.callbacks[d.id],c&&c(d.error||null,d.data);else if("undefined"!=typeof d.id&&this.parent[d.type])this.parent[d.type](d.sourceMapId,d.data,b.bind(this));else if("undefined"!=typeof d.id&&this.parent.getWorkerSource){var f=d.type.split("."),g=this.parent.getWorkerSource(d.sourceMapId,f[0]);g[f[1]](d.data,b.bind(this))}else this.parent[d.type](d.data)},d.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)}},{}],104:[function(a,b,c){"use strict";function d(a){var b=e.document.createElement("a");return b.href=a,b.protocol===e.document.location.protocol&&b.host===e.document.location.host}var e=a("./window");c.getJSON=function(a,b){var c=new e.XMLHttpRequest;return c.open("GET",a,!0),c.setRequestHeader("Accept","application/json"),c.onerror=function(a){b(a)},c.onload=function(){if(c.status>=200&&c.status<300&&c.response){var a;try{a=JSON.parse(c.response)}catch(a){return b(a)}b(null,a)}else b(new Error(c.statusText))},c.send(),c},c.getArrayBuffer=function(a,b){var c=new e.XMLHttpRequest;return c.open("GET",a,!0),c.responseType="arraybuffer",c.onerror=function(a){b(a)},c.onload=function(){c.status>=200&&c.status<300&&c.response?b(null,c.response):b(new Error(c.statusText))},c.send(),c},c.getImage=function(a,b){return c.getArrayBuffer(a,function(a,c){if(a)return b(a);var d=new e.Image;d.onload=function(){b(null,d),(e.URL||e.webkitURL).revokeObjectURL(d.src)};var f=new e.Blob([new Uint8Array(c)],{type:"image/png"});return d.src=(e.URL||e.webkitURL).createObjectURL(f),d.getData=function(){var a=e.document.createElement("canvas"),b=a.getContext("2d");return a.width=d.width,a.height=d.height,b.drawImage(d,0,0),b.getImageData(0,0,d.width,d.height).data},d})},c.getVideo=function(a,b){var c=e.document.createElement("video");c.onloadstart=function(){b(null,c)};for(var f=0;f<a.length;f++){var g=e.document.createElement("source");d(a[f])||(c.crossOrigin="Anonymous"),g.src=a[f],c.appendChild(g)}return c.getData=function(){return c},c}},{"./window":107}],105:[function(a,b,c){"use strict";var d=a("./window");b.exports.now=function(){return d.performance&&d.performance.now?d.performance.now.bind(d.performance):Date.now.bind(Date)}();var e=d.requestAnimationFrame||d.mozRequestAnimationFrame||d.webkitRequestAnimationFrame||d.msRequestAnimationFrame;c.frame=function(a){return e(a)};var f=d.cancelAnimationFrame||d.mozCancelAnimationFrame||d.webkitCancelAnimationFrame||d.msCancelAnimationFrame;c.cancelFrame=function(a){f(a)},c.timed=function(a,d,e){function f(i){g||(i=b.exports.now(),i>=h+d?a.call(e,1):(a.call(e,(i-h)/d),c.frame(f)))}if(!d)return a.call(e,1),null;var g=!1,h=b.exports.now();return c.frame(f),function(){g=!0}},c.supported=a("mapbox-gl-supported"),c.hardwareConcurrency=d.navigator.hardwareConcurrency||4,Object.defineProperty(c,"devicePixelRatio",{get:function(){return d.devicePixelRatio}}),c.supportsWebp=!1;var g=d.document.createElement("img");g.onload=function(){c.supportsWebp=!0},g.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=",c.supportsGeolocation=!!d.navigator.geolocation},{"./window":107,"mapbox-gl-supported":188}],106:[function(a,b,c){"use strict";var d=a("webworkify"),e=a("../window"),f=e.URL.createObjectURL(new d(a("../../source/worker"),{bare:!0}));b.exports=function(){return new e.Worker(f)}},{"../../source/worker":50,"../window":107,webworkify:209}],107:[function(a,b,c){"use strict";b.exports=self},{}],108:[function(a,b,c){"use strict";function d(a,b){return b.area-a.area}var e=a("quickselect"),f=a("./util").calculateSignedArea;b.exports=function(a,b){var c=a.length;if(c<=1)return[a];for(var g,h,i=[],j=0;j<c;j++){var k=f(a[j]);0!==k&&(a[j].area=Math.abs(k),void 0===h&&(h=k<0),h===k<0?(g&&i.push(g),g=[a[j]]):g.push(a[j]))}if(g&&i.push(g),b>1)for(var l=0;l<i.length;l++)i[l].length<=b||(e(i[l],b,1,i[l].length-1,d),i[l]=i[l].slice(0,b));return i}},{"./util":122,quickselect:193}],109:[function(a,b,c){"use strict";b.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0}},{}],110:[function(a,b,c){"use strict";function d(a){this._stringToNumber={},this._numberToString=[];for(var b=0;b<a.length;b++){var c=a[b];this._stringToNumber[c]=b,this._numberToString[b]=c}}b.exports=d,d.prototype.encode=function(a){return this._stringToNumber[a]},d.prototype.decode=function(a){return this._numberToString[a]}},{}],111:[function(a,b,c){"use strict";function d(a,b){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var c=this.workerPool.acquire(this.id),d=0;d<c.length;d++){var g=c[d],h=new f(g,b,this.id);h.name="Worker "+d,this.actors.push(h)}}var e=a("./util"),f=a("./actor");b.exports=d,d.prototype={broadcast:function(a,b,c){c=c||function(){},e.asyncAll(this.actors,function(c,d){c.send(a,b,d)},c)},send:function(a,b,c,d,e){return("number"!=typeof d||isNaN(d))&&(d=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[d].send(a,b,c,e),d},remove:function(){this.actors.forEach(function(a){a.remove()}),this.actors=[],this.workerPool.release(this.id)}}},{"./actor":103,"./util":122}],112:[function(a,b,c){"use strict";function d(a){for(var b=0;b<a.length;b++)if(a[b]in i)return a[b];return a[0]}function e(a){a.preventDefault(),a.stopPropagation(),g.removeEventListener("click",e,!0)}var f=a("point-geometry"),g=a("./window");c.create=function(a,b,c){var d=g.document.createElement(a);return b&&(d.className=b),c&&c.appendChild(d),d};var h,i=g.document.documentElement.style,j=d(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);c.disableDrag=function(){j&&(h=i[j],i[j]="none")},c.enableDrag=function(){j&&(i[j]=h)};var k=d(["transform","WebkitTransform"]);c.setTransform=function(a,b){a.style[k]=b},c.suppressClick=function(){g.addEventListener("click",e,!0),g.setTimeout(function(){g.removeEventListener("click",e,!0)},0)},c.mousePos=function(a,b){var c=a.getBoundingClientRect();return b=b.touches?b.touches[0]:b,new f(b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop)},c.touchPos=function(a,b){for(var c=a.getBoundingClientRect(),d=[],e="touchend"===b.type?b.changedTouches:b.touches,g=0;g<e.length;g++)d.push(new f(e[g].clientX-c.left-a.clientLeft,e[g].clientY-c.top-a.clientTop));return d},c.remove=function(a){a.parentNode&&a.parentNode.removeChild(a)}},{"./window":107,"point-geometry":192}],113:[function(a,b,c){"use strict";var d=a("./util"),e={on:function(a,b){return this._listeners=this._listeners||{},this._listeners[a]=this._listeners[a]||[],this._listeners[a].push(b),this},off:function(a,b){if(this._listeners&&this._listeners[a]){var c=this._listeners[a].indexOf(b);c!==-1&&this._listeners[a].splice(c,1)}return this},once:function(a,b){var c=function(d){this.off(a,c),b.call(this,d)}.bind(this);return this.on(a,c),this},fire:function(a,b){if(this.listens(a)){b=d.extend({},b,{type:a,target:this});for(var c=this._listeners&&this._listeners[a]?this._listeners[a].slice():[],e=0;e<c.length;e++)c[e].call(this,b);this._eventedParent&&this._eventedParent.fire(a,d.extend({},b,this._eventedParentData))}else d.endsWith(a,"error")&&console.error(b&&b.error||b||"Empty error event");return this},listens:function(a){return this._listeners&&this._listeners[a]||this._eventedParent&&this._eventedParent.listens(a)},setEventedParent:function(a,b){return this._eventedParent=a,this._eventedParentData=b,this}};b.exports=e},{"./util":122}],114:[function(a,b,c){"use strict";function d(a,b){return b.max-a.max}function e(a,b,c,d){this.p=new i(a,b),this.h=c,this.d=f(this.p,d),this.max=this.d+this.h*Math.SQRT2}function f(a,b){for(var c=!1,d=1/0,e=0;e<b.length;e++)for(var f=b[e],g=0,h=f.length,i=h-1;g<h;i=g++){var k=f[g],l=f[i];k.y>a.y!=l.y>a.y&&a.x<(l.x-k.x)*(a.y-k.y)/(l.y-k.y)+k.x&&(c=!c),d=Math.min(d,j(a,k,l))}return(c?1:-1)*Math.sqrt(d)}function g(a){for(var b=0,c=0,d=0,f=a[0],g=0,h=f.length,i=h-1;g<h;i=g++){var j=f[g],k=f[i],l=j.x*k.y-k.x*j.y;c+=(j.x+k.x)*l,d+=(j.y+k.y)*l,b+=3*l}return new e(c/b,d/b,0,a)}var h=a("tinyqueue"),i=a("point-geometry"),j=a("./intersection_tests").distToSegmentSquared;b.exports=function(a,b,c){b=b||1;for(var f,i,j,k,l=a[0],m=0;m<l.length;m++){var n=l[m];(!m||n.x<f)&&(f=n.x),(!m||n.y<i)&&(i=n.y),(!m||n.x>j)&&(j=n.x),(!m||n.y>k)&&(k=n.y)}for(var o=j-f,p=k-i,q=Math.min(o,p),r=q/2,s=new h(null,d),t=f;t<j;t+=q)for(var u=i;u<k;u+=q)s.push(new e(t+r,u+r,r,a));for(var v=g(a),w=s.length;s.length;){var x=s.pop();x.d>v.d&&(v=x,c&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,w)),x.max-v.d<=b||(r=x.h/2,s.push(new e(x.p.x-r,x.p.y-r,r,a)),s.push(new e(x.p.x+r,x.p.y-r,r,a)),s.push(new e(x.p.x-r,x.p.y+r,r,a)),s.push(new e(x.p.x+r,x.p.y+r,r,a)),w+=4)}return c&&(console.log("num probes: "+w),console.log("best distance: "+v.d)),v.p}},{"./intersection_tests":117,"point-geometry":192,tinyqueue:200}],115:[function(a,b,c){"use strict";function d(a,b){this.stacks=a.readFields(e,[],b)}function e(a,b,c){if(1===a){var d=c.readMessage(f,{glyphs:{}});b.push(d)}}function f(a,b,c){if(1===a)b.name=c.readString();else if(2===a)b.range=c.readString();else if(3===a){var d=c.readMessage(g,{});b.glyphs[d.id]=d}}function g(a,b,c){1===a?b.id=c.readVarint():2===a?b.bitmap=c.readBytes():3===a?b.width=c.readVarint():4===a?b.height=c.readVarint():5===a?b.left=c.readSVarint():6===a?b.top=c.readSVarint():7===a&&(b.advance=c.readVarint())}b.exports=d},{}],116:[function(a,b,c){"use strict";function d(a,b,c){return a*(1-c)+b*c}b.exports=d,d.number=d,d.vec2=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c)]},d.color=function(a,b,c){return[d(a[0],b[0],c),d(a[1],b[1],c),d(a[2],b[2],c),d(a[3],b[3],c)]},d.array=function(a,b,c){return a.map(function(a,e){return d(a,b[e],c)})}},{}],117:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++)for(var g=b[f],h=0;h<g.length;h++){var i=g[h];if(m(e,i))return!0;if(j(i,e,c))return!0}return!1}function e(a,b){if(1===a.length&&1===a[0].length)return l(b,a[0][0]);for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)if(l(a,d[e]))return!0;for(var f=0;f<a.length;f++){for(var g=a[f],i=0;i<g.length;i++)if(l(b,g[i]))return!0;for(var j=0;j<b.length;j++)if(h(g,b[j]))return!0}return!1}function f(a,b,c){for(var d=0;d<b.length;d++)for(var e=b[d],f=0;f<a.length;f++){var h=a[f];if(h.length>=3)for(var i=0;i<e.length;i++)if(m(h,e[i]))return!0;if(g(h,e,c))return!0}return!1}function g(a,b,c){if(a.length>1){if(h(a,b))return!0;for(var d=0;d<b.length;d++)if(j(b[d],a,c))return!0}for(var e=0;e<a.length;e++)if(j(a[e],b,c))return!0;return!1}function h(a,b){for(var c=0;c<a.length-1;c++)for(var d=a[c],e=a[c+1],f=0;f<b.length-1;f++){var g=b[f],h=b[f+1];if(i(d,e,g,h))return!0}return!1}function i(a,b,c,d){return n(a,c,d)!==n(b,c,d)&&n(a,b,c)!==n(a,b,d)}function j(a,b,c){var d=c*c;if(1===b.length)return a.distSqr(b[0])<d;for(var e=1;e<b.length;e++){var f=b[e-1],g=b[e];if(k(a,f,g)<d)return!0}return!1}function k(a,b,c){var d=b.distSqr(c);if(0===d)return a.distSqr(b);var e=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d;return e<0?a.distSqr(b):e>1?a.distSqr(c):a.distSqr(c.sub(b)._mult(e)._add(b))}function l(a,b){for(var c,d,e,f=!1,g=0;g<a.length;g++){c=a[g];for(var h=0,i=c.length-1;h<c.length;i=h++)d=c[h],e=c[i],d.y>b.y!=e.y>b.y&&b.x<(e.x-d.x)*(b.y-d.y)/(e.y-d.y)+d.x&&(f=!f)}return f}function m(a,b){for(var c=!1,d=0,e=a.length-1;d<a.length;e=d++){var f=a[d],g=a[e];f.y>b.y!=g.y>b.y&&b.x<(g.x-f.x)*(b.y-f.y)/(g.y-f.y)+f.x&&(c=!c)}return c}var n=a("./util").isCounterClockwise;b.exports={multiPolygonIntersectsBufferedMultiPoint:d,multiPolygonIntersectsMultiPolygon:e,multiPolygonIntersectsBufferedMultiLine:f,distToSegmentSquared:k}},{"./util":122}],118:[function(a,b,c){"use strict";function d(a,b){this.max=a,this.onRemove=b,this.reset()}b.exports=d,d.prototype.reset=function(){for(var a in this.data)this.onRemove(this.data[a]);return this.data={},this.order=[],this},d.prototype.add=function(a,b){if(this.has(a))this.order.splice(this.order.indexOf(a),1),this.data[a]=b,this.order.push(a);else if(this.data[a]=b,this.order.push(a),this.order.length>this.max){var c=this.get(this.order[0]);c&&this.onRemove(c)}return this},d.prototype.has=function(a){return a in this.data},d.prototype.keys=function(){return this.order},d.prototype.get=function(a){if(!this.has(a))return null;var b=this.data[a];return delete this.data[a],this.order.splice(this.order.indexOf(a),1),b},d.prototype.setMaxSize=function(a){for(this.max=a;this.order.length>this.max;){var b=this.get(this.order[0]);b&&this.onRemove(b)}return this}},{}],119:[function(a,b,c){"use strict";function d(a,b,c){if(c=c||f.ACCESS_TOKEN,!c&&f.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/developers/api/#access-tokens");var d=f.API_URL+a+(b?"?"+b:"");if(f.REQUIRE_ACCESS_TOKEN){if("s"===c[0])throw new Error("Use a public access token (pk.*) with Mapbox GL JS, not a secret access token (sk.*). See https://www.mapbox.com/developers/api/#access-tokens");d+=(b?"&":"?")+"access_token="+c}return d}function e(a){return a.access_token&&"tk."===a.access_token.slice(0,3)?i.extend({},a,{access_token:f.ACCESS_TOKEN}):a}var f=a("./config"),g=a("./browser"),h=a("url"),i=a("./util");b.exports.isMapboxURL=function(a){return"mapbox:"===h.parse(a).protocol},b.exports.normalizeStyleURL=function(a,b){var c=h.parse(a);return"mapbox:"!==c.protocol?a:d("/styles/v1"+c.pathname,c.query,b)},b.exports.normalizeSourceURL=function(a,b){var c=h.parse(a);if("mapbox:"!==c.protocol)return a;var e=a.match(/mapbox:\/\/([^?]+)/)[1];
return d("/v4/"+e+".json",c.query,b)+"&secure"},b.exports.normalizeGlyphsURL=function(a,b){var c=h.parse(a);if("mapbox:"!==c.protocol)return a;var e=c.pathname.split("/")[1];return d("/fonts/v1/"+e+"/{fontstack}/{range}.pbf",c.query,b)},b.exports.normalizeSpriteURL=function(a,b,c,e){var f=h.parse(a);return"mapbox:"!==f.protocol?(f.pathname+=b+c,h.format(f)):d("/styles/v1"+f.pathname+"/sprite"+b+c,f.query,e)},b.exports.normalizeTileURL=function(a,b,c){var d=h.parse(a,!0);if(!b)return a;var f=h.parse(b);if("mapbox:"!==f.protocol)return a;var i=g.supportsWebp?".webp":"$1",j=g.devicePixelRatio>=2||512===c?"@2x":"";return h.format({protocol:d.protocol,hostname:d.hostname,pathname:d.pathname.replace(/(\.(?:png|jpg)\d*)/,j+i),query:e(d.query)})}},{"./browser":105,"./config":109,"./util":122,url:131}],120:[function(a,b,c){"use strict";function d(a){function b(){m.apply(this,arguments)}function c(){n.apply(this,arguments),this.members=b.prototype.members}var d=JSON.stringify(a);if(p[d])return p[d];void 0===a.alignment&&(a.alignment=1),b.prototype=Object.create(m.prototype);var h=0,j=0,o=["Uint8"];return b.prototype.members=a.members.map(function(c){c={name:c.name,type:c.type,components:c.components||1},o.indexOf(c.type)<0&&o.push(c.type);var d=g(c.type);j=Math.max(j,d),c.offset=h=f(h,Math.max(a.alignment,d));for(var e=0;e<c.components;e++)Object.defineProperty(b.prototype,c.name+(1===c.components?"":e),{get:k(c,e),set:l(c,e)});return h+=d*c.components,c}),b.prototype.alignment=a.alignment,b.prototype.size=f(h,Math.max(j,a.alignment)),c.serialize=e,c.prototype=Object.create(n.prototype),c.prototype.StructType=b,c.prototype.bytesPerElement=b.prototype.size,c.prototype.emplaceBack=i(b.prototype.members,b.prototype.size),c.prototype._usedTypes=o,p[d]=c,c}function e(){return{members:this.prototype.StructType.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}}function f(a,b){return Math.ceil(a/b)*b}function g(a){return o[a].BYTES_PER_ELEMENT}function h(a){return a.toLowerCase()}function i(a,b){for(var c=[],d=[],e="var i = this.length;\nthis.resize(this.length + 1);\n",f=0;f<a.length;f++){var i=a[f],j=g(i.type);c.indexOf(j)<0&&(c.push(j),e+="var o"+j.toFixed(0)+" = i * "+(b/j).toFixed(0)+";\n");for(var k=0;k<i.components;k++){var l="v"+d.length,m="o"+j.toFixed(0)+" + "+(i.offset/j+k).toFixed(0);e+="this."+h(i.type)+"["+m+"] = "+l+";\n",d.push(l)}}return e+="return i;",new Function(d,e)}function j(a,b){var c="this._pos"+g(a.type).toFixed(0),d=(a.offset/g(a.type)+b).toFixed(0),e=c+" + "+d;return"this._structArray."+h(a.type)+"["+e+"]"}function k(a,b){return new Function([],"return "+j(a,b)+";")}function l(a,b){return new Function(["x"],j(a,b)+" = x;")}function m(a,b){this._structArray=a,this._pos1=b*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}function n(a){void 0!==a?(this.arrayBuffer=a.arrayBuffer,this.length=a.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))}b.exports=d;var o={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},p={};n.prototype.DEFAULT_CAPACITY=128,n.prototype.RESIZE_MULTIPLIER=5,n.prototype.serialize=function(){return this.trim(),{length:this.length,arrayBuffer:this.arrayBuffer}},n.prototype.get=function(a){return new this.StructType(this,a)},n.prototype.trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},n.prototype.resize=function(a){if(this.length=a,a>this.capacity){this.capacity=Math.max(a,Math.floor(this.capacity*this.RESIZE_MULTIPLIER),this.DEFAULT_CAPACITY),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var b=this.uint8;this._refreshViews(),b&&this.uint8.set(b)}},n.prototype._refreshViews=function(){for(var a=0;a<this._usedTypes.length;a++){var b=this._usedTypes[a];this[h(b)]=new o[b](this.arrayBuffer)}},n.prototype.toArray=function(a,b){for(var c=[],d=a;d<b;d++){var e=this.get(d);c.push(e)}return c}},{}],121:[function(a,b,c){"use strict";function d(a,b){return b.replace(/{([^{}]+)}/g,function(b,c){return c in a?a[c]:""})}b.exports=d},{}],122:[function(a,b,c){"use strict";var d=a("unitbezier"),e=a("../geo/coordinate");c.easeCubicInOut=function(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)},c.bezier=function(a,b,c,e){var f=new d(a,b,c,e);return function(a){return f.solve(a)}},c.ease=c.bezier(.25,.1,.25,1),c.clamp=function(a,b,c){return Math.min(c,Math.max(b,a))},c.wrap=function(a,b,c){var d=c-b,e=((a-b)%d+d)%d+b;return e===b?c:e},c.coalesce=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(null!==b&&void 0!==b)return b}},c.asyncAll=function(a,b,c){if(!a.length)return c(null,[]);var d=a.length,e=new Array(a.length),f=null;a.forEach(function(a,g){b(a,function(a,b){a&&(f=a),e[g]=b,0===--d&&c(f,e)})})},c.keysDifference=function(a,b){var c=[];for(var d in a)d in b||c.push(d);return c},c.extend=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},c.extendAll=function(a,b){for(var c in b)Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c));return a},c.inherit=function(a,b){var d="function"==typeof a?a.prototype:a,e=Object.create(d);return c.extendAll(e,b),e},c.pick=function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d];e in a&&(c[e]=a[e])}return c};var f=1;c.uniqueId=function(){return f++},c.debounce=function(a,b){var c,d;return function(){d=arguments,clearTimeout(c),c=setTimeout(function(){a.apply(null,d)},b)}},c.bindAll=function(a,b){a.forEach(function(a){b[a]&&(b[a]=b[a].bind(b))})},c.bindHandlers=function(a){for(var b in a)"function"==typeof a[b]&&0===b.indexOf("_on")&&(a[b]=a[b].bind(a))},c.setOptions=function(a,b){a.hasOwnProperty("options")||(a.options=a.options?Object.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},c.getCoordinatesCenter=function(a){for(var b=1/0,c=1/0,d=-(1/0),f=-(1/0),g=0;g<a.length;g++)b=Math.min(b,a[g].column),c=Math.min(c,a[g].row),d=Math.max(d,a[g].column),f=Math.max(f,a[g].row);var h=d-b,i=f-c,j=Math.max(h,i);return new e((b+d)/2,(c+f)/2,0).zoomTo(Math.floor(-Math.log(j)/Math.LN2))},c.endsWith=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},c.startsWith=function(a,b){return 0===a.indexOf(b)},c.mapObject=function(a,b,c){var d={};for(var e in a)d[e]=b.call(c||this,a[e],e,a);return d},c.filterObject=function(a,b,c){var d={};for(var e in a)b.call(c||this,a[e],e,a)&&(d[e]=a[e]);return d},c.deepEqual=function(a,b){if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(var d=0;d<a.length;d++)if(!c.deepEqual(a[d],b[d]))return!1;return!0}if("object"==typeof a&&null!==a&&null!==b){if("object"!=typeof b)return!1;var e=Object.keys(a);if(e.length!==Object.keys(b).length)return!1;for(var f in a)if(!c.deepEqual(a[f],b[f]))return!1;return!0}return a===b},c.clone=function(a){return Array.isArray(a)?a.map(c.clone):"object"==typeof a?c.mapObject(a,c.clone):a},c.arraysIntersect=function(a,b){for(var c=0;c<a.length;c++)if(b.indexOf(a[c])>=0)return!0;return!1};var g={};c.warnOnce=function(a){g[a]||("undefined"!=typeof console&&console.warn(a),g[a]=!0)},c.isCounterClockwise=function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)},c.calculateSignedArea=function(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d},c.isClosedPolygon=function(a){if(a.length<4)return!1;var b=a[0],d=a[a.length-1];return!(Math.abs(b.x-d.x)>0||Math.abs(b.y-d.y)>0)&&Math.abs(c.calculateSignedArea(a))>.01},c.sphericalToCartesian=function(a){var b=a[0],c=a[1],d=a[2];return c+=90,c*=Math.PI/180,d*=Math.PI/180,[b*Math.cos(c)*Math.sin(d),b*Math.sin(c)*Math.sin(d),b*Math.cos(d)]}},{"../geo/coordinate":12,unitbezier:201}],123:[function(a,b,c){"use strict";function d(a,b,c,d){this._vectorTileFeature=a,a._z=b,a._x=c,a._y=d,this.properties=a.properties,null!=a.id&&(this.id=a.id)}b.exports=d,d.prototype={type:"Feature",get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set geometry(a){this._geometry=a},toJSON:function(){var a={};for(var b in this)"_geometry"!==b&&"_vectorTileFeature"!==b&&"toJSON"!==b&&(a[b]=this[b]);return a}}},{}],124:[function(a,b,c){"use strict";function d(){this.active={}}var e=a("./web_worker");b.exports=d,d.prototype={acquire:function(b){if(!this.workers){var c=a("../mapbox-gl").workerCount;for(this.workers=[];this.workers.length<c;)this.workers.push(new e)}return this.active[b]=!0,this.workers.slice()},release:function(a){delete this.active[a],0===Object.keys(this.active).length&&(this.workers.forEach(function(a){a.terminate()}),this.workers=null)}}},{"../mapbox-gl":18,"./web_worker":106}],125:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:126}],126:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],127:[function(b,c,d){(function(b){!function(e){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:x}function l(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<q;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=i<=t?y:i>=t+z?z:i-t,!(l<n);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;h<q;++h)p=a[h],p<128&&u.push(L(p));for(d=e=u.length,e&&u.push(E);d<q;){for(j=w,h=0;h<q;++h)p=a[h],p>=b&&p<j&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;h<q;++h)if(p=a[h],p<b&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=n<=g?y:n>=g+z?z:n-g,!(k<o);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],128:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],129:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],130:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":128,"./encode":129}],131:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=d!==-1&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);C!==-1&&(A===-1||C<A)&&(A=C)}var D,E;E=A===-1?h.lastIndexOf("@"):h.lastIndexOf("@",A),E!==-1&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);C!==-1&&(A===-1||C<A)&&(A=C)}A===-1&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;B<H;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;K<L;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;B<H;B++){var R=p[B];if(h.indexOf(R)!==-1){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");T!==-1&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(U!==-1?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":132,punycode:127,querystring:130}],132:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],133:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],134:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],135:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(d<0)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return a<10?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),h=d[c];c<f;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":134,_process:126,inherits:133}],136:[function(a,b,c){function d(a){return a=Math.round(a),a<0?0:a>255?255:a}function e(a){return a<0?0:a>1?1:a}function f(a){return d("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function g(a){return e("%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a));
}function h(a,b,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?a+(b-a)*c*6:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a}function i(a){var b=a.replace(/ /g,"").toLowerCase();if(b in j)return j[b].slice();if("#"===b[0]){if(4===b.length){var c=parseInt(b.substr(1),16);return c>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null}if(7===b.length){var c=parseInt(b.substr(1),16);return c>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null}return null}var e=b.indexOf("("),i=b.indexOf(")");if(e!==-1&&i+1===b.length){var k=b.substr(0,e),l=b.substr(e+1,i-(e+1)).split(","),m=1;switch(k){case"rgba":if(4!==l.length)return null;m=g(l.pop());case"rgb":return 3!==l.length?null:[f(l[0]),f(l[1]),f(l[2]),m];case"hsla":if(4!==l.length)return null;m=g(l.pop());case"hsl":if(3!==l.length)return null;var n=(parseFloat(l[0])%360+360)%360/360,o=g(l[1]),p=g(l[2]),q=p<=.5?p*(o+1):p+o-p*o,r=2*p-q;return[d(255*h(r,q,n+1/3)),d(255*h(r,q,n)),d(255*h(r,q,n-1/3)),m];default:return null}}return null}var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{c.parseCSSColor=i}catch(a){}},{}],137:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;g<h;g++)i=b[g]*d,j=g<h-1?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-(1/0);do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(h<=e&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&t(f<l?e:g,f,k,l,f<l?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(i<m||i===m&&d.x>c.x)&&z(d,a)&&(c=d,m=i)),d=d.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],138:[function(a,b,c){"use strict";function d(a){return new Function("f","var p = (f && f.properties || {}); return "+e(a))}function e(a){if(!a)return"true";var b=a[0];if(a.length<=1)return"any"===b?"false":"true";var c="=="===b?g(a[1],a[2],"===",!1):"!="===b?g(a[1],a[2],"!==",!1):"<"===b||">"===b||"<="===b||">="===b?g(a[1],a[2],b,!0):"any"===b?h(a.slice(1),"||"):"all"===b?h(a.slice(1),"&&"):"none"===b?k(h(a.slice(1),"||")):"in"===b?i(a[1],a.slice(2)):"!in"===b?k(i(a[1],a.slice(2))):"has"===b?j(a[1]):"!has"===b?k(j([a[1]])):"true";return"("+c+")"}function f(a){return"$type"===a?"f.type":"$id"===a?"f.id":"p["+JSON.stringify(a)+"]"}function g(a,b,c,d){var e=f(a),g="$type"===a?m.indexOf(b):JSON.stringify(b);return(d?"typeof "+e+"=== typeof "+g+"&&":"")+e+c+g}function h(a,b){return a.map(e).join(b)}function i(a,b){"$type"===a&&(b=b.map(function(a){return m.indexOf(a)}));var c=JSON.stringify(b.sort(l)),d=f(a);return b.length<=200?c+".indexOf("+d+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+d+", "+c+",0,"+(b.length-1)+")"}function j(a){return JSON.stringify(a)+" in p"}function k(a){return"!("+a+")"}function l(a,b){return a<b?-1:a>b?1:0}b.exports=d;var m=["Unknown","Point","LineString","Polygon"]},{}],139:[function(a,b,c){function d(a,b){switch(a&&a.type||null){case"FeatureCollection":return a.features=a.features.map(e(d,b)),a;case"Feature":return a.geometry=d(a.geometry,b),a;case"Polygon":case"MultiPolygon":return f(a,b);default:return a}}function e(a,b){return function(c){return a(c,b)}}function f(a,b){return"Polygon"===a.type?a.coordinates=g(a.coordinates,b):"MultiPolygon"===a.type&&(a.coordinates=a.coordinates.map(e(g,b))),a}function g(a,b){b=!!b,a[0]=h(a[0],!b);for(var c=1;c<a.length;c++)a[c]=h(a[c],b);return a}function h(a,b){return i(a)===b?a:a.reverse()}function i(a){return j.ring(a)>=0}var j=a("geojson-area");b.exports=d},{"geojson-area":140}],140:[function(a,b,c){function d(a){if("Polygon"===a.type)return e(a.coordinates);if("MultiPolygon"===a.type){for(var b=0,c=0;c<a.coordinates.length;c++)b+=e(a.coordinates[c]);return b}return null}function e(a){var b=0;if(a&&a.length>0){b+=Math.abs(f(a[0]));for(var c=1;c<a.length;c++)b-=Math.abs(f(a[c]))}return b}function f(a){var b=0;if(a.length>2){for(var c,d,e=0;e<a.length-1;e++)c=a[e],d=a[e+1],b+=g(d[0]-c[0])*(2+Math.sin(g(c[1]))+Math.sin(g(d[1])));b=b*h.RADIUS*h.RADIUS/2}return b}function g(a){return a*Math.PI/180}var h=a("wgs84");b.exports.geometry=d,b.exports.ring=f},{wgs84:141}],141:[function(a,b,c){b.exports.RADIUS=6378137,b.exports.FLATTENING=1/298.257223563,b.exports.POLAR_RADIUS=6356752.3142},{}],142:[function(a,b,c){"use strict";function d(a,b,c,d,g,i,j,k){if(c/=b,d/=b,j>=c&&k<=d)return a;if(j>d||k<c)return null;for(var l=[],m=0;m<a.length;m++){var n,o,p=a[m],q=p.geometry,r=p.type;if(n=p.min[g],o=p.max[g],n>=c&&o<=d)l.push(p);else if(!(n>d||o<c)){var s=1===r?e(q,c,d,g):f(q,c,d,g,i,3===r);s.length&&l.push(h(p.tags,r,s,p.id))}}return l.length?l:null}function e(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=g[d];h>=b&&h<=c&&e.push(g)}return e}function f(a,b,c,d,e,f){for(var h=[],i=0;i<a.length;i++){var j,k,l,m=0,n=0,o=null,p=a[i],q=p.area,r=p.dist,s=p.outer,t=p.length,u=[];for(k=0;k<t-1;k++)j=o||p[k],o=p[k+1],m=n||j[d],n=o[d],m<b?n>c?(u.push(e(j,o,b),e(j,o,c)),f||(u=g(h,u,q,r,s))):n>=b&&u.push(e(j,o,b)):m>c?n<b?(u.push(e(j,o,c),e(j,o,b)),f||(u=g(h,u,q,r,s))):n<=c&&u.push(e(j,o,c)):(u.push(j),n<b?(u.push(e(j,o,b)),f||(u=g(h,u,q,r,s))):n>c&&(u.push(e(j,o,c)),f||(u=g(h,u,q,r,s))));j=p[t-1],m=j[d],m>=b&&m<=c&&u.push(j),l=u[u.length-1],f&&l&&(u[0][0]!==l[0]||u[0][1]!==l[1])&&u.push(u[0]),g(h,u,q,r,s)}return h}function g(a,b,c,d,e){return b.length&&(b.area=c,b.dist=d,void 0!==e&&(b.outer=e),a.push(b)),[]}b.exports=d;var h=a("./feature")},{"./feature":144}],143:[function(a,b,c){"use strict";function d(a,b){var c=[];if("FeatureCollection"===a.type)for(var d=0;d<a.features.length;d++)e(c,a.features[d],b);else"Feature"===a.type?e(c,a,b):e(c,{geometry:a},b);return c}function e(a,b,c){if(null!==b.geometry){var d,h,i,k,l=b.geometry,m=l.type,n=l.coordinates,o=b.properties,p=b.id;if("Point"===m)a.push(j(o,1,[g(n)],p));else if("MultiPoint"===m)a.push(j(o,1,f(n),p));else if("LineString"===m)a.push(j(o,2,[f(n,c)],p));else if("MultiLineString"===m||"Polygon"===m){for(i=[],d=0;d<n.length;d++)k=f(n[d],c),"Polygon"===m&&(k.outer=0===d),i.push(k);a.push(j(o,"Polygon"===m?3:2,i,p))}else if("MultiPolygon"===m){for(i=[],d=0;d<n.length;d++)for(h=0;h<n[d].length;h++)k=f(n[d][h],c),k.outer=0===h,i.push(k);a.push(j(o,3,i,p))}else{if("GeometryCollection"!==m)throw new Error("Input data is not a valid GeoJSON object.");for(d=0;d<l.geometries.length;d++)e(a,{geometry:l.geometries[d],properties:o},c)}}}function f(a,b){for(var c=[],d=0;d<a.length;d++)c.push(g(a[d]));return b&&(i(c,b),h(c)),c}function g(a){var b=Math.sin(a[1]*Math.PI/180),c=a[0]/360+.5,d=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return d=d<0?0:d>1?1:d,[c,d,0]}function h(a){for(var b,c,d=0,e=0,f=0;f<a.length-1;f++)b=c||a[f],c=a[f+1],d+=b[0]*c[1]-c[0]*b[1],e+=Math.abs(c[0]-b[0])+Math.abs(c[1]-b[1]);a.area=Math.abs(d/2),a.dist=e}b.exports=d;var i=a("./simplify"),j=a("./feature")},{"./feature":144,"./simplify":146}],144:[function(a,b,c){"use strict";function d(a,b,c,d){var f={id:d||null,type:b,geometry:c,tags:a||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return e(f),f}function e(a){var b=a.geometry,c=a.min,d=a.max;if(1===a.type)f(c,d,b);else for(var e=0;e<b.length;e++)f(c,d,b[e]);return a}function f(a,b,c){for(var d,e=0;e<c.length;e++)d=c[e],a[0]=Math.min(d[0],a[0]),b[0]=Math.max(d[0],b[0]),a[1]=Math.min(d[1],a[1]),b[1]=Math.max(d[1],b[1])}b.exports=d},{}],145:[function(a,b,c){"use strict";function d(a,b){return new e(a,b)}function e(a,b){b=this.options=i(Object.create(this.options),b);var c=b.debug;c&&console.time("preprocess data");var d=1<<b.maxZoom,e=k(a,b.tolerance/(d*b.extent));this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",b.indexMaxZoom,b.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),e=n(e,b.buffer/b.extent,g),e.length&&this.splitTile(e,0,0,0),c&&(e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function f(a,b,c){return 32*((1<<a)*c+b)+a}function g(a,b,c){return[c,(c-a[0])*(b[1]-a[1])/(b[0]-a[0])+a[1],1]}function h(a,b,c){return[(c-a[1])*(b[0]-a[0])/(b[1]-a[1])+a[0],c,1]}function i(a,b){for(var c in b)a[c]=b[c];return a}function j(a,b,c){var d=a.source;if(1!==d.length)return!1;var e=d[0];if(3!==e.type||e.geometry.length>1)return!1;var f=e.geometry[0].length;if(5!==f)return!1;for(var g=0;g<f;g++){var h=l.point(e.geometry[0][g],b,a.z2,a.x,a.y);if(h[0]!==-c&&h[0]!==b+c||h[1]!==-c&&h[1]!==b+c)return!1}return!0}b.exports=d;var k=a("./convert"),l=a("./transform"),m=a("./clip"),n=a("./wrap"),o=a("./tile");e.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},e.prototype.splitTile=function(a,b,c,d,e,i,k){for(var l=[a,b,c,d],n=this.options,p=n.debug,q=null;l.length;){d=l.pop(),c=l.pop(),b=l.pop(),a=l.pop();var r=1<<b,s=f(b,c,d),t=this.tiles[s],u=b===n.maxZoom?0:n.tolerance/(r*n.extent);if(!t&&(p>1&&console.time("creation"),t=this.tiles[s]=o(a,r,c,d,u,b===n.maxZoom),this.tileCoords.push({z:b,x:c,y:d}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",b,c,d,t.numFeatures,t.numPoints,t.numSimplified),console.timeEnd("creation"));var v="z"+b;this.stats[v]=(this.stats[v]||0)+1,this.total++}if(t.source=a,e){if(b===n.maxZoom||b===e)continue;var w=1<<e-b;if(c!==Math.floor(i/w)||d!==Math.floor(k/w))continue}else if(b===n.indexMaxZoom||t.numPoints<=n.indexMaxPoints)continue;if(n.solidChildren||!j(t,n.extent,n.buffer)){t.source=null,p>1&&console.time("clipping");var x,y,z,A,B,C,D=.5*n.buffer/n.extent,E=.5-D,F=.5+D,G=1+D;x=y=z=A=null,B=m(a,r,c-D,c+F,0,g,t.min[0],t.max[0]),C=m(a,r,c+E,c+G,0,g,t.min[0],t.max[0]),B&&(x=m(B,r,d-D,d+F,1,h,t.min[1],t.max[1]),y=m(B,r,d+E,d+G,1,h,t.min[1],t.max[1])),C&&(z=m(C,r,d-D,d+F,1,h,t.min[1],t.max[1]),A=m(C,r,d+E,d+G,1,h,t.min[1],t.max[1])),p>1&&console.timeEnd("clipping"),a.length&&(l.push(x||[],b+1,2*c,2*d),l.push(y||[],b+1,2*c,2*d+1),l.push(z||[],b+1,2*c+1,2*d),l.push(A||[],b+1,2*c+1,2*d+1))}else e&&(q=b)}return q},e.prototype.getTile=function(a,b,c){var d=this.options,e=d.extent,g=d.debug,h=1<<a;b=(b%h+h)%h;var i=f(a,b,c);if(this.tiles[i])return l.tile(this.tiles[i],e);g>1&&console.log("drilling down to z%d-%d-%d",a,b,c);for(var k,m=a,n=b,o=c;!k&&m>0;)m--,n=Math.floor(n/2),o=Math.floor(o/2),k=this.tiles[f(m,n,o)];if(!k||!k.source)return null;if(g>1&&console.log("found parent tile z%d-%d-%d",m,n,o),j(k,e,d.buffer))return l.tile(k,e);g>1&&console.time("drilling down");var p=this.splitTile(k.source,m,n,o,a,b,c);if(g>1&&console.timeEnd("drilling down"),null!==p){var q=1<<a-p;i=f(p,Math.floor(b/q),Math.floor(c/q))}return this.tiles[i]?l.tile(this.tiles[i],e):null}},{"./clip":142,"./convert":143,"./tile":147,"./transform":148,"./wrap":149}],146:[function(a,b,c){"use strict";function d(a,b){var c,d,f,g,h=b*b,i=a.length,j=0,k=i-1,l=[];for(a[j][2]=1,a[k][2]=1;k;){for(d=0,c=j+1;c<k;c++)f=e(a[c],a[j],a[k]),f>d&&(g=c,d=f);d>h?(a[g][2]=d,l.push(j),l.push(g),j=g):(k=l.pop(),j=l.pop())}}function e(a,b,c){var d=b[0],e=b[1],f=c[0],g=c[1],h=a[0],i=a[1],j=f-d,k=g-e;if(0!==j||0!==k){var l=((h-d)*j+(i-e)*k)/(j*j+k*k);l>1?(d=f,e=g):l>0&&(d+=j*l,e+=k*l)}return j=h-d,k=i-e,j*j+k*k}b.exports=d},{}],147:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z2:b,transformed:!1,min:[2,1],max:[-1,0]},i=0;i<a.length;i++){h.numFeatures++,e(h,a[i],f,g);var j=a[i].min,k=a[i].max;j[0]<h.min[0]&&(h.min[0]=j[0]),j[1]<h.min[1]&&(h.min[1]=j[1]),k[0]>h.max[0]&&(h.max[0]=k[0]),k[1]>h.max[1]&&(h.max[1]=k[1])}return h}function e(a,b,c,d){var e,g,h,i,j=b.geometry,k=b.type,l=[],m=c*c;if(1===k)for(e=0;e<j.length;e++)l.push(j[e]),a.numPoints++,a.numSimplified++;else for(e=0;e<j.length;e++)if(h=j[e],d||!(2===k&&h.dist<c||3===k&&h.area<m)){var n=[];for(g=0;g<h.length;g++)i=h[g],(d||i[2]>m)&&(n.push(i),a.numSimplified++),a.numPoints++;3===k&&f(n,h.outer),l.push(n)}else a.numPoints+=h.length;if(l.length){var o={geometry:l,type:k,tags:b.tags||null};null!==b.id&&(o.id=b.id),a.features.push(o)}}function f(a,b){var c=g(a);c<0===b&&a.reverse()}function g(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c[0]-b[0])*(b[1]+c[1]);return d}b.exports=d},{}],148:[function(a,b,c){"use strict";function d(a,b){if(a.transformed)return a;var c,d,f,g=a.z2,h=a.x,i=a.y;for(c=0;c<a.features.length;c++){var j=a.features[c],k=j.geometry,l=j.type;if(1===l)for(d=0;d<k.length;d++)k[d]=e(k[d],b,g,h,i);else for(d=0;d<k.length;d++){var m=k[d];for(f=0;f<m.length;f++)m[f]=e(m[f],b,g,h,i)}}return a.transformed=!0,a}function e(a,b,c,d,e){var f=Math.round(b*(a[0]*c-d)),g=Math.round(b*(a[1]*c-e));return[f,g]}c.tile=d,c.point=e},{}],149:[function(a,b,c){"use strict";function d(a,b,c){var d=a,f=g(a,1,-1-b,b,0,c,-1,2),h=g(a,1,1-b,2+b,0,c,-1,2);return(f||h)&&(d=g(a,1,-b,1+b,0,c,-1,2)||[],f&&(d=e(f,1).concat(d)),h&&(d=d.concat(e(h,-1)))),d}function e(a,b){for(var c=[],d=0;d<a.length;d++){var e,g=a[d],i=g.type;if(1===i)e=f(g.geometry,b);else{e=[];for(var j=0;j<g.geometry.length;j++)e.push(f(g.geometry[j],b))}c.push(h(g.tags,i,e,g.id))}return c}function f(a,b){var c=[];c.area=a.area,c.dist=a.dist;for(var d=0;d<a.length;d++)c.push([a[d][0]+b,a[d][1],a[d][2]]);return c}var g=a("./clip"),h=a("./feature");b.exports=d},{"./clip":142,"./feature":144}],150:[function(a,b,c){c.glMatrix=a("./gl-matrix/common.js"),c.mat2=a("./gl-matrix/mat2.js"),c.mat2d=a("./gl-matrix/mat2d.js"),c.mat3=a("./gl-matrix/mat3.js"),c.mat4=a("./gl-matrix/mat4.js"),c.quat=a("./gl-matrix/quat.js"),c.vec2=a("./gl-matrix/vec2.js"),c.vec3=a("./gl-matrix/vec3.js"),c.vec4=a("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":151,"./gl-matrix/mat2.js":152,"./gl-matrix/mat2d.js":153,"./gl-matrix/mat3.js":154,"./gl-matrix/mat4.js":155,"./gl-matrix/quat.js":156,"./gl-matrix/vec2.js":157,"./gl-matrix/vec3.js":158,"./gl-matrix/vec4.js":159}],151:[function(a,b,c){var d={};d.EPSILON=1e-6,d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,d.RANDOM=Math.random,d.ENABLE_SIMD=!1,d.SIMD_AVAILABLE=d.ARRAY_TYPE===Float32Array&&"SIMD"in this,d.USE_SIMD=d.ENABLE_SIMD&&d.SIMD_AVAILABLE,d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};var e=Math.PI/180;d.toRadian=function(a){return a*e},d.equals=function(a,b){return Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},b.exports=d},{}],152:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},b.exports=e},{"./common.js":151}],153:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.fromValues=function(a,b,c,e,f,g){var h=new d.ARRAY_TYPE(6);return h[0]=a,h[1]=b,h[2]=c,h[3]=e,h[4]=f,h[5]=g,h},e.set=function(a,b,c,d,e,f,g){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=b[0],k=b[1],l=b[2],m=b[3],n=b[4],o=b[5];return Math.abs(c-j)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(j))&&Math.abs(e-k)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(f-l)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(g-m)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(h-n)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(n))&&Math.abs(i-o)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))},b.exports=e},{"./common.js":151}],154:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromValues=function(a,b,c,e,f,g,h,i,j){var k=new d.ARRAY_TYPE(9);return k[0]=a,k[1]=b,k[2]=c,k[3]=e,k[4]=f,k[5]=g,k[6]=h,k[7]=i,k[8]=j,k},e.set=function(a,b,c,d,e,f,g,h,i,j){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},
e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5],s=a[6],t=b[7],u=b[8];return Math.abs(c-m)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(e-n)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(f-o)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(o))&&Math.abs(g-p)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(p))&&Math.abs(h-q)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(i-r)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(j-s)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(s))&&Math.abs(k-t)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(t))&&Math.abs(l-u)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(u))},b.exports=e},{"./common.js":151}],155:[function(a,b,c){var d=a("./common.js"),e={scalar:{},SIMD:{}};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.fromValues=function(a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=new d.ARRAY_TYPE(16);return r[0]=a,r[1]=b,r[2]=c,r[3]=e,r[4]=f,r[5]=g,r[6]=h,r[7]=i,r[8]=j,r[9]=k,r[10]=l,r[11]=m,r[12]=n,r[13]=o,r[14]=p,r[15]=q,r},e.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a[4]=f,a[5]=g,a[6]=h,a[7]=i,a[8]=j,a[9]=k,a[10]=l,a[11]=m,a[12]=n,a[13]=o,a[14]=p,a[15]=q,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.scalar.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.SIMD.transpose=function(a,b){var c,d,e,f,g,h,i,j,k,l;return c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12),g=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),i=SIMD.Float32x4.shuffle(g,h,0,2,4,6),j=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,0,i),SIMD.Float32x4.store(a,4,j),g=SIMD.Float32x4.shuffle(c,d,2,3,6,7),h=SIMD.Float32x4.shuffle(e,f,2,3,6,7),k=SIMD.Float32x4.shuffle(g,h,0,2,4,6),l=SIMD.Float32x4.shuffle(g,h,1,3,5,7),SIMD.Float32x4.store(a,8,k),SIMD.Float32x4.store(a,12,l),a},e.transpose=d.USE_SIMD?e.SIMD.transpose:e.scalar.transpose,e.scalar.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.SIMD.invert=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=SIMD.Float32x4.load(b,0),n=SIMD.Float32x4.load(b,4),o=SIMD.Float32x4.load(b,8),p=SIMD.Float32x4.load(b,12);return g=SIMD.Float32x4.shuffle(m,n,0,1,4,5),d=SIMD.Float32x4.shuffle(o,p,0,1,4,5),c=SIMD.Float32x4.shuffle(g,d,0,2,4,6),d=SIMD.Float32x4.shuffle(d,g,1,3,5,7),g=SIMD.Float32x4.shuffle(m,n,2,3,6,7),f=SIMD.Float32x4.shuffle(o,p,2,3,6,7),e=SIMD.Float32x4.shuffle(g,f,0,2,4,6),f=SIMD.Float32x4.shuffle(f,g,1,3,5,7),g=SIMD.Float32x4.mul(e,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.mul(d,g),i=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,g),h),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),g=SIMD.Float32x4.mul(d,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),h),k=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),g=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),h),j=SIMD.Float32x4.mul(c,g),g=SIMD.Float32x4.swizzle(g,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,g),j),j=SIMD.Float32x4.swizzle(j,2,3,0,1),g=SIMD.Float32x4.mul(c,d),g=SIMD.Float32x4.swizzle(g,1,0,3,2),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,g),k),g=SIMD.Float32x4.swizzle(g,2,3,0,1),j=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,g),j),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,g)),g=SIMD.Float32x4.mul(c,f),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,g)),j=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),j),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,g),i),j=SIMD.Float32x4.sub(j,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.mul(c,e),g=SIMD.Float32x4.swizzle(g,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,g),i),k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,g)),g=SIMD.Float32x4.swizzle(g,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(f,g)),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,g),k),l=SIMD.Float32x4.mul(c,h),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,2,3,0,1),l),l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,1,0,3,2),l),g=SIMD.Float32x4.reciprocalApproximation(l),l=SIMD.Float32x4.sub(SIMD.Float32x4.add(g,g),SIMD.Float32x4.mul(l,SIMD.Float32x4.mul(g,g))),(l=SIMD.Float32x4.swizzle(l,0,0,0,0))?(SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(l,h)),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(l,i)),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(l,j)),SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(l,k)),a):null},e.invert=d.USE_SIMD?e.SIMD.invert:e.scalar.invert,e.scalar.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.SIMD.adjoint=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,c=SIMD.Float32x4.load(b,0),d=SIMD.Float32x4.load(b,4),e=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12);return k=SIMD.Float32x4.shuffle(c,d,0,1,4,5),h=SIMD.Float32x4.shuffle(e,f,0,1,4,5),g=SIMD.Float32x4.shuffle(k,h,0,2,4,6),h=SIMD.Float32x4.shuffle(h,k,1,3,5,7),k=SIMD.Float32x4.shuffle(c,d,2,3,6,7),j=SIMD.Float32x4.shuffle(e,f,2,3,6,7),i=SIMD.Float32x4.shuffle(k,j,0,2,4,6),j=SIMD.Float32x4.shuffle(j,k,1,3,5,7),k=SIMD.Float32x4.mul(i,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.mul(h,k),m=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,k),l),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),k=SIMD.Float32x4.mul(h,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),l),o=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),k=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,3,0,1),j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),l),n=SIMD.Float32x4.mul(g,k),k=SIMD.Float32x4.swizzle(k,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,k),n),n=SIMD.Float32x4.swizzle(n,2,3,0,1),k=SIMD.Float32x4.mul(g,h),k=SIMD.Float32x4.swizzle(k,1,0,3,2),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,k),o),k=SIMD.Float32x4.swizzle(k,2,3,0,1),n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(j,k),n),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(i,k)),k=SIMD.Float32x4.mul(g,j),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(i,k)),n=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),n),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,k),m),n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.mul(g,i),k=SIMD.Float32x4.swizzle(k,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(j,k),m),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(h,k)),k=SIMD.Float32x4.swizzle(k,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(j,k)),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),o),SIMD.Float32x4.store(a,0,l),SIMD.Float32x4.store(a,4,m),SIMD.Float32x4.store(a,8,n),SIMD.Float32x4.store(a,12,o),a},e.adjoint=d.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint,e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.SIMD.multiply=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4.load(c,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),g))));SIMD.Float32x4.store(a,0,i);var j=SIMD.Float32x4.load(c,4),k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(j,3,3,3,3),g))));SIMD.Float32x4.store(a,4,k);var l=SIMD.Float32x4.load(c,8),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),g))));SIMD.Float32x4.store(a,8,m);var n=SIMD.Float32x4.load(c,12),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,0,0,0,0),d),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,2,2,2),f),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,3,3,3,3),g))));return SIMD.Float32x4.store(a,12,o),a},e.scalar.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.multiply=d.USE_SIMD?e.SIMD.multiply:e.scalar.multiply,e.mul=e.multiply,e.scalar.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.SIMD.translate=function(a,b,c){var d=SIMD.Float32x4.load(b,0),e=SIMD.Float32x4.load(b,4),f=SIMD.Float32x4.load(b,8),g=SIMD.Float32x4.load(b,12),h=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]),d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(h,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(h,1,1,1,1)),f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(h,2,2,2,2));var i=SIMD.Float32x4.add(d,SIMD.Float32x4.add(e,SIMD.Float32x4.add(f,g)));return SIMD.Float32x4.store(a,12,i),a},e.translate=d.USE_SIMD?e.SIMD.translate:e.scalar.translate,e.scalar.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.SIMD.scale=function(a,b,c){var d,e,f,g=SIMD.Float32x4(c[0],c[1],c[2],0);return d=SIMD.Float32x4.load(b,0),SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,0,0,0,0))),e=SIMD.Float32x4.load(b,4),SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(g,1,1,1,1))),f=SIMD.Float32x4.load(b,8),SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,2,2,2,2))),a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.scale=d.USE_SIMD?e.SIMD.scale:e.scalar.scale,e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.scalar.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.SIMD.rotateX=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateX=d.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX,e.scalar.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.SIMD.rotateY=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,8);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,d),SIMD.Float32x4.mul(g,e))),a},e.rotateY=d.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY,e.scalar.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.SIMD.rotateZ=function(a,b,c){var d=SIMD.Float32x4.splat(Math.sin(c)),e=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0),g=SIMD.Float32x4.load(b,4);return SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(g,d))),SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,e),SIMD.Float32x4.mul(f,d))),a},e.rotateZ=d.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ,e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a},e.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;return c>0?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d),a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+c[7],a[8]=b[8]+c[8],a[9]=b[9]+c[9],a[10]=b[10]+c[10],a[11]=b[11]+c[11],a[12]=b[12]+c[12],a[13]=b[13]+c[13],a[14]=b[14]+c[14],a[15]=b[15]+c[15],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a[4]=b[4]-c[4],a[5]=b[5]-c[5],a[6]=b[6]-c[6],a[7]=b[7]-c[7],a[8]=b[8]-c[8],a[9]=b[9]-c[9],a[10]=b[10]-c[10],a[11]=b[11]-c[11],a[12]=b[12]-c[12],a[13]=b[13]-c[13],a[14]=b[14]-c[14],a[15]=b[15]-c[15],a},e.sub=e.subtract,e.multiplyScalar=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12]*c,a[13]=b[13]*c,a[14]=b[14]*c,a[15]=b[15]*c,a},e.multiplyScalarAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a[4]=b[4]+c[4]*d,a[5]=b[5]+c[5]*d,a[6]=b[6]+c[6]*d,a[7]=b[7]+c[7]*d,a[8]=b[8]+c[8]*d,a[9]=b[9]+c[9]*d,a[10]=b[10]+c[10]*d,a[11]=b[11]+c[11]*d,a[12]=b[12]+c[12]*d,a[13]=b[13]+c[13]*d,a[14]=b[14]+c[14]*d,a[15]=b[15]+c[15]*d,a},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],x=b[4],y=b[5],z=b[6],A=b[7],B=b[8],C=b[9],D=b[10],E=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return Math.abs(c-t)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))&&Math.abs(e-u)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(f-v)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(g-w)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(h-x)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(i-y)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(j-z)<=d.EPSILON*Math.max(1,Math.abs(j),Math.abs(z))&&Math.abs(k-A)<=d.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(l-B)<=d.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(m-C)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(n-D)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-E)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(p-F)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(q-G)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(r-H)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(H))&&Math.abs(s-I)<=d.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))},b.exports=e},{"./common.js":151}],156:[function(a,b,c){var d=a("./common.js"),e=a("./mat3.js"),f=a("./vec3.js"),g=a("./vec4.js"),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return i<-.999999?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c*=.5;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);return 0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0),c},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,f<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},h.exactEquals=g.exactEquals,h.equals=g.equals,b.exports=h},{"./common.js":151,"./mat3.js":154,"./vec3.js":158,"./vec4.js":159}],157:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){
return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},e.equals=function(a,b){var c=a[0],e=a[1],f=b[0],g=b[1];return Math.abs(c-f)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(e-g)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(g))},b.exports=e},{"./common.js":151}],158:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2];return Math.abs(c-g)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(e-h)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(f-i)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(i))},b.exports=e},{"./common.js":151}],159:[function(a,b,c){var d=a("./common.js"),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a[2]=Math.ceil(b[2]),a[3]=Math.ceil(b[3]),a},e.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a[2]=Math.floor(b[2]),a[3]=Math.floor(b[3]),a},e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a[2]=Math.round(b[2]),a[3]=Math.round(b[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;h<i;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},e.equals=function(a,b){var c=a[0],e=a[1],f=a[2],g=a[3],h=b[0],i=b[1],j=b[2],k=b[3];return Math.abs(c-h)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(f-j)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(g-k)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))},b.exports=e},{"./common.js":151}],160:[function(a,b,c){"use strict";function d(a,b,c){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var f=new Int32Array(this.arrayBuffer);a=f[0],b=f[1],c=f[2],this.d=b+2*c;for(var g=0;g<this.d*this.d;g++){var h=f[e+g],i=f[e+g+1];d.push(h===i?null:f.subarray(h,i))}var j=f[e+d.length],k=f[e+d.length+1];this.keys=f.subarray(j,k),this.bboxes=f.subarray(k),this.insert=this._insertReadonly}else{this.d=b+2*c;for(var l=0;l<this.d*this.d;l++)d.push([]);this.keys=[],this.bboxes=[]}this.n=b,this.extent=a,this.padding=c,this.scale=b/a,this.uid=0;var m=c/b*a;this.min=-m,this.max=a+m}b.exports=d;var e=3;d.prototype.insert=function(a,b,c,d,e){this._forEachCell(b,c,d,e,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(b),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(e)},d.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},d.prototype._insertCell=function(a,b,c,d,e,f){this.cells[e].push(f)},d.prototype.query=function(a,b,c,d){var e=this.min,f=this.max;if(a<=e&&b<=e&&f<=c&&f<=d)return Array.prototype.slice.call(this.keys);var g=[],h={};return this._forEachCell(a,b,c,d,this._queryCell,g,h),g},d.prototype._queryCell=function(a,b,c,d,e,f,g){var h=this.cells[e];if(null!==h)for(var i=this.keys,j=this.bboxes,k=0;k<h.length;k++){var l=h[k];if(void 0===g[l]){var m=4*l;a<=j[m+2]&&b<=j[m+3]&&c>=j[m+0]&&d>=j[m+1]?(g[l]=!0,f.push(i[l])):g[l]=!1}}},d.prototype._forEachCell=function(a,b,c,d,e,f,g){for(var h=this._convertToCellCoord(a),i=this._convertToCellCoord(b),j=this._convertToCellCoord(c),k=this._convertToCellCoord(d),l=h;l<=j;l++)for(var m=i;m<=k;m++){var n=this.d*m+l;if(e.call(this,a,b,c,d,n,f,g))return}},d.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},d.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,b=e+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=this.cells[d].length;var f=new Int32Array(b+c+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var g=b,h=0;h<a.length;h++){var i=a[h];f[e+h]=g,f.set(i,g),g+=i.length}return f[e+a.length]=g,f.set(this.keys,g),g+=this.keys.length,f[e+a.length+1]=g,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer}},{}],161:[function(a,b,c){function d(a){return a>r?Math.pow(a,1/3):a/q+o}function e(a){return a>p?a*a*a:q*(a-o)}function f(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function g(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function h(a){var b=g(a[0]),c=g(a[1]),e=g(a[2]),f=d((.4124564*b+.3575761*c+.1804375*e)/l),h=d((.2126729*b+.7151522*c+.072175*e)/m),i=d((.0193339*b+.119192*c+.9503041*e)/n);return[116*h-16,500*(f-h),200*(h-i),a[3]]}function i(a){var b=(a[0]+16)/116,c=isNaN(a[1])?b:b+a[1]/500,d=isNaN(a[2])?b:b-a[2]/200;return b=m*e(b),c=l*e(c),d=n*e(d),[f(3.2404542*c-1.5371385*b-.4985314*d),f(-.969266*c+1.8760108*b+.041556*d),f(.0556434*c-.2040259*b+1.0572252*d),a[3]]}function j(a){var b=h(a),c=b[0],d=b[1],e=b[2],f=Math.atan2(e,d)*t;return[f<0?f+360:f,Math.sqrt(d*d+e*e),c,a[3]]}function k(a){var b=a[0]*s,c=a[1],d=a[2];return i([d,Math.cos(b)*c,Math.sin(b)*c,a[3]])}var l=.95047,m=1,n=1.08883,o=4/29,p=6/29,q=3*p*p,r=p*p*p,s=Math.PI/180,t=180/Math.PI;b.exports={lab:{forward:h,reverse:i},hcl:{forward:j,reverse:k}}},{}],162:[function(a,b,c){"use strict";function d(a){return a}function e(a,b){var c;if(m(a)){var j,k=a.stops&&"object"==typeof a.stops[0][0],l=k||void 0!==a.property,o=k||!l,p=a.type||b||"exponential";if("exponential"===p)j=h;else if("interval"===p)j=g;else if("categorical"===p)j=f;else{if("identity"!==p)throw new Error('Unknown function type "'+p+'"');j=i}var q;if(a.colorSpace&&"rgb"!==a.colorSpace){if(!n[a.colorSpace])throw new Error("Unknown color space: "+a.colorSpace);var r=n[a.colorSpace];a=JSON.parse(JSON.stringify(a));for(var s=0;s<a.stops.length;s++)a.stops[s]=[a.stops[s][0],r.forward(a.stops[s][1])];q=r.reverse}else q=d;if(k){var t={},u=[];for(s=0;s<a.stops.length;s++){var v=a.stops[s];void 0===t[v[0].zoom]&&(t[v[0].zoom]={zoom:v[0].zoom,type:a.type,property:a.property,stops:[]}),t[v[0].zoom].stops.push([v[0].value,v[1]])}for(var w in t)u.push([t[w].zoom,e(t[w])]);c=function(b,c){return q(h({stops:u,base:a.base},b)(b,c))},c.isFeatureConstant=!1,c.isZoomConstant=!1}else o?(c=function(b){return q(j(a,b))},c.isFeatureConstant=!0,c.isZoomConstant=!1):(c=function(b,c){return q(j(a,c[a.property]))},c.isFeatureConstant=!1,c.isZoomConstant=!0)}else c=function(){return a},c.isFeatureConstant=!0,c.isZoomConstant=!0;return c}function f(a,b){for(var c=0;c<a.stops.length;c++)if(b===a.stops[c][0])return a.stops[c][1];return a.stops[0][1]}function g(a,b){for(var c=0;c<a.stops.length&&!(b<a.stops[c][0]);c++);return a.stops[Math.max(c-1,0)][1]}function h(a,b){for(var c=void 0!==a.base?a.base:1,d=0;!(d>=a.stops.length||b<=a.stops[d][0]);)d++;return 0===d?a.stops[d][1]:d===a.stops.length?a.stops[d-1][1]:j(b,c,a.stops[d-1][0],a.stops[d][0],a.stops[d-1][1],a.stops[d][1])}function i(a,b){return b}function j(a,b,c,d,e,f){return"function"==typeof e?function(){var g=e.apply(void 0,arguments),h=f.apply(void 0,arguments);return j(a,b,c,d,g,h)}:e.length?l(a,b,c,d,e,f):k(a,b,c,d,e,f)}function k(a,b,c,d,e,f){var g,h=d-c,i=a-c;return g=1===b?i/h:(Math.pow(b,i)-1)/(Math.pow(b,h)-1),e*(1-g)+f*g}function l(a,b,c,d,e,f){for(var g=[],h=0;h<e.length;h++)g[h]=k(a,b,c,d,e[h],f[h]);return g}function m(a){return"object"==typeof a&&(a.stops||"identity"===a.type)}var n=a("./color_spaces");b.exports.isFunctionDefinition=m,b.exports.interpolated=function(a){return e(a,"exponential")},b.exports["piecewise-constant"]=function(a){return e(a,"interval")}},{"./color_spaces":161}],163:[function(a,b,c){a("path"),b.exports={circle:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    float t = smoothstep(1.0 - max(blur, v_antialiasblur), 1.0, length(v_extrude));\n    gl_FragColor = color * (1.0 - t) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\nuniform float u_devicepixelratio;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / u_devicepixelratio / radius;\n}\n"},collisionBox:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    \n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the correct offset needs to be calculated.\n    //\n    // The offset depends on how many pixels are between the world origin and\n    // the edge of the tile:\n    // vec2 offset = mod(pixel_coord, size)\n    //\n    // At high zoom levels there are a ton of pixels between the world origin\n    // and the edge of the tile. The glsl spec only guarantees 16 bits of\n    // precision for highp floats. We need more than that.\n    //\n    // The pixel_coord is passed in as two 16 bit values:\n    // pixel_coord_upper = floor(pixel_coord / 2^16)\n    // pixel_coord_lower = mod(pixel_coord, 2^16)\n    //\n    // The offset is calculated in a series of steps that should preserve this precision:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n    v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n}\n"},fillExtrude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nvarying vec4 v_color;\n#ifdef MAPBOX_GL_JS\n#pragma mapbox: define lowp float minH\n#pragma mapbox: define lowp float maxH\n#endif\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n#ifdef MAPBOX_GL_JS\n    #pragma mapbox: initialize lowp float minH\n    #pragma mapbox: initialize lowp float maxH\n#endif\n    #pragma mapbox: initialize lowp vec4 color\n\n    gl_FragColor = v_color;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform lowp vec4 u_outline_color;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#ifndef MAPBOX_GL_JS\nattribute float minH;\nattribute float maxH;\n#else\n#pragma mapbox: define lowp float minH\n#pragma mapbox: define lowp float maxH\n#endif\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n#ifdef MAPBOX_GL_JS\n    #pragma mapbox: initialize lowp float minH\n    #pragma mapbox: initialize lowp float maxH\n#endif\n    #pragma mapbox: initialize lowp vec4 color\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? maxH : minH, 1);\n\n#ifdef OUTLINE\n    color = u_outline_color;\n#endif\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + minH) * pow(maxH / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"
},fillExtrudePattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#ifdef MAPBOX_GL_JS\n#pragma mapbox: define lowp float minH\n#pragma mapbox: define lowp float maxH\n#endif\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n#ifdef MAPBOX_GL_JS\n    #pragma mapbox: initialize lowp float minH\n    #pragma mapbox: initialize lowp float maxH\n#endif\n    #pragma mapbox: initialize lowp vec4 color\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#ifndef MAPBOX_GL_JS\nattribute float minH;\nattribute float maxH;\n#else\n#pragma mapbox: define lowp float minH\n#pragma mapbox: define lowp float maxH\n#endif\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n#ifdef MAPBOX_GL_JS\n    #pragma mapbox: initialize lowp float minH\n    #pragma mapbox: initialize lowp float maxH\n#endif\n    #pragma mapbox: initialize lowp vec4 color\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? maxH : minH;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 scaled_size_a = u_scale_a * u_pattern_size_a;\n    vec2 scaled_size_b = u_scale_b * u_pattern_size_b;\n\n    // the following offset calculation is duplicated from the regular pattern shader:\n    vec2 offset_a = mod(mod(mod(u_pixel_coord_upper, scaled_size_a) * 256.0, scaled_size_a) * 256.0 + u_pixel_coord_lower, scaled_size_a);\n    vec2 offset_b = mod(mod(mod(u_pixel_coord_upper, scaled_size_b) * 256.0, scaled_size_b) * 256.0 + u_pixel_coord_lower, scaled_size_b);\n\n    if (a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0) {\n        // extrusion top\n        v_pos_a = (u_tile_units_to_pixels * a_pos + offset_a) / scaled_size_a;\n        v_pos_b = (u_tile_units_to_pixels * a_pos + offset_b) / scaled_size_b;\n    } else {\n        // extrusion side\n        float hf = z * u_height_factor;\n\n        v_pos_a = (u_tile_units_to_pixels * vec2(a_edgedistance, hf) + offset_a) / scaled_size_a;\n        v_pos_b = (u_tile_units_to_pixels * vec2(a_edgedistance, hf) + offset_b) / scaled_size_b;\n    }\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + minH) * pow(maxH / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},fillExtrudeTexture:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform float u_opacity;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_texture, v_pos) * u_opacity;\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform int u_xdim;\nuniform int u_ydim;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos.x = a_pos.x / float(u_xdim);\n    v_pos.y = 1.0 - a_pos.y / float(u_ydim);\n}\n"},line:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp float u_opacity;\nuniform float u_blur;\n\n#pragma mapbox: define lowp vec4 color\n\nvarying vec2 v_linewidth;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\nuniform mediump float u_blur;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},linePattern:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_blur;\n\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_linewidth.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    alpha *= u_opacity;\n\n    gl_FragColor = color * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform mediump float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n    v_linesofar = a_linesofar;\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},lineSDF:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform lowp float u_opacity;\n\nuniform float u_blur;\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_linewidth.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_linewidth.t) or when fading out\n    // (v_linewidth.s)\n    float blur = u_blur * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_linewidth.t - blur), v_linewidth.s - dist) / blur, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_linewidth;\nuniform mediump float u_gapwidth;\nuniform mediump float u_antialiasing;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform float u_extra;\nuniform mat2 u_antialiasingmatrix;\nuniform mediump float u_offset;\n\nvarying vec2 v_normal;\nvarying vec2 v_linewidth;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    float inset = u_gapwidth + (u_gapwidth > 0.0 ? u_antialiasing : 0.0);\n    float outset = u_gapwidth + u_linewidth * (u_gapwidth > 0.0 ? 2.0 : 1.0) + u_antialiasing;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset = u_offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit of the position before scaling it with the\n    // model/view matrix.\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5) + (offset + dist) / u_ratio, 0.0, 1.0);\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    // position of y on the screen\n    float y = gl_Position.y / gl_Position.w;\n\n    // how much features are squished in the y direction by the tilt\n    float squish_scale = length(a_extrude) / length(u_antialiasingmatrix * a_extrude);\n\n    // how much features are squished in all directions by the perspectiveness\n    float perspective_scale = 1.0 / (1.0 - min(y * u_extra, 0.9));\n\n    v_linewidth = vec2(outset, inset);\n    v_gamma_scale = perspective_scale * squish_scale;\n}\n"},raster:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform float u_opacity0;\nuniform float u_opacity1;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = color0 * u_opacity0 + color1 * u_opacity1;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb), color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},symbolSDF:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n#define lowp\n#define mediump\n#define highp\n#endif\n\nconst float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = (gl_Position.w - 0.5);\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}},b.exports.util="float evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n"},{path:125}],164:[function(a,b,c){"use strict";function d(a,b){this.message=(a?a+": ":"")+e.apply(e,Array.prototype.slice.call(arguments,2)),null!==b&&void 0!==b&&b.__line__&&(this.line=b.__line__)}var e=a("util").format;b.exports=d},{util:135}],165:[function(a,b,c){"use strict";b.exports=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}},{}],166:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}},{}],167:[function(a,b,c){"use strict";b.exports=function(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}},{}],168:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("../util/extend");b.exports=function(b){var c=a("./validate_function"),g=a("./validate_object"),h={"*":function(){return[]},array:a("./validate_array"),boolean:a("./validate_boolean"),number:a("./validate_number"),color:a("./validate_color"),constants:a("./validate_constants"),enum:a("./validate_enum"),filter:a("./validate_filter"),function:a("./validate_function"),layer:a("./validate_layer"),object:a("./validate_object"),source:a("./validate_source"),string:a("./validate_string")},i=b.value,j=b.valueSpec,k=b.key,l=b.styleSpec,m=b.style;if("string"===e(i)&&"@"===i[0]){if(l.$version>7)return[new d(k,i,"constants have been deprecated as of v8")];if(!(i in m.constants))return[new d(k,i,'constant "%s" not found',i)];b=f({},b,{value:m.constants[i]})}return j.function&&"object"===e(i)?c(b):j.type&&h[j.type]?h[j.type](b):g(f({},b,{valueSpec:j.type?l[j.type]:j}))}},{"../error/validation_error":164,"../util/extend":165,"../util/get_type":166,"./validate_array":169,"./validate_boolean":170,"./validate_color":171,"./validate_constants":172,"./validate_enum":173,"./validate_filter":174,"./validate_function":175,"./validate_layer":177,"./validate_number":180,"./validate_object":181,"./validate_source":183,"./validate_string":184}],169:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("./validate"),f=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.valueSpec,g=a.style,h=a.styleSpec,i=a.key,j=a.arrayElementValidator||e;if("array"!==d(b))return[new f(i,b,"array expected, %s found",d(b))];if(c.length&&b.length!==c.length)return[new f(i,b,"array length %d expected, length %d found",c.length,b.length)];if(c["min-length"]&&b.length<c["min-length"])return[new f(i,b,"array length at least %d expected, length %d found",c["min-length"],b.length)];var k={type:c.value};h.$version<7&&(k.function=c.function),"object"===d(c.value)&&(k=c.value);for(var l=[],m=0;m<b.length;m++)l=l.concat(j({array:b,arrayIndex:m,value:b[m],valueSpec:k,style:g,styleSpec:h,key:i+"["+m+"]"}));return l}},{"../error/validation_error":164,"../util/get_type":166,"./validate":168}],170:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"boolean"!==f?[new e(c,b,"boolean expected, %s found",f)]:[]}},{"../error/validation_error":164,"../util/get_type":166}],171:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("csscolorparser").parseCSSColor;b.exports=function(a){var b=a.key,c=a.value,g=e(c);return"string"!==g?[new d(b,c,"color expected, %s found",g)]:null===f(c)?[new d(b,c,'color expected, "%s" found',c)]:[]}},{"../error/validation_error":164,"../util/get_type":166,csscolorparser:136}],172:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type");b.exports=function(a){var b=a.key,c=a.value,f=a.styleSpec;if(f.$version>7)return c?[new d(b,c,"constants have been deprecated as of v8")]:[];var g=e(c);if("object"!==g)return[new d(b,c,"object expected, %s found",g)];var h=[];for(var i in c)"@"!==i[0]&&h.push(new d(b+"."+i,c[i],'constants must start with "@"'));return h}},{"../error/validation_error":164,"../util/get_type":166}],173:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(e(c))===-1&&g.push(new d(b,c,"expected one of [%s], %s found",f.values.join(", "),c)):Object.keys(f.values).indexOf(e(c))===-1&&g.push(new d(b,c,"expected one of [%s], %s found",Object.keys(f.values).join(", "),c)),g}},{"../error/validation_error":164,"../util/unbundle_jsonlint":167}],174:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_enum"),f=a("../util/get_type"),g=a("../util/unbundle_jsonlint");b.exports=function a(b){var c,h=b.value,i=b.key,j=b.styleSpec,k=[];if("array"!==f(h))return[new d(i,h,"array expected, %s found",f(h))];if(h.length<1)return[new d(i,h,"filter array must have at least 1 element")];switch(k=k.concat(e({key:i+"[0]",value:h[0],valueSpec:j.filter_operator,style:b.style,styleSpec:b.styleSpec})),g(h[0])){case"<":case"<=":case">":case">=":h.length>=2&&"$type"==h[1]&&k.push(new d(i,h,'"$type" cannot be use with operator "%s"',h[0]));case"==":case"!=":3!=h.length&&k.push(new d(i,h,'filter array for operator "%s" must have 3 elements',h[0]));
case"in":case"!in":h.length>=2&&(c=f(h[1]),"string"!==c?k.push(new d(i+"[1]",h[1],"string expected, %s found",c)):"@"===h[1][0]&&k.push(new d(i+"[1]",h[1],"filter key cannot be a constant")));for(var l=2;l<h.length;l++)c=f(h[l]),"$type"==h[1]?k=k.concat(e({key:i+"["+l+"]",value:h[l],valueSpec:j.geometry_type,style:b.style,styleSpec:b.styleSpec})):"string"===c&&"@"===h[l][0]?k.push(new d(i+"["+l+"]",h[l],"filter value cannot be a constant")):"string"!==c&&"number"!==c&&"boolean"!==c&&k.push(new d(i+"["+l+"]",h[l],"string, number, or boolean expected, %s found",c));break;case"any":case"all":case"none":for(l=1;l<h.length;l++)k=k.concat(a({key:i+"["+l+"]",value:h[l],style:b.style,styleSpec:b.styleSpec}));break;case"has":case"!has":c=f(h[1]),2!==h.length?k.push(new d(i,h,'filter array for "%s" operator must have 2 elements',h[0])):"string"!==c?k.push(new d(i+"[1]",h[1],"string expected, %s found",c)):"@"===h[1][0]&&k.push(new d(i+"[1]",h[1],"filter key cannot be a constant"))}return k}},{"../error/validation_error":164,"../util/get_type":166,"../util/unbundle_jsonlint":167,"./validate_enum":173}],175:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate"),g=a("./validate_object"),h=a("./validate_array"),i=a("./validate_number"),j=a("../util/unbundle_jsonlint");b.exports=function(a){function b(a){if("identity"===j(n.type))return[new d(a.key,a.value,'identity function may not have a "stops" property')];var b=[],f=a.value;return b=b.concat(h({key:a.key,value:f,valueSpec:a.valueSpec,style:a.style,styleSpec:a.styleSpec,arrayElementValidator:c})),"array"===e(f)&&0===f.length&&b.push(new d(a.key,f,"array must have at least one stop")),b}function c(a){var b=[],c=a.value,h=a.key;if("array"!==e(c))return[new d(h,c,"array expected, %s found",e(c))];if(2!==c.length)return[new d(h,c,"array length %d expected, length %d found",2,c.length)];var j=e(c[0]);if(l||(l=j),j!==l)return[new d(h,c,"%s stop key type must match previous stop key type %s",j,l)];if("object"===j){if(void 0===c[0].zoom)return[new d(h,c,"object stop key must have zoom")];if(void 0===c[0].value)return[new d(h,c,"object stop key must have value")];b=b.concat(g({key:h+"[0]",value:c[0],valueSpec:{zoom:{}},style:a.style,styleSpec:a.styleSpec,objectElementValidators:{zoom:i,value:k}}))}else b=b.concat((p?i:k)({key:h+"[0]",value:c[0],valueSpec:{},style:a.style,styleSpec:a.styleSpec}));return b=b.concat(f({key:h+"[1]",value:c[1],valueSpec:m,style:a.style,styleSpec:a.styleSpec})),"number"===e(c[0])&&("piecewise-constant"===m.function&&c[0]%1!==0&&b.push(new d(h+"[0]",c[0],"zoom level for piecewise-constant functions must be an integer")),0!==a.arrayIndex&&c[0]<a.array[a.arrayIndex-1][0]&&b.push(new d(h+"[0]",c[0],"array stops must appear in ascending order"))),b}function k(a){var b=[],c=e(a.value);return"number"!==c&&"string"!==c&&"array"!==c&&b.push(new d(a.key,a.value,"property value must be a number, string or array")),b}var l,m=a.valueSpec,n=a.value,o=void 0!==a.value.property||"object"===l,p=void 0===a.value.property||"object"===l,q=g({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:b}});return"identity"===j(a.value.type)||a.value.stops||q.push(new d(a.key,a.value,'missing required property "stops"')),a.styleSpec.$version>=8&&(o&&!a.valueSpec["property-function"]?q.push(new d(a.key,a.value,"property functions not supported")):p&&!a.valueSpec["zoom-function"]&&q.push(new d(a.key,a.value,"zoom functions not supported"))),q}},{"../error/validation_error":164,"../util/get_type":166,"../util/unbundle_jsonlint":167,"./validate":168,"./validate_array":169,"./validate_number":180,"./validate_object":181}],176:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("./validate_string");b.exports=function(a){var b=a.value,c=a.key,f=e(a);return f.length?f:(b.indexOf("{fontstack}")===-1&&f.push(new d(c,b,'"glyphs" url must include a "{fontstack}" token')),b.indexOf("{range}")===-1&&f.push(new d(c,b,'"glyphs" url must include a "{range}" token')),f)}},{"../error/validation_error":164,"./validate_string":184}],177:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_filter"),h=a("./validate_paint_property"),i=a("./validate_layout_property"),j=a("../util/extend");b.exports=function(a){var b=[],c=a.value,k=a.key,l=a.style,m=a.styleSpec;c.type||c.ref||b.push(new d(k,c,'either "type" or "ref" is required'));var n=e(c.type),o=e(c.ref);if(c.id)for(var p=0;p<a.arrayIndex;p++){var q=l.layers[p];e(q.id)===e(c.id)&&b.push(new d(k,c.id,'duplicate layer id "%s", previously used at line %d',c.id,q.id.__line__))}if("ref"in c){["type","source","source-layer","filter","layout"].forEach(function(a){a in c&&b.push(new d(k,c[a],'"%s" is prohibited for ref layers',a))});var r;l.layers.forEach(function(a){a.id==o&&(r=a)}),r?r.ref?b.push(new d(k,c.ref,"ref cannot reference another ref layer")):n=e(r.type):b.push(new d(k,c.ref,'ref layer "%s" not found',o))}else if("background"!==n)if(c.source){var s=l.sources&&l.sources[c.source];s?"vector"==s.type&&"raster"==n?b.push(new d(k,c.source,'layer "%s" requires a raster source',c.id)):"raster"==s.type&&"raster"!=n?b.push(new d(k,c.source,'layer "%s" requires a vector source',c.id)):"vector"!=s.type||c["source-layer"]||b.push(new d(k,c,'layer "%s" must specify a "source-layer"',c.id)):b.push(new d(k,c.source,'source "%s" not found',c.source))}else b.push(new d(k,c,'missing required property "source"'));return b=b.concat(f({key:k,value:c,valueSpec:m.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{filter:g,layout:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return i(j({layerType:n},a))}}})},paint:function(a){return f({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return h(j({layerType:n},a))}}})}}}))}},{"../error/validation_error":164,"../util/extend":165,"../util/unbundle_jsonlint":167,"./validate_filter":174,"./validate_layout_property":178,"./validate_object":181,"./validate_paint_property":182}],178:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["layout_"+a.layerType];if(!i)return[];if(a.valueSpec||i[h]){var j=[];return"symbol"===a.layerType&&("icon-image"===h&&c&&!c.sprite?j.push(new e(b,g,'use of "icon-image" requires a style "sprite" property')):"text-field"===h&&c&&!c.glyphs&&j.push(new e(b,g,'use of "text-field" requires a style "glyphs" property'))),j.concat(d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}))}return[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":164,"./validate":168}],179:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate"),g={enum:a("./validate_enum"),color:a("./validate_color"),array:a("./validate_array"),number:a("./validate_number"),function:a("./validate_function")};b.exports=function(a){var b,c=a.value,h=a.styleSpec,i=h.$root.light,j=a.style,k=[];for(var l in c){var m=l.match(/^(.*)-transition$/);if(m&&i[m[1]]&&i[m[1]].transition){var n=m[1];b=i[n].type,k=k.concat(f({key:l,value:c[l],valueSpec:h.transition,style:j,styleSpec:h}))}else i[l]?(b=i[l].type,i[l].function&&"object"===e(c[l])&&(b="function"),k=k.concat(g[b]({key:l,value:c[l],valueSpec:i[l],style:j,styleSpec:h}))):k=k.concat([new d(l,c[l],'unknown property "%s"',l)])}return k}},{"../error/validation_error":164,"../util/get_type":166,"./validate":168,"./validate_array":169,"./validate_color":171,"./validate_enum":173,"./validate_function":175,"./validate_number":180}],180:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.value,f=a.valueSpec,g=d(c);return"number"!==g?[new e(b,c,"number expected, %s found",g)]:"minimum"in f&&c<f.minimum?[new e(b,c,"%s is less than the minimum value %s",c,f.minimum)]:"maximum"in f&&c>f.maximum?[new e(b,c,"%s is greater than the maximum value %s",c,f.maximum)]:[]}},{"../error/validation_error":164,"../util/get_type":166}],181:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/get_type"),f=a("./validate");b.exports=function(a){var b=a.key,c=a.value,g=a.valueSpec,h=a.objectElementValidators||{},i=a.style,j=a.styleSpec,k=[],l=e(c);if("object"!==l)return[new d(b,c,"object expected, %s found",l)];for(var m in c){var n=m.split(".")[0],o=g&&(g[n]||g["*"]),p=h[n]||h["*"];o||p?k=k.concat((p||f)({key:(b?b+".":b)+m,value:c[m],valueSpec:o,style:i,styleSpec:j,object:c,objectKey:m})):""!==b&&1!==b.split(".").length&&k.push(new d(b,c[m],'unknown property "%s"',m))}for(n in g)g[n].required&&void 0===g[n].default&&void 0===c[n]&&k.push(new d(b,c,'missing required property "%s"',n));return k}},{"../error/validation_error":164,"../util/get_type":166,"./validate":168}],182:[function(a,b,c){"use strict";var d=a("./validate"),e=a("../error/validation_error");b.exports=function(a){var b=a.key,c=a.style,f=a.styleSpec,g=a.value,h=a.objectKey,i=f["paint_"+a.layerType];if(!i)return[];var j=h.match(/^(.*)-transition$/);return j&&i[j[1]]&&i[j[1]].transition?d({key:b,value:g,valueSpec:f.transition,style:c,styleSpec:f}):a.valueSpec||i[h]?d({key:a.key,value:g,valueSpec:a.valueSpec||i[h],style:c,styleSpec:f}):[new e(b,g,'unknown property "%s"',h)]}},{"../error/validation_error":164,"./validate":168}],183:[function(a,b,c){"use strict";var d=a("../error/validation_error"),e=a("../util/unbundle_jsonlint"),f=a("./validate_object"),g=a("./validate_enum");b.exports=function(a){var b=a.value,c=a.key,h=a.styleSpec,i=a.style;if(!b.type)return[new d(c,b,'"type" is required')];var j=e(b.type);switch(j){case"vector":case"raster":var k=[];if(k=k.concat(f({key:c,value:b,valueSpec:h.source_tile,style:a.style,styleSpec:h})),"url"in b)for(var l in b)["type","url","tileSize"].indexOf(l)<0&&k.push(new d(c+"."+l,b[l],'a source with a "url" property may not include a "%s" property',l));return k;case"geojson":return f({key:c,value:b,valueSpec:h.source_geojson,style:i,styleSpec:h});case"video":return f({key:c,value:b,valueSpec:h.source_video,style:i,styleSpec:h});case"image":return f({key:c,value:b,valueSpec:h.source_image,style:i,styleSpec:h});default:return g({key:c+".type",value:b.type,valueSpec:{values:["vector","raster","geojson","video","image"]},style:i,styleSpec:h})}}},{"../error/validation_error":164,"../util/unbundle_jsonlint":167,"./validate_enum":173,"./validate_object":181}],184:[function(a,b,c){"use strict";var d=a("../util/get_type"),e=a("../error/validation_error");b.exports=function(a){var b=a.value,c=a.key,f=d(b);return"string"!==f?[new e(c,b,"string expected, %s found",f)]:[]}},{"../error/validation_error":164,"../util/get_type":166}],185:[function(a,b,c){"use strict";function d(a,b){b=b||i;var c=[];return c=c.concat(h({key:"",value:a,valueSpec:b.$root,styleSpec:b,style:a,objectElementValidators:{glyphs:j}})),b.$version>7&&a.constants&&(c=c.concat(g({key:"constants",value:a.constants,style:a,styleSpec:b}))),e(c)}function e(a){return[].concat(a).sort(function(a,b){return a.line-b.line})}function f(a){return function(){return e(a.apply(this,arguments))}}var g=a("./validate/validate_constants"),h=a("./validate/validate"),i=a("../reference/latest.min"),j=a("./validate/validate_glyphs_url");d.source=f(a("./validate/validate_source")),d.light=f(a("./validate/validate_light")),d.layer=f(a("./validate/validate_layer")),d.filter=f(a("./validate/validate_filter")),d.paintProperty=f(a("./validate/validate_paint_property")),d.layoutProperty=f(a("./validate/validate_layout_property")),b.exports=d},{"../reference/latest.min":186,"./validate/validate":168,"./validate/validate_constants":172,"./validate/validate_filter":174,"./validate/validate_glyphs_url":176,"./validate/validate_layer":177,"./validate/validate_layout_property":178,"./validate/validate_light":179,"./validate/validate_paint_property":182,"./validate/validate_source":183}],186:[function(a,b,c){b.exports=a("./v8.min.json")},{"./v8.min.json":187}],187:[function(a,b,c){b.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},raster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:22},maxzoom:{type:"number",minimum:0,maximum:22},interactive:{type:"boolean",default:!1},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,"property-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!1,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},paint:["paint_fill","paint_line","paint_circle","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0},"fill-extrude-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,transition:!0},"fill-extrude-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,transition:!0,requires:[{"<=":"fill-extrude-height"}]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,"property-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{}},default:"map"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],188:[function(a,b,c){"use strict";function d(a){return!!(e()&&f()&&g()&&h()&&i()&&j()&&k()&&l(a&&a.failIfMajorPerformanceCaveat))}function e(){return"undefined"!=typeof window&&"undefined"!=typeof document}function f(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function g(){return Function.prototype&&Function.prototype.bind}function h(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function i(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function j(){return"Worker"in window}function k(){return"Uint8ClampedArray"in window}function l(a){return void 0===n[a]&&(n[a]=m(a)),n[a]}function m(a){var b=document.createElement("canvas"),c=Object.create(d.webGLContextAttributes);return c.failIfMajorPerformanceCaveat=a,b.probablySupportsContext?b.probablySupportsContext("webgl",c)||b.probablySupportsContext("experimental-webgl",c):b.supportsContext?b.supportsContext("webgl",c)||b.supportsContext("experimental-webgl",c):b.getContext("webgl",c)||b.getContext("experimental-webgl",c)}"undefined"!=typeof b&&b.exports?b.exports=d:window&&(window.mapboxgl=window.mapboxgl||{},
window.mapboxgl.supported=d);var n={};d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],189:[function(a,b,c){"use strict";function d(a){var b;a&&a.length&&(b=a,a=b.length);var c=new Uint8Array(a||0);return b&&c.set(b),c.readUInt32LE=f.readUInt32LE,c.writeUInt32LE=f.writeUInt32LE,c.readInt32LE=f.readInt32LE,c.writeInt32LE=f.writeInt32LE,c.readFloatLE=f.readFloatLE,c.writeFloatLE=f.writeFloatLE,c.readDoubleLE=f.readDoubleLE,c.writeDoubleLE=f.writeDoubleLE,c.toString=f.toString,c.write=f.write,c.slice=f.slice,c.copy=f.copy,c._isBuffer=!0,c}function e(a){for(var b,c,d=a.length,e=[],f=0;f<d;f++){if(b=a.charCodeAt(f),b>55295&&b<57344){if(!c){b>56319||f+1===d?e.push(239,191,189):c=b;continue}if(b<56320){e.push(239,191,189),c=b;continue}b=c-55296<<10|b-56320|65536,c=null}else c&&(e.push(239,191,189),c=null);b<128?e.push(b):b<2048?e.push(b>>6|192,63&b|128):b<65536?e.push(b>>12|224,b>>6&63|128,63&b|128):e.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}return e}b.exports=d;var f,g,h,i=a("ieee754");f={readUInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},writeUInt32LE:function(a,b){this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24},readInt32LE:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},readFloatLE:function(a){return i.read(this,a,!0,23,4)},readDoubleLE:function(a){return i.read(this,a,!0,52,8)},writeFloatLE:function(a,b){return i.write(this,a,b,!0,23,4)},writeDoubleLE:function(a,b){return i.write(this,a,b,!0,52,8)},toString:function(a,b,c){var d="",e="";b=b||0,c=Math.min(this.length,c||this.length);for(var f=b;f<c;f++){var g=this[f];g<=127?(d+=decodeURIComponent(e)+String.fromCharCode(g),e=""):e+="%"+g.toString(16)}return d+=decodeURIComponent(e)},write:function(a,b){for(var c=a===g?h:e(a),d=0;d<c.length;d++)this[b+d]=c[d]},slice:function(a,b){return this.subarray(a,b)},copy:function(a,b){b=b||0;for(var c=0;c<this.length;c++)a[b+c]=this[c]}},f.writeInt32LE=f.writeUInt32LE,d.byteLength=function(a){return g=a,h=e(a),h.length},d.isBuffer=function(a){return!(!a||!a._isBuffer)}},{ieee754:191}],190:[function(a,b,c){(function(c){"use strict";function d(a){this.buf=q.isBuffer(a)?a:new q(a||0),this.pos=0,this.length=this.buf.length}function e(a,b){var c,d=b.buf;if(c=d[b.pos++],a+=268435456*(127&c),c<128)return a;if(c=d[b.pos++],a+=34359738368*(127&c),c<128)return a;if(c=d[b.pos++],a+=4398046511104*(127&c),c<128)return a;if(c=d[b.pos++],a+=562949953421312*(127&c),c<128)return a;if(c=d[b.pos++],a+=72057594037927940*(127&c),c<128)return a;if(c=d[b.pos++],a+=0x8000000000000000*(127&c),c<128)return a;throw new Error("Expected varint not more than 10 bytes")}function f(a,b){b.realloc(10);for(var c=b.pos+10;a>=1;){if(b.pos>=c)throw new Error("Given varint doesn't fit into 10 bytes");var d=255&a;b.buf[b.pos++]=d|(a>=128?128:0),a/=128}}function g(a,b,c){var d=b<=16383?1:b<=2097151?2:b<=268435455?3:Math.ceil(Math.log(b)/(7*Math.LN2));c.realloc(d);for(var e=c.pos-1;e>=a;e--)c.buf[e+d]=c.buf[e]}function h(a,b){for(var c=0;c<a.length;c++)b.writeVarint(a[c])}function i(a,b){for(var c=0;c<a.length;c++)b.writeSVarint(a[c])}function j(a,b){for(var c=0;c<a.length;c++)b.writeFloat(a[c])}function k(a,b){for(var c=0;c<a.length;c++)b.writeDouble(a[c])}function l(a,b){for(var c=0;c<a.length;c++)b.writeBoolean(a[c])}function m(a,b){for(var c=0;c<a.length;c++)b.writeFixed32(a[c])}function n(a,b){for(var c=0;c<a.length;c++)b.writeSFixed32(a[c])}function o(a,b){for(var c=0;c<a.length;c++)b.writeFixed64(a[c])}function p(a,b){for(var c=0;c<a.length;c++)b.writeSFixed64(a[c])}b.exports=d;var q=c.Buffer||a("./buffer");d.Varint=0,d.Fixed64=1,d.Bytes=2,d.Fixed32=5;var r=4294967296,s=1/r,t=Math.pow(2,63);d.prototype={destroy:function(){this.buf=null},readFields:function(a,b,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),e=d>>3,f=this.pos;a(e,b,this),this.pos===f&&this.skip(d)}return b},readMessage:function(a,b){return this.readFields(a,b,this.readVarint()+this.pos)},readFixed32:function(){var a=this.buf.readUInt32LE(this.pos);return this.pos+=4,a},readSFixed32:function(){var a=this.buf.readInt32LE(this.pos);return this.pos+=4,a},readFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*r;return this.pos+=8,a},readSFixed64:function(){var a=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*r;return this.pos+=8,a},readFloat:function(){var a=this.buf.readFloatLE(this.pos);return this.pos+=4,a},readDouble:function(){var a=this.buf.readDoubleLE(this.pos);return this.pos+=8,a},readVarint:function(){var a,b,c=this.buf;return b=c[this.pos++],a=127&b,b<128?a:(b=c[this.pos++],a|=(127&b)<<7,b<128?a:(b=c[this.pos++],a|=(127&b)<<14,b<128?a:(b=c[this.pos++],a|=(127&b)<<21,b<128?a:e(a,this))))},readVarint64:function(){var a=this.pos,b=this.readVarint();if(b<t)return b;for(var c=this.pos-2;255===this.buf[c];)c--;c<a&&(c=a),b=0;for(var d=0;d<c-a+1;d++){var e=127&~this.buf[a+d];b+=d<4?e<<7*d:e*Math.pow(2,7*d)}return-b-1},readSVarint:function(){var a=this.readVarint();return a%2===1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,b=this.buf.toString("utf8",this.pos,a);return this.pos=a,b},readBytes:function(){var a=this.readVarint()+this.pos,b=this.buf.slice(this.pos,a);return this.pos=a,b},readPackedVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readVarint());return b},readPackedSVarint:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFloat());return b},readPackedDouble:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed32());return b},readPackedFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(){for(var a=this.readVarint()+this.pos,b=[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(a){var b=7&a;if(b===d.Varint)for(;this.buf[this.pos++]>127;);else if(b===d.Bytes)this.pos=this.readVarint()+this.pos;else if(b===d.Fixed32)this.pos+=4;else{if(b!==d.Fixed64)throw new Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(a,b){this.writeVarint(a<<3|b)},realloc:function(a){for(var b=this.length||16;b<this.pos+a;)b*=2;if(b!==this.length){var c=new q(b);this.buf.copy(c),this.buf=c,this.length=b}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(a){this.realloc(4),this.buf.writeUInt32LE(a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),this.buf.writeInt32LE(a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(a&-1,this.pos),this.buf.writeUInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),this.buf.writeInt32LE(a&-1,this.pos),this.buf.writeInt32LE(Math.floor(a*s),this.pos+4),this.pos+=8},writeVarint:function(a){return a=+a,a>268435455?void f(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),void(a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127)))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a);var b=q.byteLength(a);this.writeVarint(b),this.realloc(b),this.buf.write(a,this.pos),this.pos+=b},writeFloat:function(a){this.realloc(4),this.buf.writeFloatLE(a,this.pos),this.pos+=4},writeDouble:function(a){this.realloc(8),this.buf.writeDoubleLE(a,this.pos),this.pos+=8},writeBytes:function(a){var b=a.length;this.writeVarint(b),this.realloc(b);for(var c=0;c<b;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,b){this.pos++;var c=this.pos;a(b,this);var d=this.pos-c;d>=128&&g(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,b,c){this.writeTag(a,d.Bytes),this.writeRawMessage(b,c)},writePackedVarint:function(a,b){this.writeMessage(a,h,b)},writePackedSVarint:function(a,b){this.writeMessage(a,i,b)},writePackedBoolean:function(a,b){this.writeMessage(a,l,b)},writePackedFloat:function(a,b){this.writeMessage(a,j,b)},writePackedDouble:function(a,b){this.writeMessage(a,k,b)},writePackedFixed32:function(a,b){this.writeMessage(a,m,b)},writePackedSFixed32:function(a,b){this.writeMessage(a,n,b)},writePackedFixed64:function(a,b){this.writeMessage(a,o,b)},writePackedSFixed64:function(a,b){this.writeMessage(a,p,b)},writeBytesField:function(a,b){this.writeTag(a,d.Bytes),this.writeBytes(b)},writeFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeFixed32(b)},writeSFixed32Field:function(a,b){this.writeTag(a,d.Fixed32),this.writeSFixed32(b)},writeFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeFixed64(b)},writeSFixed64Field:function(a,b){this.writeTag(a,d.Fixed64),this.writeSFixed64(b)},writeVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeVarint(b)},writeSVarintField:function(a,b){this.writeTag(a,d.Varint),this.writeSVarint(b)},writeStringField:function(a,b){this.writeTag(a,d.Bytes),this.writeString(b)},writeFloatField:function(a,b){this.writeTag(a,d.Fixed32),this.writeFloat(b)},writeDoubleField:function(a,b){this.writeTag(a,d.Fixed64),this.writeDouble(b)},writeBooleanField:function(a,b){this.writeVarintField(a,Boolean(b))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":189}],191:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],192:[function(a,b,c){"use strict";function d(a,b){this.x=a,this.y=b}b.exports=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var b=a.x-this.x,c=a.y-this.y;return b*b+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,b){return Math.atan2(this.x*b-this.y*a,this.x*a+this.y*b)},_matMult:function(a){var b=a[0]*this.x+a[1]*this.y,c=a[2]*this.x+a[3]*this.y;return this.x=b,this.y=c,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y,e=c*this.x+b*this.y;return this.x=d,this.y=e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{}],193:[function(a,b,c){"use strict";function d(a,b,c,g,h){for(c=c||0,g=g||a.length-1,h=h||f;g>c;){if(g-c>600){var i=g-c+1,j=b-c+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(j-i/2<0?-1:1),n=Math.max(c,Math.floor(b-j*l/i+m)),o=Math.min(g,Math.floor(b+(i-j)*l/i+m));d(a,b,n,o,h)}var p=a[b],q=c,r=g;for(e(a,c,b),h(a[g],p)>0&&e(a,c,g);q<r;){for(e(a,q,r),q++,r--;h(a[q],p)<0;)q++;for(;h(a[r],p)>0;)r--}0===h(a[c],p)?e(a,c,r):(r++,e(a,r,g)),r<=b&&(c=r+1),b<=r&&(g=r-1)}}function e(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function f(a,b){return a<b?-1:a>b?1:0}b.exports=d},{}],194:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.ShelfPack=e()}(this,function(){function a(a,b,c){c=c||{},this.w=a||64,this.h=b||64,this.autoResize=!!c.autoResize,this.shelves=[],this.stats={},this.count=function(a){this.stats[a]=(0|this.stats[a])+1}}function b(a,b,c){this.x=0,this.y=a,this.w=this.free=b,this.h=c}return a.prototype.pack=function(a,b){a=[].concat(a),b=b||{};for(var c,d,e,f=[],g=0;g<a.length;g++)if(c=a[g].w||a[g].width,d=a[g].h||a[g].height,c&&d){if(e=this.packOne(c,d),!e)continue;b.inPlace&&(a[g].x=e.x,a[g].y=e.y),f.push(e)}if(this.shelves.length>0){for(var h=0,i=0,j=0;j<this.shelves.length;j++){var k=this.shelves[j];i+=k.h,h=Math.max(k.w-k.free,h)}this.resize(h,i)}return f},a.prototype.packOne=function(a,c){for(var d,e,f=0,g={shelf:-1,waste:1/0},h=0;h<this.shelves.length;h++){if(d=this.shelves[h],f+=d.h,c===d.h&&a<=d.free)return this.count(c),d.alloc(a,c);c>d.h||a>d.free||c<d.h&&a<=d.free&&(e=d.h-c,e<g.waste&&(g.waste=e,g.shelf=h))}if(g.shelf!==-1)return d=this.shelves[g.shelf],this.count(c),d.alloc(a,c);if(c<=this.h-f&&a<=this.w)return d=new b(f,this.w,c),this.shelves.push(d),this.count(c),d.alloc(a,c);if(this.autoResize){var i,j,k,l;return i=j=this.h,k=l=this.w,(k<=i||a>k)&&(l=2*Math.max(a,k)),(i<k||c>i)&&(j=2*Math.max(c,i)),this.resize(l,j),this.packOne(a,c)}return null},a.prototype.clear=function(){this.shelves=[],this.stats={}},a.prototype.resize=function(a,b){this.w=a,this.h=b;for(var c=0;c<this.shelves.length;c++)this.shelves[c].resize(a);return!0},b.prototype.alloc=function(a,b){if(a>this.free||b>this.h)return null;var c=this.x;return this.x+=a,this.free-=a,{x:c,y:this.y,w:a,h:b,width:a,height:b}},b.prototype.resize=function(a){return this.free+=a-this.w,this.w=a,!0},a})},{}],195:[function(a,b,c){"use strict";function d(a){return new e(a)}function e(a){this.options=n(Object.create(this.options),a),this.trees=new Array(this.options.maxZoom+1)}function f(a,b,c,d){return{x:a,y:b,zoom:1/0,id:d,numPoints:c}}function g(a,b){var c=a.geometry.coordinates;return f(j(c[0]),k(c[1]),1,b)}function h(a){return{type:"Feature",properties:i(a),geometry:{type:"Point",coordinates:[l(a.x),m(a.y)]}}}function i(a){var b=a.numPoints,c=b>=1e4?Math.round(b/1e3)+"k":b>=1e3?Math.round(b/100)/10+"k":b;return{cluster:!0,point_count:b,point_count_abbreviated:c}}function j(a){return a/360+.5}function k(a){var b=Math.sin(a*Math.PI/180),c=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return c<0?0:c>1?1:c}function l(a){return 360*(a-.5)}function m(a){var b=(180-360*a)*Math.PI/180;return 360*Math.atan(Math.exp(b))/Math.PI-90}function n(a,b){for(var c in b)a[c]=b[c];return a}function o(a){return a.x}function p(a){return a.y}var q=a("kdbush");b.exports=d,e.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1},load:function(a){var b=this.options.log;b&&console.time("total time");var c="prepare "+a.length+" points";b&&console.time(c),this.points=a;var d=a.map(g);b&&console.timeEnd(c);for(var e=this.options.maxZoom;e>=this.options.minZoom;e--){var f=+Date.now();this.trees[e+1]=q(d,o,p,this.options.nodeSize,Float32Array),d=this._cluster(d,e),b&&console.log("z%d: %d clusters in %dms",e,d.length,+Date.now()-f)}return this.trees[this.options.minZoom]=q(d,o,p,this.options.nodeSize,Float32Array),b&&console.timeEnd("total time"),this},getClusters:function(a,b){for(var c=this.trees[this._limitZoom(b)],d=c.range(j(a[0]),k(a[3]),j(a[2]),k(a[1])),e=[],f=0;f<d.length;f++){var g=c.points[d[f]];e.push(g.id!==-1?this.points[g.id]:h(g))}return e},getTile:function(a,b,c){var d=this.trees[this._limitZoom(a)],e=Math.pow(2,a),f=this.options.extent,g=this.options.radius,h=g/f,i=(c-h)/e,j=(c+1+h)/e,k={features:[]};return this._addTileFeatures(d.range((b-h)/e,i,(b+1+h)/e,j),d.points,b,c,e,k),0===b&&this._addTileFeatures(d.range(1-h/e,i,1,j),d.points,e,c,e,k),b===e-1&&this._addTileFeatures(d.range(0,i,h/e,j),d.points,-1,c,e,k),k.features.length?k:null},_addTileFeatures:function(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var h=b[a[g]];f.features.push({type:1,geometry:[[Math.round(this.options.extent*(h.x*e-c)),Math.round(this.options.extent*(h.y*e-d))]],tags:h.id!==-1?this.points[h.id].properties:i(h)})}},_limitZoom:function(a){return Math.max(this.options.minZoom,Math.min(a,this.options.maxZoom+1))},_cluster:function(a,b){for(var c=[],d=this.options.radius/(this.options.extent*Math.pow(2,b)),e=0;e<a.length;e++){var g=a[e];if(!(g.zoom<=b)){g.zoom=b;for(var h=this.trees[b+1],i=h.within(g.x,g.y,d),j=!1,k=g.numPoints,l=g.x*k,m=g.y*k,n=0;n<i.length;n++){var o=h.points[i[n]];b<o.zoom&&(j=!0,o.zoom=b,l+=o.x*o.numPoints,m+=o.y*o.numPoints,k+=o.numPoints)}c.push(j?f(l/k,m/k,k,-1):g)}}return c}}},{kdbush:196}],196:[function(a,b,c){"use strict";function d(a,b,c,d,f){return new e(a,b,c,d,f)}function e(a,b,c,d,e){b=b||f,c=c||g,e=e||Array,this.nodeSize=d||64,this.points=a,this.ids=new e(a.length),this.coords=new e(2*a.length);for(var i=0;i<a.length;i++)this.ids[i]=i,this.coords[2*i]=b(a[i]),this.coords[2*i+1]=c(a[i]);h(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function f(a){return a[0]}function g(a){return a[1]}var h=a("./sort"),i=a("./range"),j=a("./within");b.exports=d,e.prototype={range:function(a,b,c,d){return i(this.ids,this.coords,a,b,c,d,this.nodeSize)},within:function(a,b,c){return j(this.ids,this.coords,a,b,c,this.nodeSize)}}},{"./range":197,"./sort":198,"./within":199}],197:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){for(var h,i,j=[0,a.length-1,0],k=[];j.length;){var l=j.pop(),m=j.pop(),n=j.pop();if(m-n<=g)for(var o=n;o<=m;o++)h=b[2*o],i=b[2*o+1],h>=c&&h<=e&&i>=d&&i<=f&&k.push(a[o]);else{var p=Math.floor((n+m)/2);h=b[2*p],i=b[2*p+1],h>=c&&h<=e&&i>=d&&i<=f&&k.push(a[p]);var q=(l+1)%2;(0===l?c<=h:d<=i)&&(j.push(n),j.push(p-1),j.push(q)),(0===l?e>=h:f>=i)&&(j.push(p+1),j.push(m),j.push(q))}}return k}b.exports=d},{}],198:[function(a,b,c){"use strict";function d(a,b,c,f,g,h){if(!(g-f<=c)){var i=Math.floor((f+g)/2);e(a,b,i,f,g,h%2),d(a,b,c,f,i-1,h+1),d(a,b,c,i+1,g,h+1)}}function e(a,b,c,d,g,h){for(;g>d;){if(g-d>600){var i=g-d+1,j=c-d+1,k=Math.log(i),l=.5*Math.exp(2*k/3),m=.5*Math.sqrt(k*l*(i-l)/i)*(j-i/2<0?-1:1),n=Math.max(d,Math.floor(c-j*l/i+m)),o=Math.min(g,Math.floor(c+(i-j)*l/i+m));e(a,b,c,n,o,h)}var p=b[2*c+h],q=d,r=g;for(f(a,b,d,c),b[2*g+h]>p&&f(a,b,d,g);q<r;){for(f(a,b,q,r),q++,r--;b[2*q+h]<p;)q++;for(;b[2*r+h]>p;)r--}b[2*d+h]===p?f(a,b,d,r):(r++,f(a,b,r,g)),r<=c&&(d=r+1),c<=r&&(g=r-1)}}function f(a,b,c,d){g(a,c,d),g(b,2*c,2*d),g(b,2*c+1,2*d+1)}function g(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}b.exports=d},{}],199:[function(a,b,c){"use strict";function d(a,b,c,d,f,g){for(var h=[0,a.length-1,0],i=[],j=f*f;h.length;){var k=h.pop(),l=h.pop(),m=h.pop();if(l-m<=g)for(var n=m;n<=l;n++)e(b[2*n],b[2*n+1],c,d)<=j&&i.push(a[n]);else{var o=Math.floor((m+l)/2),p=b[2*o],q=b[2*o+1];e(p,q,c,d)<=j&&i.push(a[o]);var r=(k+1)%2;(0===k?c-f<=p:d-f<=q)&&(h.push(m),h.push(o-1),h.push(r)),(0===k?c+f>=p:d+f>=q)&&(h.push(o+1),h.push(l),h.push(r))}}return i}function e(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f}b.exports=d},{}],200:[function(a,b,c){"use strict";function d(a,b){if(!(this instanceof d))return new d(a,b);if(this.data=a||[],this.length=this.data.length,this.compare=b||e,a)for(var c=Math.floor(this.length/2);c>=0;c--)this._down(c)}function e(a,b){return a<b?-1:a>b?1:0}function f(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}b.exports=d,d.prototype={push:function(a){this.data.push(a),this.length++,this._up(this.length-1)},pop:function(){var a=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),a},peek:function(){return this.data[0]},_up:function(a){for(var b=this.data,c=this.compare;a>0;){var d=Math.floor((a-1)/2);if(!(c(b[a],b[d])<0))break;f(b,d,a),a=d}},_down:function(a){for(var b=this.data,c=this.compare,d=this.length;;){var e=2*a+1,g=e+1,h=a;if(e<d&&c(b[e],b[h])<0&&(h=e),g<d&&c(b[g],b[h])<0&&(h=g),h===a)return;f(b,h,a),a=h}}}},{}],201:[function(a,b,c){function d(a,b,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(d-b)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=d,this.p2x=c,this.p2y=d}b.exports=d,d.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},d.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},d.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},d.prototype.solveCurveX=function(a,b){"undefined"==typeof b&&(b=1e-6);var c,d,e,f,g;for(e=a,g=0;g<8;g++){if(f=this.sampleCurveX(e)-a,Math.abs(f)<b)return e;var h=this.sampleCurveDerivativeX(e);if(Math.abs(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,e<c)return c;if(e>d)return d;for(;c<d;){if(f=this.sampleCurveX(e),Math.abs(f-a)<b)return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e},d.prototype.solve=function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))}},{}],202:[function(a,b,c){b.exports.VectorTile=a("./lib/vectortile.js"),b.exports.VectorTileFeature=a("./lib/vectortilefeature.js"),b.exports.VectorTileLayer=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":203,"./lib/vectortilefeature.js":204,"./lib/vectortilelayer.js":205}],203:[function(a,b,c){"use strict";function d(a,b){this.layers=a.readFields(e,{},b)}function e(a,b,c){if(3===a){var d=new f(c,c.readVarint()+c.pos);d.length&&(b[d.name]=d)}}var f=a("./vectortilelayer");b.exports=d},{"./vectortilelayer":205}],204:[function(a,b,c){"use strict";function d(a,b,c,d,f){this.properties={},this.extent=c,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=f,a.readFields(e,this,b)}function e(a,b,c){1==a?b.id=c.readVarint():2==a?f(c,b):3==a?b.type=c.readVarint():4==a&&(b._geometry=c.pos)}function f(a,b){for(var c=a.readVarint()+a.pos;a.pos<c;){var d=b._keys[a.readVarint()],e=b._values[a.readVarint()];b.properties[d]=e}}function g(a){var b=a.length;if(b<=1)return[a];for(var c,d,e=[],f=0;f<b;f++){var g=h(a[f]);0!==g&&(void 0===d&&(d=g<0),d===g<0?(c&&e.push(c),c=[a[f]]):c.push(a[f]))}return c&&e.push(c),e}function h(a){for(var b,c,d=0,e=0,f=a.length,g=f-1;e<f;g=e++)b=a[e],c=a[g],d+=(c.x-b.x)*(b.y+c.y);return d}var i=a("point-geometry");b.exports=d,d.types=["Unknown","Point","LineString","Polygon"],d.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var b,c=a.readVarint()+a.pos,d=1,e=0,f=0,g=0,h=[];a.pos<c;){if(!e){var j=a.readVarint();d=7&j,e=j>>3}if(e--,1===d||2===d)f+=a.readSVarint(),g+=a.readSVarint(),1===d&&(b&&h.push(b),b=[]),b.push(new i(f,g));else{if(7!==d)throw new Error("unknown command "+d);b&&b.push(b[0].clone())}}return b&&h.push(b),h},d.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var b=a.readVarint()+a.pos,c=1,d=0,e=0,f=0,g=1/0,h=-(1/0),i=1/0,j=-(1/0);a.pos<b;){if(!d){var k=a.readVarint();c=7&k,d=k>>3}if(d--,1===c||2===c)e+=a.readSVarint(),f+=a.readSVarint(),e<g&&(g=e),e>h&&(h=e),f<i&&(i=f),f>j&&(j=f);else if(7!==c)throw new Error("unknown command "+c)}return[g,i,h,j]},d.prototype.toGeoJSON=function(a,b,c){function e(a){for(var b=0;b<a.length;b++){var c=a[b],d=180-360*(c.y+k)/i;a[b]=[360*(c.x+j)/i-180,360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90]}}var f,h,i=this.extent*Math.pow(2,c),j=this.extent*a,k=this.extent*b,l=this.loadGeometry(),m=d.types[this.type];switch(this.type){case 1:var n=[];for(f=0;f<l.length;f++)n[f]=l[f][0];l=n,e(l);break;case 2:for(f=0;f<l.length;f++)e(l[f]);break;case 3:for(l=g(l),f=0;f<l.length;f++)for(h=0;h<l[f].length;h++)e(l[f][h])}1===l.length?l=l[0]:m="Multi"+m;var o={type:"Feature",geometry:{type:m,coordinates:l},properties:this.properties};return"id"in this&&(o.id=this.id),o}},{"point-geometry":192}],205:[function(a,b,c){"use strict";function d(a,b){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(e,this,b),this.length=this._features.length}function e(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():5===a?b.extent=c.readVarint():2===a?b._features.push(c.pos):3===a?b._keys.push(c.readString()):4===a&&b._values.push(f(c))}function f(a){for(var b=null,c=a.readVarint()+a.pos;a.pos<c;){var d=a.readVarint()>>3;b=1===d?a.readString():2===d?a.readFloat():3===d?a.readDouble():4===d?a.readVarint64():5===d?a.readVarint():6===d?a.readSVarint():7===d?a.readBoolean():null}return b}var g=a("./vectortilefeature.js");b.exports=d,d.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var b=this._pbf.readVarint()+this._pbf.pos;return new g(this._pbf,b,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":204}],206:[function(a,b,c){function d(a){var b=[];for(var c in a.layers)b.push(f(a.layers[c]));var d=new k;return l.tile.write({layers:b},d),d.finish()}function e(a){var b={};for(var c in a)b[c]=new m(a[c].features),b[c].name=c;return d({layers:b})}function f(a){for(var b={name:a.name||"",version:a.version||1,extent:a.extent||4096,keys:[],values:[],features:[]},c={},d={},e=0;e<a.length;e++){var f=a.feature(e);f.geometry=i(f.loadGeometry());var g=[];for(var h in f.properties){var k=c[h];"undefined"==typeof k&&(b.keys.push(h),k=b.keys.length-1,c[h]=k);var l=j(f.properties[h]),m=d[l.key];"undefined"==typeof m&&(b.values.push(l),m=b.values.length-1,d[l.key]=m),g.push(k),g.push(m)}f.tags=g,b.features.push(f)}return b}function g(a,b){return(b<<3)+(7&a)}function h(a){return a<<1^a>>31}function i(a){for(var b=[],c=0,d=0,e=a.length,f=0;f<e;f++){var i=a[f];b.push(g(1,1));for(var j=0;j<i.length;j++){1===j&&b.push(g(2,i.length-1));var k=i[j].x-c,l=i[j].y-d;b.push(h(k),h(l)),c+=k,d+=l}}return b}function j(a){var b,c=typeof a;return"string"===c?b={string_value:a}:"boolean"===c?b={bool_value:a}:"number"===c?b=a%1!==0?{double_value:a}:a<0?{sint_value:a}:{uint_value:a}:(a=JSON.stringify(a),b={string_value:a}),b.key=c+":"+a,b}var k=a("pbf"),l=a("./vector-tile-pb"),m=a("./lib/geojson_wrapper");b.exports=d,b.exports.fromVectorTileJs=d,b.exports.fromGeojsonVt=e,b.exports.GeoJSONWrapper=m},{"./lib/geojson_wrapper":207,"./vector-tile-pb":208,pbf:190}],207:[function(a,b,c){"use strict";function d(a){this.features=a,this.length=a.length}function e(a){this.id="number"==typeof a.id?a.id:void 0,this.type=a.type,this.rawGeometry=1===a.type?[a.geometry]:a.geometry,this.properties=a.tags,this.extent=4096}var f=a("point-geometry"),g=a("vector-tile").VectorTileFeature;b.exports=d,d.prototype.feature=function(a){return new e(this.features[a])},e.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var b=0;b<a.length;b++){for(var c=a[b],d=[],e=0;e<c.length;e++)d.push(new f(c[e][0],c[e][1]));this.geometry.push(d)}return this.geometry},e.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-(1/0),d=1/0,e=-(1/0),f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.length;h++){var i=g[h];b=Math.min(b,i.x),c=Math.max(c,i.x),d=Math.min(d,i.y),e=Math.max(e,i.y)}return[b,d,c,e]},e.prototype.toGeoJSON=g.prototype.toGeoJSON},{"point-geometry":192,"vector-tile":202}],208:[function(a,b,c){"use strict";function d(a,b){return a.readFields(e,{layers:[]},b)}function e(a,b,c){3===a&&b.layers.push(m(c,c.readVarint()+c.pos))}function f(a,b){var c;if(void 0!==a.layers)for(c=0;c<a.layers.length;c++)b.writeMessage(3,o,a.layers[c])}function g(a,b){return a.readFields(h,{},b)}function h(a,b,c){1===a?b.string_value=c.readString():2===a?b.float_value=c.readFloat():3===a?b.double_value=c.readDouble():4===a?b.int_value=c.readVarint():5===a?b.uint_value=c.readVarint():6===a?b.sint_value=c.readSVarint():7===a&&(b.bool_value=c.readBoolean())}function i(a,b){void 0!==a.string_value&&b.writeStringField(1,a.string_value),void 0!==a.float_value&&b.writeFloatField(2,a.float_value),void 0!==a.double_value&&b.writeDoubleField(3,a.double_value),void 0!==a.int_value&&b.writeVarintField(4,a.int_value),void 0!==a.uint_value&&b.writeVarintField(5,a.uint_value),void 0!==a.sint_value&&b.writeSVarintField(6,a.sint_value),void 0!==a.bool_value&&b.writeBooleanField(7,a.bool_value)}function j(a,b){var c=a.readFields(k,{},b);return void 0===c.type&&(c.type="Unknown"),c}function k(a,b,c){1===a?b.id=c.readVarint():2===a?b.tags=c.readPackedVarint():3===a?b.type=c.readVarint():4===a&&(b.geometry=c.readPackedVarint())}function l(a,b){void 0!==a.id&&b.writeVarintField(1,a.id),void 0!==a.tags&&b.writePackedVarint(2,a.tags),void 0!==a.type&&b.writeVarintField(3,a.type),void 0!==a.geometry&&b.writePackedVarint(4,a.geometry)}function m(a,b){return a.readFields(n,{features:[],keys:[],values:[]},b)}function n(a,b,c){15===a?b.version=c.readVarint():1===a?b.name=c.readString():2===a?b.features.push(j(c,c.readVarint()+c.pos)):3===a?b.keys.push(c.readString()):4===a?b.values.push(g(c,c.readVarint()+c.pos)):5===a&&(b.extent=c.readVarint())}function o(a,b){void 0!==a.version&&b.writeVarintField(15,a.version),void 0!==a.name&&b.writeStringField(1,a.name);var c;if(void 0!==a.features)for(c=0;c<a.features.length;c++)b.writeMessage(2,l,a.features[c]);if(void 0!==a.keys)for(c=0;c<a.keys.length;c++)b.writeStringField(3,a.keys[c]);if(void 0!==a.values)for(c=0;c<a.values.length;c++)b.writeMessage(4,i,a.values[c]);void 0!==a.extent&&b.writeVarintField(5,a.extent)}var p=c.tile={read:d,write:f};p.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},p.value={read:g,write:i},p.feature={read:j,write:l},p.layer={read:m,write:o}},{}],209:[function(a,b,c){var d=arguments[3],e=arguments[4],f=arguments[5],g=JSON.stringify;b.exports=function(a,b){function c(a){q[a]=!0;for(var b in e[a][1]){var d=e[a][1][b];q[d]||c(d)}}for(var h,i=Object.keys(f),j=0,k=i.length;j<k;j++){var l=i[j],m=f[l].exports;if(m===a||m&&m.default===a){h=l;break}}if(!h){h=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var n={},j=0,k=i.length;j<k;j++){var l=i[j];n[l]=l}e[h]=[Function(["require","module","exports"],"("+a+")(self)"),n]}var o=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[h]=h,e[o]=[Function(["require"],"var f = require("+g(h)+");(f.default ? f.default : f)(self);"),p];var q={};c(o);var r="("+d+")({"+Object.keys(q).map(function(a){return g(a)+":["+e[a][0]+","+g(e[a][1])+"]"}).join(",")+"},{},["+g(o)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL,t=new Blob([r],{type:"text/javascript"});if(b&&b.bare)return t;var u=s.createObjectURL(t),v=new Worker(u);return v.objectURL=u,v}},{}],210:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.WhooTS=b.WhooTS||{})}(this,function(a){function b(a,b,d,e,f,g){g=g||{};var h=a+"?"+["bbox="+c(d,e,f),"format="+(g.format||"image/png"),"service="+(g.service||"WMS"),"version="+(g.version||"1.1.1"),"request="+(g.request||"GetMap"),"srs="+(g.srs||"EPSG:3857"),"width="+(g.width||256),"height="+(g.height||256),"layers="+b].join("&");
return h}function c(a,b,c){b=Math.pow(2,c)-b-1;var e=d(256*a,256*b,c),f=d(256*(a+1),256*(b+1),c);return e[0]+","+e[1]+","+f[0]+","+f[1]}function d(a,b,c){var d=2*Math.PI*6378137/256/Math.pow(2,c),e=a*d-2*Math.PI*6378137/2,f=b*d-2*Math.PI*6378137/2;return[e,f]}a.getURL=b,a.getTileBBox=c,a.getMercCoords=d,Object.defineProperty(a,"__esModule",{value:!0})})},{}],211:[function(a,b,c){b.exports={version:"0.26.0"}},{}]},{},[18])(18)}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function b(b,d){var e,f=this;f.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(b),appendDots:a(b),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(b,c){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(c+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},f.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(f,f.initials),f.activeBreakpoint=null,f.animType=null,f.animProp=null,f.breakpoints=[],f.breakpointSettings=[],f.cssTransitions=!1,f.focussed=!1,f.interrupted=!1,f.hidden="hidden",f.paused=!0,f.positionProp=null,f.respondTo=null,f.rowCount=1,f.shouldClick=!0,f.$slider=a(b),f.$slidesCache=null,f.transformType=null,f.transitionType=null,f.visibilityChange="visibilitychange",f.windowWidth=0,f.windowTimer=null,e=a(b).data("slick")||{},f.options=a.extend({},f.defaults,d,e),f.currentSlide=f.options.initialSlide,f.originalSettings=f.options,"undefined"!=typeof document.mozHidden?(f.hidden="mozHidden",f.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(f.hidden="webkitHidden",f.visibilityChange="webkitvisibilitychange"),f.autoPlay=a.proxy(f.autoPlay,f),f.autoPlayClear=a.proxy(f.autoPlayClear,f),f.autoPlayIterator=a.proxy(f.autoPlayIterator,f),f.changeSlide=a.proxy(f.changeSlide,f),f.clickHandler=a.proxy(f.clickHandler,f),f.selectHandler=a.proxy(f.selectHandler,f),f.setPosition=a.proxy(f.setPosition,f),f.swipeHandler=a.proxy(f.swipeHandler,f),f.dragHandler=a.proxy(f.dragHandler,f),f.keyHandler=a.proxy(f.keyHandler,f),f.instanceUid=c++,f.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,f.registerBreakpoints(),f.init(!0)}var c=0;return b}(),b.prototype.activateADA=function(){var a=this;a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(c<0||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),e.options.vertical===!1?d[e.animType]="translate3d("+b+"px, 0px, 0px)":d[e.animType]="translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.getNavTarget=function(){var b=this,c=b.options.asNavFor;return c&&null!==c&&(c=a(c).not(b.$slider)),c},b.prototype.asNavFor=function(b){var c=this,d=c.getNavTarget();null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};b.options.fade===!1?c[b.transitionType]=b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:c[b.transitionType]="opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayClear(),a.slideCount>a.options.slidesToShow&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this,b=a.currentSlide+a.options.slidesToScroll;a.paused||a.interrupted||a.focussed||(a.options.infinite===!1&&(1===a.direction&&a.currentSlide+1===a.slideCount-1?a.direction=0:0===a.direction&&(b=a.currentSlide-a.options.slidesToScroll,a.currentSlide-1===0&&(a.direction=1))),a.slideHandler(b))},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var b,c,d=this;if(d.options.dots===!0&&d.slideCount>d.options.slidesToShow){for(d.$slider.addClass("slick-dotted"),c=a("<ul />").addClass(d.options.dotsClass),b=0;b<=d.getDotCount();b+=1)c.append(a("<li />").append(d.options.customPaging.call(this,d,b)));d.$dots=c.appendTo(d.options.appendDots),d.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),b.options.centerMode!==!0&&b.options.swipeToSlide!==!0||(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var a,b,c,d,e,f,g,h=this;if(d=document.createDocumentFragment(),f=h.$slider.children(),h.options.rows>1){for(g=h.options.slidesPerRow*h.options.rows,e=Math.ceil(f.length/g),a=0;a<e;a++){var i=document.createElement("div");for(b=0;b<h.options.rows;b++){var j=document.createElement("div");for(c=0;c<h.options.slidesPerRow;c++){var k=a*g+(b*h.options.slidesPerRow+c);f.get(k)&&j.appendChild(f.get(k))}i.appendChild(j)}d.appendChild(i)}h.$slider.empty().append(d),h.$slider.children().children().children().css({width:100/h.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var d,e,f,g=this,h=!1,i=g.$slider.width(),j=window.innerWidth||a(window).width();if("window"===g.respondTo?f=j:"slider"===g.respondTo?f=i:"min"===g.respondTo&&(f=Math.min(j,i)),g.options.responsive&&g.options.responsive.length&&null!==g.options.responsive){e=null;for(d in g.breakpoints)g.breakpoints.hasOwnProperty(d)&&(g.originalSettings.mobileFirst===!1?f<g.breakpoints[d]&&(e=g.breakpoints[d]):f>g.breakpoints[d]&&(e=g.breakpoints[d]));null!==e?null!==g.activeBreakpoint?(e!==g.activeBreakpoint||c)&&(g.activeBreakpoint=e,"unslick"===g.breakpointSettings[e]?g.unslick(e):(g.options=a.extend({},g.originalSettings,g.breakpointSettings[e]),b===!0&&(g.currentSlide=g.options.initialSlide),g.refresh(b)),h=e):(g.activeBreakpoint=e,"unslick"===g.breakpointSettings[e]?g.unslick(e):(g.options=a.extend({},g.originalSettings,g.breakpointSettings[e]),b===!0&&(g.currentSlide=g.options.initialSlide),g.refresh(b)),h=e):null!==g.activeBreakpoint&&(g.activeBreakpoint=null,g.options=g.originalSettings,b===!0&&(g.currentSlide=g.options.initialSlide),g.refresh(b),h=e),b||h===!1||g.$slider.trigger("breakpoint",[g,h])}},b.prototype.changeSlide=function(b,c){var d,e,f,g=this,h=a(b.currentTarget);switch(h.is("a")&&b.preventDefault(),h.is("li")||(h=h.closest("li")),f=g.slideCount%g.options.slidesToScroll!==0,d=f?0:(g.slideCount-g.currentSlide)%g.options.slidesToScroll,b.data.message){case"previous":e=0===d?g.options.slidesToScroll:g.options.slidesToShow-d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide-e,!1,c);break;case"next":e=0===d?g.options.slidesToScroll:d,g.slideCount>g.options.slidesToShow&&g.slideHandler(g.currentSlide+e,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||h.index()*g.options.slidesToScroll;g.slideHandler(g.checkNavigable(i),!1,c),h.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var b,c,d=this;if(b=d.getNavigableIndexes(),c=0,a>b[b.length-1])a=b[b.length-1];else for(var e in b){if(a<b[e]){a=c;break}c=b[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&a("li",b.$dots).off("click.slick",b.changeSlide).off("mouseenter.slick",a.proxy(b.interrupt,b,!0)).off("mouseleave.slick",a.proxy(b.interrupt,b,!1)),b.$slider.off("focus.slick blur.slick"),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.cleanUpSlideEvents(),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpSlideEvents=function(){var b=this;b.$list.off("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.cleanUpRows=function(){var a,b=this;b.options.rows>1&&(a=b.$slides.children().children(),a.removeAttr("style"),b.$slider.empty().append(a))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.$slider.removeClass("slick-dotted"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.$slidesCache=b.$slides,b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.focusHandler=function(){var b=this;b.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.options.pauseOnFocus&&(b.focussed=d.is(":focus"),b.autoPlay())},0)})},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else if(a.options.asNavFor)for(;b<a.slideCount;)++d,b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else d=1+Math.ceil((a.slideCount-a.options.slidesToShow)/a.options.slidesToScroll);return d-1},b.prototype.getLeft=function(a){var b,c,d,e=this,f=0;return e.slideOffset=0,c=e.$slides.first().outerHeight(!0),e.options.infinite===!0?(e.slideCount>e.options.slidesToShow&&(e.slideOffset=e.slideWidth*e.options.slidesToShow*-1,f=c*e.options.slidesToShow*-1),e.slideCount%e.options.slidesToScroll!==0&&a+e.options.slidesToScroll>e.slideCount&&e.slideCount>e.options.slidesToShow&&(a>e.slideCount?(e.slideOffset=(e.options.slidesToShow-(a-e.slideCount))*e.slideWidth*-1,f=(e.options.slidesToShow-(a-e.slideCount))*c*-1):(e.slideOffset=e.slideCount%e.options.slidesToScroll*e.slideWidth*-1,f=e.slideCount%e.options.slidesToScroll*c*-1))):a+e.options.slidesToShow>e.slideCount&&(e.slideOffset=(a+e.options.slidesToShow-e.slideCount)*e.slideWidth,f=(a+e.options.slidesToShow-e.slideCount)*c),e.slideCount<=e.options.slidesToShow&&(e.slideOffset=0,f=0),e.options.centerMode===!0&&e.options.infinite===!0?e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)-e.slideWidth:e.options.centerMode===!0&&(e.slideOffset=0,e.slideOffset+=e.slideWidth*Math.floor(e.options.slidesToShow/2)),b=e.options.vertical===!1?a*e.slideWidth*-1+e.slideOffset:a*c*-1+f,e.options.variableWidth===!0&&(d=e.slideCount<=e.options.slidesToShow||e.options.infinite===!1?e.$slideTrack.children(".slick-slide").eq(a):e.$slideTrack.children(".slick-slide").eq(a+e.options.slidesToShow),b=e.options.rtl===!0?d[0]?(e.$slideTrack.width()-d[0].offsetLeft-d.width())*-1:0:d[0]?d[0].offsetLeft*-1:0,e.options.centerMode===!0&&(d=e.slideCount<=e.options.slidesToShow||e.options.infinite===!1?e.$slideTrack.children(".slick-slide").eq(a):e.$slideTrack.children(".slick-slide").eq(a+e.options.slidesToShow+1),b=e.options.rtl===!0?d[0]?(e.$slideTrack.width()-d[0].offsetLeft-d.width())*-1:0:d[0]?d[0].offsetLeft*-1:0,b+=(e.$list.width()-d.outerWidth())/2)),b},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var a,b=this,c=0,d=0,e=[];for(b.options.infinite===!1?a=b.slideCount:(c=b.options.slidesToScroll*-1,d=b.options.slidesToScroll*-1,a=2*b.slideCount);c<a;)e.push(c),c=d+b.options.slidesToScroll,d+=b.options.slidesToScroll<=b.options.slidesToShow?b.options.slidesToScroll:b.options.slidesToShow;return e},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var b,c,d,e=this;return d=e.options.centerMode===!0?e.slideWidth*Math.floor(e.options.slidesToShow/2):0,e.options.swipeToSlide===!0?(e.$slideTrack.find(".slick-slide").each(function(b,f){if(f.offsetLeft-d+a(f).outerWidth()/2>e.swipeLeft*-1)return c=f,!1}),b=Math.abs(a(c).attr("data-slick-index")-e.currentSlide)||1):e.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots(),c.checkResponsive(!0),c.focusHandler()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA(),c.options.autoplay&&(c.paused=!1,c.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.off("click.slick").on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.interrupt,b,!0)).on("mouseleave.slick",a.proxy(b.interrupt,b,!1))},b.prototype.initSlideEvents=function(){var b=this;b.options.pauseOnHover&&(b.$list.on("mouseenter.slick",a.proxy(b.interrupt,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.interrupt,b,!1)))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.initSlideEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:b.options.rtl===!0?"next":"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:b.options.rtl===!0?"previous":"next"}}))},b.prototype.lazyLoad=function(){function b(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){b.animate({opacity:0},100,function(){b.attr("src",c).animate({opacity:1},200,function(){b.removeAttr("data-lazy").removeClass("slick-loading")}),g.$slider.trigger("lazyLoaded",[g,b,c])})},d.onerror=function(){b.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),g.$slider.trigger("lazyLoadError",[g,b,c])},d.src=c})}var c,d,e,f,g=this;g.options.centerMode===!0?g.options.infinite===!0?(e=g.currentSlide+(g.options.slidesToShow/2+1),f=e+g.options.slidesToShow+2):(e=Math.max(0,g.currentSlide-(g.options.slidesToShow/2+1)),f=2+(g.options.slidesToShow/2+1)+g.currentSlide):(e=g.options.infinite?g.options.slidesToShow+g.currentSlide:g.currentSlide,f=Math.ceil(e+g.options.slidesToShow),g.options.fade===!0&&(e>0&&e--,f<=g.slideCount&&f++)),c=g.$slider.find(".slick-slide").slice(e,f),b(c),g.slideCount<=g.options.slidesToShow?(d=g.$slider.find(".slick-slide"),b(d)):g.currentSlide>=g.slideCount-g.options.slidesToShow?(d=g.$slider.find(".slick-cloned").slice(0,g.options.slidesToShow),b(d)):0===g.currentSlide&&(d=g.$slider.find(".slick-cloned").slice(g.options.slidesToShow*-1),b(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.autoPlay(),a.options.autoplay=!0,a.paused=!1,a.focussed=!1,a.interrupted=!1},b.prototype.postSlide=function(a){var b=this;b.unslicked||(b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay&&b.autoPlay(),b.options.accessibility===!0&&b.initADA())},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(b){b=b||1;var c,d,e,f=this,g=a("img[data-lazy]",f.$slider);g.length?(c=g.first(),d=c.attr("data-lazy"),e=document.createElement("img"),e.onload=function(){c.attr("src",d).removeAttr("data-lazy").removeClass("slick-loading"),f.options.adaptiveHeight===!0&&f.setPosition(),f.$slider.trigger("lazyLoaded",[f,c,d]),f.progressiveLazyLoad()},e.onerror=function(){b<3?setTimeout(function(){f.progressiveLazyLoad(b+1)},500):(c.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),f.$slider.trigger("lazyLoadError",[f,c,d]),f.progressiveLazyLoad())},e.src=d):f.$slider.trigger("allImagesLoaded",[f])},b.prototype.refresh=function(b){var c,d,e=this;d=e.slideCount-e.options.slidesToShow,!e.options.infinite&&e.currentSlide>d&&(e.currentSlide=d),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),c=e.currentSlide,e.destroy(!0),a.extend(e,e.initials,{currentSlide:c}),e.init(),b||e.changeSlide({data:{message:"index",index:c}},!1)},b.prototype.registerBreakpoints=function(){var b,c,d,e=this,f=e.options.responsive||null;if("array"===a.type(f)&&f.length){e.respondTo=e.options.respondTo||"window";for(b in f)if(d=e.breakpoints.length-1,c=f[b].breakpoint,f.hasOwnProperty(b)){for(;d>=0;)e.breakpoints[d]&&e.breakpoints[d]===c&&e.breakpoints.splice(d,1),d--;e.breakpoints.push(c),e.breakpointSettings[c]=f[b].settings}e.breakpoints.sort(function(a,b){return e.options.mobileFirst?a-b:b-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.cleanUpSlideEvents(),b.initSlideEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.setPosition(),b.focusHandler(),b.paused=!b.options.autoplay,b.autoPlay(),b.$slider.trigger("reInit",[b])},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,!(d.slideCount<1||a<0||a>d.slideCount-1)&&(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,void d.reinit())},b.prototype.setCSS=function(a){var b,c,d=this,e={};d.options.rtl===!0&&(a=-a),b="left"==d.positionProp?Math.ceil(a)+"px":"0px",c="top"==d.positionProp?Math.ceil(a)+"px":"0px",e[d.positionProp]=a,d.transformsEnabled===!1?d.$slideTrack.css(e):(e={},d.cssTransitions===!1?(e[d.animType]="translate("+b+", "+c+")",d.$slideTrack.css(e)):(e[d.animType]="translate3d("+b+", "+c+", 0px)",d.$slideTrack.css(e)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var b,c=this;c.$slides.each(function(d,e){b=c.slideWidth*d*-1,c.options.rtl===!0?a(e).css({position:"relative",right:b,top:0,zIndex:c.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:b,top:0,zIndex:c.options.zIndex-2,opacity:0})}),c.$slides.eq(c.currentSlide).css({zIndex:c.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(){var b,c,d,e,f,g=this,h=!1;if("object"===a.type(arguments[0])?(d=arguments[0],h=arguments[1],f="multiple"):"string"===a.type(arguments[0])&&(d=arguments[0],e=arguments[1],h=arguments[2],"responsive"===arguments[0]&&"array"===a.type(arguments[1])?f="responsive":"undefined"!=typeof arguments[1]&&(f="single")),"single"===f)g.options[d]=e;else if("multiple"===f)a.each(d,function(a,b){g.options[a]=b});else if("responsive"===f)for(c in e)if("array"!==a.type(g.options.responsive))g.options.responsive=[e[c]];else{for(b=g.options.responsive.length-1;b>=0;)g.options.responsive[b].breakpoint===e[c].breakpoint&&g.options.responsive.splice(b,1),b--;g.options.responsive.push(e[c])}h&&(g.unload(),g.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),void 0===b.WebkitTransition&&void 0===b.MozTransition&&void 0===b.msTransition||a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=a.options.useTransform&&null!==a.animType&&a.animType!==!1;
},b.prototype.setSlideClasses=function(a){var b,c,d,e,f=this;c=f.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),f.$slides.eq(a).addClass("slick-current"),f.options.centerMode===!0?(b=Math.floor(f.options.slidesToShow/2),f.options.infinite===!0&&(a>=b&&a<=f.slideCount-1-b?f.$slides.slice(a-b,a+b+1).addClass("slick-active").attr("aria-hidden","false"):(d=f.options.slidesToShow+a,c.slice(d-b+1,d+b+2).addClass("slick-active").attr("aria-hidden","false")),0===a?c.eq(c.length-1-f.options.slidesToShow).addClass("slick-center"):a===f.slideCount-1&&c.eq(f.options.slidesToShow).addClass("slick-center")),f.$slides.eq(a).addClass("slick-center")):a>=0&&a<=f.slideCount-f.options.slidesToShow?f.$slides.slice(a,a+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):c.length<=f.options.slidesToShow?c.addClass("slick-active").attr("aria-hidden","false"):(e=f.slideCount%f.options.slidesToShow,d=f.options.infinite===!0?f.options.slidesToShow+a:a,f.options.slidesToShow==f.options.slidesToScroll&&f.slideCount-a<f.options.slidesToShow?c.slice(d-(f.options.slidesToShow-e),d+e).addClass("slick-active").attr("aria-hidden","false"):c.slice(d,d+f.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===f.options.lazyLoad&&f.lazyLoad()},b.prototype.setupInfinite=function(){var b,c,d,e=this;if(e.options.fade===!0&&(e.options.centerMode=!1),e.options.infinite===!0&&e.options.fade===!1&&(c=null,e.slideCount>e.options.slidesToShow)){for(d=e.options.centerMode===!0?e.options.slidesToShow+1:e.options.slidesToShow,b=e.slideCount;b>e.slideCount-d;b-=1)c=b-1,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c-e.slideCount).prependTo(e.$slideTrack).addClass("slick-cloned");for(b=0;b<d;b+=1)c=b,a(e.$slides[c]).clone(!0).attr("id","").attr("data-slick-index",c+e.slideCount).appendTo(e.$slideTrack).addClass("slick-cloned");e.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.interrupt=function(a){var b=this;a||b.autoPlay(),b.interrupted=a},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),void c.asNavFor(e)):void c.slideHandler(e)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h,i=null,j=this;if(b=b||!1,(j.animating!==!0||j.options.waitForAnimate!==!0)&&!(j.options.fade===!0&&j.currentSlide===a||j.slideCount<=j.options.slidesToShow))return b===!1&&j.asNavFor(a),d=a,i=j.getLeft(d),g=j.getLeft(j.currentSlide),j.currentLeft=null===j.swipeLeft?g:j.swipeLeft,j.options.infinite===!1&&j.options.centerMode===!1&&(a<0||a>j.getDotCount()*j.options.slidesToScroll)?void(j.options.fade===!1&&(d=j.currentSlide,c!==!0?j.animateSlide(g,function(){j.postSlide(d)}):j.postSlide(d))):j.options.infinite===!1&&j.options.centerMode===!0&&(a<0||a>j.slideCount-j.options.slidesToScroll)?void(j.options.fade===!1&&(d=j.currentSlide,c!==!0?j.animateSlide(g,function(){j.postSlide(d)}):j.postSlide(d))):(j.options.autoplay&&clearInterval(j.autoPlayTimer),e=d<0?j.slideCount%j.options.slidesToScroll!==0?j.slideCount-j.slideCount%j.options.slidesToScroll:j.slideCount+d:d>=j.slideCount?j.slideCount%j.options.slidesToScroll!==0?0:d-j.slideCount:d,j.animating=!0,j.$slider.trigger("beforeChange",[j,j.currentSlide,e]),f=j.currentSlide,j.currentSlide=e,j.setSlideClasses(j.currentSlide),j.options.asNavFor&&(h=j.getNavTarget(),h=h.slick("getSlick"),h.slideCount<=h.options.slidesToShow&&h.setSlideClasses(j.currentSlide)),j.updateDots(),j.updateArrows(),j.options.fade===!0?(c!==!0?(j.fadeSlideOut(f),j.fadeSlide(e,function(){j.postSlide(e)})):j.postSlide(e),void j.animateHeight()):void(c!==!0?j.animateSlide(i,function(){j.postSlide(e)}):j.postSlide(e)))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),d<0&&(d=360-Math.abs(d)),d<=45&&d>=0?e.options.rtl===!1?"left":"right":d<=360&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&d<=225?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&d<=135?"down":"up":"vertical"},b.prototype.swipeEnd=function(a){var b,c,d=this;if(d.dragging=!1,d.interrupted=!1,d.shouldClick=!(d.touchObject.swipeLength>10),void 0===d.touchObject.curX)return!1;if(d.touchObject.edgeHit===!0&&d.$slider.trigger("edge",[d,d.swipeDirection()]),d.touchObject.swipeLength>=d.touchObject.minSwipe){switch(c=d.swipeDirection()){case"left":case"down":b=d.options.swipeToSlide?d.checkNavigable(d.currentSlide+d.getSlideCount()):d.currentSlide+d.getSlideCount(),d.currentDirection=0;break;case"right":case"up":b=d.options.swipeToSlide?d.checkNavigable(d.currentSlide-d.getSlideCount()):d.currentSlide-d.getSlideCount(),d.currentDirection=1}"vertical"!=c&&(d.slideHandler(b),d.touchObject={},d.$slider.trigger("swipe",[d,c]))}else d.touchObject.startX!==d.touchObject.curX&&(d.slideHandler(d.currentSlide),d.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&a.type.indexOf("mouse")!==-1))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var b,c,d,e,f,g=this;return f=void 0!==a.originalEvent?a.originalEvent.touches:null,!(!g.dragging||f&&1!==f.length)&&(b=g.getLeft(g.currentSlide),g.touchObject.curX=void 0!==f?f[0].pageX:a.clientX,g.touchObject.curY=void 0!==f?f[0].pageY:a.clientY,g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curX-g.touchObject.startX,2))),g.options.verticalSwiping===!0&&(g.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(g.touchObject.curY-g.touchObject.startY,2)))),c=g.swipeDirection(),"vertical"!==c?(void 0!==a.originalEvent&&g.touchObject.swipeLength>4&&a.preventDefault(),e=(g.options.rtl===!1?1:-1)*(g.touchObject.curX>g.touchObject.startX?1:-1),g.options.verticalSwiping===!0&&(e=g.touchObject.curY>g.touchObject.startY?1:-1),d=g.touchObject.swipeLength,g.touchObject.edgeHit=!1,g.options.infinite===!1&&(0===g.currentSlide&&"right"===c||g.currentSlide>=g.getDotCount()&&"left"===c)&&(d=g.touchObject.swipeLength*g.options.edgeFriction,g.touchObject.edgeHit=!0),g.options.vertical===!1?g.swipeLeft=b+d*e:g.swipeLeft=b+d*(g.$list.height()/g.listWidth)*e,g.options.verticalSwiping===!0&&(g.swipeLeft=b+d*e),g.options.fade!==!0&&g.options.touchMove!==!1&&(g.animating===!0?(g.swipeLeft=null,!1):void g.setCSS(g.swipeLeft))):void 0)},b.prototype.swipeStart=function(a){var b,c=this;return c.interrupted=!0,1!==c.touchObject.fingerCount||c.slideCount<=c.options.slidesToShow?(c.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(b=a.originalEvent.touches[0]),c.touchObject.startX=c.touchObject.curX=void 0!==b?b.pageX:a.clientX,c.touchObject.startY=c.touchObject.curY=void 0!==b?b.pageY:a.clientY,void(c.dragging=!0))},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var a,b=this;a=Math.floor(b.options.slidesToShow/2),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&!b.options.infinite&&(b.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),b.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===b.currentSlide?(b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),b.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):b.currentSlide>=b.slideCount-b.options.slidesToShow&&b.options.centerMode===!1?(b.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),b.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):b.currentSlide>=b.slideCount-1&&b.options.centerMode===!0&&(b.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),b.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;a.options.autoplay&&(document[a.hidden]?a.interrupted=!0:a.interrupted=!1)},a.fn.slick=function(){var a,c,d=this,e=arguments[0],f=Array.prototype.slice.call(arguments,1),g=d.length;for(a=0;a<g;a++)if("object"==typeof e||"undefined"==typeof e?d[a].slick=new b(d[a],e):c=d[a].slick[e].apply(d[a].slick,f),"undefined"!=typeof c)return c;return d}}),$(document).ready(function(){$("#camera").camera({autoAdvance:!0,height:"36.48%",minHeight:"300px",pagination:!0,thumbnails:!1,playPause:!1,hover:!1,loader:"none",navigation:!1,navigationHover:!1,mobileNavHover:!1,fx:"simpleFade"});var a=[-101.795467, 35.221816];mapboxgl.accessToken="pk.eyJ1IjoicmlsZXltam9obnNvbiIsImEiOiJjaXY1bGptMzAwMWhtMnluNnd2bzk1cjBzIn0.FicxbRtge8W-_mxFb_Qk1A";var b=new mapboxgl.Map({container:"google-map",style:"mapbox://styles/mapbox/streets-v9",center:a,zoom:15}),c=new mapboxgl.Popup({closeOnClick:!1,offset:[0,-64]}).setLngLat(a).setHTML('<a href="/directions" target="_blank" style="color: #0000EE; text-decoration: underline">799 N Grand St, Amarillo, Texas 79107, United States</a>'),d=document.createElement("div");d.className="marker",d.style.backgroundImage="url(/static/public/images/marker.png)",d.style.width="42px",d.style.height="64px",d.addEventListener("mouseover",function(){d.style.backgroundImage="url(/static/public/images/marker_active.png)"}),d.addEventListener("mouseout",function(){d.style.backgroundImage="url(/static/public/images/marker.png)"}),d.addEventListener("click",function(){c.addTo(b)}),new mapboxgl.Marker(d,{offset:[-21,-64]}).setLngLat(a).addTo(b)}),$(document).ready(function(){$(".your-class").slick({lazyLoad:"ondemand",arrows:!0,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:7e3})});